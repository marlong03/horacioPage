"use strict";(self.webpackChunkhoracioPage=self.webpackChunkhoracioPage||[]).push([[179],{159:($f,l0,Hf)=>{var Ta={};function Fe(t){return"function"==typeof t}function qf(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}Hf.r(Ta),Hf.d(Ta,{FirebaseError:()=>ui,SDK_VERSION:()=>dh,_DEFAULT_ENTRY_NAME:()=>di,_addComponent:()=>lh,_addOrOverwriteComponent:()=>zT,_apps:()=>hi,_clearComponents:()=>gG,_components:()=>Hc,_getProvider:()=>GT,_registerComponent:()=>fs,_removeServiceInstance:()=>pG,deleteApp:()=>WT,getApp:()=>_G,getApps:()=>vG,initializeApp:()=>zy,onLog:()=>KT,registerVersion:()=>or,setLogLevel:()=>QT});const zf=qf(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Gf(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class vn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Fe(r))try{r()}catch(s){e=s instanceof zf?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{f0(s)}catch(o){e=e??[],o instanceof zf?e=[...e,...o.errors]:e.push(o)}}if(e)throw new zf(e)}}add(e){var n;if(e&&e!==this)if(this.closed)f0(e);else{if(e instanceof vn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Gf(n,e)}remove(e){const{_finalizers:n}=this;n&&Gf(n,e),e instanceof vn&&e._removeParent(this)}}vn.EMPTY=(()=>{const t=new vn;return t.closed=!0,t})();const d0=vn.EMPTY;function h0(t){return t instanceof vn||t&&"closed"in t&&Fe(t.remove)&&Fe(t.add)&&Fe(t.unsubscribe)}function f0(t){Fe(t)?t():t.unsubscribe()}const Fi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ul={setTimeout(t,e,...n){const{delegate:r}=ul;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=ul;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function p0(t){ul.setTimeout(()=>{const{onUnhandledError:e}=Fi;if(!e)throw t;e(t)})}function g0(){}const SR=Wf("C",void 0,void 0);function Wf(t,e,n){return{kind:t,value:e,error:n}}let Li=null;function ll(t){if(Fi.useDeprecatedSynchronousErrorHandling){const e=!Li;if(e&&(Li={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Li;if(Li=null,n)throw r}}else t()}class Kf extends vn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,h0(e)&&e.add(this)):this.destination=NR}static create(e,n,r){return new Ma(e,n,r)}next(e){this.isStopped?Yf(function MR(t){return Wf("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Yf(function TR(t){return Wf("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Yf(SR,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const OR=Function.prototype.bind;function Qf(t,e){return OR.call(t,e)}class PR{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){dl(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){dl(r)}else dl(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){dl(n)}}}class Ma extends Kf{constructor(e,n,r){let i;if(super(),Fe(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Fi.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Qf(e.next,s),error:e.error&&Qf(e.error,s),complete:e.complete&&Qf(e.complete,s)}):i=e}this.destination=new PR(i)}}function dl(t){Fi.useDeprecatedSynchronousErrorHandling?function AR(t){Fi.useDeprecatedSynchronousErrorHandling&&Li&&(Li.errorThrown=!0,Li.error=t)}(t):p0(t)}function Yf(t,e){const{onStoppedNotification:n}=Fi;n&&ul.setTimeout(()=>n(t,e))}const NR={closed:!0,next:g0,error:function RR(t){throw t},complete:g0},Zf="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ui(t){return t}function m0(t){return 0===t.length?Ui:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let st=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function LR(t){return t&&t instanceof Kf||function FR(t){return t&&Fe(t.next)&&Fe(t.error)&&Fe(t.complete)}(t)&&h0(t)}(n)?n:new Ma(n,r,i);return ll(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=y0(r))((i,s)=>{const o=new Ma({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Zf](){return this}pipe(...n){return m0(n)(this)}toPromise(n){return new(n=y0(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function y0(t){var e;return null!==(e=t??Fi.Promise)&&void 0!==e?e:Promise}const UR=qf(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let _r=(()=>{class t extends st{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new _0(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new UR}next(n){ll(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){ll(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ll(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?d0:(this.currentObservers=null,s.push(n),new vn(()=>{this.currentObservers=null,Gf(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new st;return n.source=this,n}}return t.create=(e,n)=>new _0(e,n),t})();class _0 extends _r{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:d0}}function v0(t){return Fe(t?.lift)}function ht(t){return e=>{if(v0(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ft(t,e,n,r,i){return new BR(t,e,n,r,i)}class BR extends Kf{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function de(t,e){return ht((n,r)=>{let i=0;n.subscribe(ft(r,s=>{r.next(t.call(e,s,i++))}))})}function Bi(t){return this instanceof Bi?(this.v=t,this):new Bi(t)}function $R(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function c(h){h.value instanceof Bi?Promise.resolve(h.value.v).then(u,l):d(s[0][2],h)}(r[h](f))}catch(p){d(s[0][3],p)}}function u(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function HR(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function D0(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){!function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}(a,c,(o=t[s](o)).done,o.value)})}}}const C0=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function E0(t){return Fe(t?.then)}function I0(t){return Fe(t[Zf])}function x0(t){return Symbol.asyncIterator&&Fe(t?.[Symbol.asyncIterator])}function S0(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const T0=function zR(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function M0(t){return Fe(t?.[T0])}function A0(t){return $R(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield Bi(n.read());if(i)return yield Bi(void 0);yield yield Bi(r)}}finally{n.releaseLock()}})}function O0(t){return Fe(t?.getReader)}function An(t){if(t instanceof st)return t;if(null!=t){if(I0(t))return function GR(t){return new st(e=>{const n=t[Zf]();if(Fe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(C0(t))return function WR(t){return new st(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(E0(t))return function KR(t){return new st(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,p0)})}(t);if(x0(t))return P0(t);if(M0(t))return function QR(t){return new st(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(O0(t))return function YR(t){return P0(A0(t))}(t)}throw S0(t)}function P0(t){return new st(e=>{(function ZR(t,e){var n,r,i,s;return function VR(t,e,n,r){return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=HR(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function vr(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function _t(t,e,n=1/0){return Fe(e)?_t((r,i)=>de((s,o)=>e(r,s,i,o))(An(t(r,i))),n):("number"==typeof e&&(n=e),ht((r,i)=>function XR(t,e,n,r,i,s,o,a){const c=[];let u=0,l=0,d=!1;const h=()=>{d&&!c.length&&!u&&e.complete()},f=g=>u<r?p(g):c.push(g),p=g=>{s&&e.next(g),u++;let m=!1;An(n(g,l++)).subscribe(ft(e,C=>{i?.(C),s?f(C):e.next(C)},()=>{m=!0},void 0,()=>{if(m)try{for(u--;c.length&&u<r;){const C=c.shift();o?vr(e,o,()=>p(C)):p(C)}h()}catch(C){e.error(C)}}))};return t.subscribe(ft(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,t,n)))}function zs(t=1/0){return _t(Ui,t)}const Gn=new st(t=>t.complete());function Jf(t){return t[t.length-1]}function Aa(t){return function eN(t){return t&&Fe(t.schedule)}(Jf(t))?t.pop():void 0}function R0(t,e=0){return ht((n,r)=>{n.subscribe(ft(r,i=>vr(r,t,()=>r.next(i),e),()=>vr(r,t,()=>r.complete(),e),i=>vr(r,t,()=>r.error(i),e)))})}function N0(t,e=0){return ht((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function k0(t,e){if(!t)throw new Error("Iterable cannot be null");return new st(n=>{vr(n,e,()=>{const r=t[Symbol.asyncIterator]();vr(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function ot(t,e){return e?function cN(t,e){if(null!=t){if(I0(t))return function rN(t,e){return An(t).pipe(N0(e),R0(e))}(t,e);if(C0(t))return function sN(t,e){return new st(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(E0(t))return function iN(t,e){return An(t).pipe(N0(e),R0(e))}(t,e);if(x0(t))return k0(t,e);if(M0(t))return function oN(t,e){return new st(n=>{let r;return vr(n,e,()=>{r=t[T0](),vr(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>Fe(r?.return)&&r.return()})}(t,e);if(O0(t))return function aN(t,e){return k0(A0(t),e)}(t,e)}throw S0(t)}(t,e):An(t)}function ep(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new Ma({next:()=>{r.unsubscribe(),t()}});return An(e(...n)).subscribe(r)}function Ee(t){for(let e in t)if(t[e]===Ee)return e;throw Error("Could not find renamed property on target object.")}function Ie(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ie).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function np(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const dN=Ee({__forward_ref__:Ee});function rp(t){return t.__forward_ref__=rp,t.toString=function(){return Ie(this())},t}function G(t){return ip(t)?t():t}function ip(t){return"function"==typeof t&&t.hasOwnProperty(dN)&&t.__forward_ref__===rp}function sp(t){return t&&!!t.\u0275providers}const F0="https://g.co/ng/security#xss";class P extends Error{constructor(e,n){super(function hl(t,e){return`NG0${Math.abs(t)}${e?": "+e.trim():""}`}(e,n)),this.code=e}}function J(t){return"string"==typeof t?t:null==t?"":String(t)}function fl(t,e){throw new P(-201,!1)}function wn(t,e){null==t&&function ve(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function K(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Qr(t){return{providers:t.providers||[],imports:t.imports||[]}}function pl(t){return L0(t,gl)||L0(t,B0)}function L0(t,e){return t.hasOwnProperty(e)?t[e]:null}function U0(t){return t&&(t.hasOwnProperty(op)||t.hasOwnProperty(wN))?t[op]:null}const gl=Ee({\u0275prov:Ee}),op=Ee({\u0275inj:Ee}),B0=Ee({ngInjectableDef:Ee}),wN=Ee({ngInjectorDef:Ee});var W=(()=>((W=W||{})[W.Default=0]="Default",W[W.Host=1]="Host",W[W.Self=2]="Self",W[W.SkipSelf=4]="SkipSelf",W[W.Optional=8]="Optional",W))();let ap;function bn(t){const e=ap;return ap=t,e}function V0(t,e,n){const r=pl(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&W.Optional?null:void 0!==e?e:void fl(Ie(t))}const xe=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Oa={},cp="__NG_DI_FLAG__",ml="ngTempTokenPath",CN=/\n/gm,j0="__source";let Pa;function Gs(t){const e=Pa;return Pa=t,e}function IN(t,e=W.Default){if(void 0===Pa)throw new P(-203,!1);return null===Pa?V0(t,void 0,e):Pa.get(t,e&W.Optional?null:void 0,e)}function H(t,e=W.Default){return(function bN(){return ap}()||IN)(G(t),e)}function he(t,e=W.Default){return H(t,yl(e))}function yl(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function up(t){const e=[];for(let n=0;n<t.length;n++){const r=G(t[n]);if(Array.isArray(r)){if(0===r.length)throw new P(900,!1);let i,s=W.Default;for(let o=0;o<r.length;o++){const a=r[o],c=xN(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(H(i,s))}else e.push(H(r))}return e}function Ra(t,e){return t[cp]=e,t.prototype[cp]=e,t}function xN(t){return t[cp]}function Yr(t){return{toString:t}.toString()}var On=(()=>((On=On||{})[On.OnPush=0]="OnPush",On[On.Default=1]="Default",On))(),Wn=(()=>{return(t=Wn||(Wn={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Wn;var t})();const wr={},ye=[],_l=Ee({\u0275cmp:Ee}),lp=Ee({\u0275dir:Ee}),dp=Ee({\u0275pipe:Ee}),H0=Ee({\u0275mod:Ee}),br=Ee({\u0275fac:Ee}),Na=Ee({__NG_ELEMENT_ID__:Ee});let MN=0;function Ft(t){return Yr(()=>{const n=!0===t.standalone,r={},i={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===On.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||ye,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Wn.Emulated,id:"c"+MN++,styles:t.styles||ye,_:null,setInput:null,schemas:t.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},s=t.dependencies,o=t.features;return i.inputs=G0(t.inputs,r),i.outputs=G0(t.outputs),o&&o.forEach(a=>a(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(q0).filter(z0):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(Ut).filter(z0):null,i})}function q0(t){return we(t)||St(t)}function z0(t){return null!==t}function Vi(t){return Yr(()=>({type:t.type,bootstrap:t.bootstrap||ye,declarations:t.declarations||ye,imports:t.imports||ye,exports:t.exports||ye,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function G0(t,e){if(null==t)return wr;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const Lt=Ft;function we(t){return t[_l]||null}function St(t){return t[lp]||null}function Ut(t){return t[dp]||null}function cn(t,e){const n=t[H0]||null;if(!n&&!0===e)throw new Error(`Type ${Ie(t)} does not have '\u0275mod' property.`);return n}function un(t){return Array.isArray(t)&&"object"==typeof t[1]}function Rn(t){return Array.isArray(t)&&!0===t[1]}function pp(t){return 0!=(4&t.flags)}function Ua(t){return t.componentOffset>-1}function Cl(t){return 1==(1&t.flags)}function Nn(t){return null!==t.template}function PN(t){return 0!=(256&t[2])}function $i(t,e){return t.hasOwnProperty(br)?t[br]:null}class kN{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Hi(){return X0}function X0(t){return t.type.prototype.ngOnChanges&&(t.setInput=LN),FN}function FN(){const t=eb(this),e=t?.current;if(e){const n=t.previous;if(n===wr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function LN(t,e,n,r){const i=this.declaredInputs[n],s=eb(t)||function UN(t,e){return t[J0]=e}(t,{previous:wr,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new kN(c&&c.currentValue,e,a===wr),t[r]=e}Hi.ngInherit=!0;const J0="__ngSimpleChanges__";function eb(t){return t[J0]||null}function vt(t){for(;Array.isArray(t);)t=t[0];return t}function El(t,e){return vt(e[t])}function ln(t,e){return vt(e[t.index])}function rb(t,e){return t.data[e]}function dn(t,e){const n=e[t];return un(n)?n:n[0]}function Il(t){return 64==(64&t[2])}function Zr(t,e){return null==e?null:t[e]}function ib(t){t[18]=0}function mp(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const ee={lFrame:pb(null),bindingsEnabled:!0};function ob(){return ee.bindingsEnabled}function I(){return ee.lFrame.lView}function fe(){return ee.lFrame.tView}function wt(){let t=ab();for(;null!==t&&64===t.type;)t=t.parent;return t}function ab(){return ee.lFrame.currentTNode}function Qn(t,e){const n=ee.lFrame;n.currentTNode=t,n.isParent=e}function yp(){return ee.lFrame.isParent}function Js(){return ee.lFrame.bindingIndex++}function JN(t,e){const n=ee.lFrame;n.bindingIndex=n.bindingRootIndex=t,vp(e)}function vp(t){ee.lFrame.currentDirectiveIndex=t}function bp(t){ee.lFrame.currentQueryIndex=t}function tk(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function hb(t,e,n){if(n&W.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&W.Host||(i=tk(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,t=s}const r=ee.lFrame=fb();return r.currentTNode=e,r.lView=t,!0}function Dp(t){const e=fb(),n=t[1];ee.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function fb(){const t=ee.lFrame,e=null===t?null:t.child;return null===e?pb(t):e}function pb(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function gb(){const t=ee.lFrame;return ee.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const mb=gb;function Cp(){const t=gb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function jt(){return ee.lFrame.selectedIndex}function qi(t){ee.lFrame.selectedIndex=t}function Le(){const t=ee.lFrame;return rb(t.tView,t.selectedIndex)}function xl(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=s;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),c&&(t.viewHooks||(t.viewHooks=[])).push(-n,c),u&&((t.viewHooks||(t.viewHooks=[])).push(n,u),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,u)),null!=l&&(t.destroyHooks||(t.destroyHooks=[])).push(n,l)}}function Sl(t,e,n){yb(t,e,3,n)}function Tl(t,e,n,r){(3&t[2])===n&&yb(t,e,n,r)}function Ep(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function yb(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&t[18]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(t[18]+=65536),(a<s||-1==s)&&(lk(t,n,e,c),t[18]=(4294901760&t[18])+c+2),c++}function lk(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Va{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function xp(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];vb(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function _b(t){return 3===t||4===t||6===t}function vb(t){return 64===t.charCodeAt(0)}function ja(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||wb(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function wb(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function bb(t){return-1!==t}function Ml(t){return 32767&t}function Al(t,e){let n=function pk(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let Sp=!0;function Ol(t){const e=Sp;return Sp=t,e}let gk=0;const Yn={};function Pl(t,e){const n=Eb(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Tp(r.data,t),Tp(e,null),Tp(r.blueprint,null));const i=Mp(t,e),s=t.injectorIndex;if(bb(i)){const o=Ml(i),a=Al(i,e),c=a[1].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function Tp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Eb(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Mp(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=Pb(i),null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Ap(t,e,n){!function mk(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Na)&&(r=n[Na]),null==r&&(r=n[Na]=gk++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Ib(t,e,n){if(n&W.Optional||void 0!==t)return t;fl()}function xb(t,e,n,r){if(n&W.Optional&&void 0===r&&(r=null),!(n&(W.Self|W.Host))){const i=t[9],s=bn(void 0);try{return i?i.get(e,r,n&W.Optional):V0(e,r,n&W.Optional)}finally{bn(s)}}return Ib(r,0,n)}function Sb(t,e,n,r=W.Default,i){if(null!==t){if(1024&e[2]){const o=function bk(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=Tb(s,o,n,r|W.Self,Yn);if(a!==Yn)return a;let c=s.parent;if(!c){const u=o[21];if(u){const l=u.get(n,Yn,r);if(l!==Yn)return l}c=Pb(o),o=o[15]}s=c}return i}(t,e,n,r,Yn);if(o!==Yn)return o}const s=Tb(t,e,n,r,Yn);if(s!==Yn)return s}return xb(e,n,r,i)}function Tb(t,e,n,r,i){const s=function vk(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Na)?t[Na]:void 0;return"number"==typeof e?e>=0?255&e:wk:e}(n);if("function"==typeof s){if(!hb(e,t,r))return r&W.Host?Ib(i,0,r):xb(e,n,r,i);try{const o=s(r);if(null!=o||r&W.Optional)return o;fl()}finally{mb()}}else if("number"==typeof s){let o=null,a=Eb(t,e),c=-1,u=r&W.Host?e[16][6]:null;for((-1===a||r&W.SkipSelf)&&(c=-1===a?Mp(t,e):e[a+8],-1!==c&&Ab(r,!1)?(o=e[1],a=Ml(c),e=Al(c,e)):a=-1);-1!==a;){const l=e[1];if(Mb(s,a,l.data)){const d=_k(a,e,n,o,r,u);if(d!==Yn)return d}c=e[a+8],-1!==c&&Ab(r,e[1].data[a+8]===u)&&Mb(s,a,e)?(o=l,a=Ml(c),e=Al(c,e)):a=-1}}return i}function _k(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],l=function Rl(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,c=t.directiveStart,l=s>>20,h=i?a+l:t.directiveEnd;for(let f=r?a:a+l;f<h;f++){const p=o[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(i){const f=o[c];if(f&&Nn(f)&&f.type===n)return c}return null}(a,o,n,null==r?Ua(a)&&Sp:r!=o&&0!=(3&a.type),i&W.Host&&s===a);return null!==l?zi(e,o,l,a):Yn}function zi(t,e,n,r){let i=t[n];const s=e.data;if(function dk(t){return t instanceof Va}(i)){const o=i;o.resolving&&function hN(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new P(-200,`Circular dependency in DI detected for ${t}${n}`)}(function _e(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():J(t)}(s[n]));const a=Ol(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?bn(o.injectImpl):null;hb(t,r,W.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function uk(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=X0(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==c&&bn(c),Ol(a),o.resolving=!1,mb()}}return i}function Mb(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Ab(t,e){return!(t&W.Self||t&W.Host&&e)}class to{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Sb(this._tNode,this._lView,e,yl(r),n)}}function wk(){return new to(wt(),I())}function Op(t){return ip(t)?()=>{const e=Op(G(t));return e&&e()}:$i(t)}function Pb(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[6]:null}const ro="__parameters__";function so(t,e,n){return Yr(()=>{const r=function Pp(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,u,l){const d=c.hasOwnProperty(ro)?c[ro]:Object.defineProperty(c,ro,{value:[]})[ro];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Y{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=K({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Gi(t,e){t.forEach(n=>Array.isArray(n)?Gi(n,e):e(n))}function Nb(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function kl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function hn(t,e,n){let r=oo(t,e);return r>=0?t[1|r]=n:(r=~r,function Ik(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Np(t,e){const n=oo(t,e);if(n>=0)return t[1|n]}function oo(t,e){return function kb(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const za=Ra(so("Optional"),8),Ga=Ra(so("SkipSelf"),4);var Jt=(()=>((Jt=Jt||{})[Jt.Important=1]="Important",Jt[Jt.DashCase=2]="DashCase",Jt))();const Vp=new Map;let Wk=0;const $p="__ngContext__";function At(t,e){un(e)?(t[$p]=e[20],function Qk(t){Vp.set(t[20],t)}(e)):t[$p]=e}function qp(t,e){return undefined(t,e)}function Ya(t){const e=t[3];return Rn(e)?e[3]:e}function zp(t){return tD(t[13])}function Gp(t){return tD(t[4])}function tD(t){for(;null!==t&&!Rn(t);)t=t[4];return t}function co(t,e,n,r,i){if(null!=r){let s,o=!1;Rn(r)?s=r:un(r)&&(o=!0,r=r[0]);const a=vt(r);0===t&&null!==n?null==i?aD(e,n,a):Wi(e,n,a,i||null,!0):1===t&&null!==n?Wi(e,n,a,i||null,!0):2===t?function Jp(t,e,n){const r=Bl(t,e);r&&function gF(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function _F(t,e,n,r,i){const s=n[7];s!==vt(n)&&co(e,t,r,s,i);for(let a=10;a<n.length;a++){const c=n[a];Za(c[1],c,t,e,r,s)}}(e,t,s,n,i)}}function Kp(t,e,n){return t.createElement(e,n)}function rD(t,e){const n=t[9],r=n.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,mp(i,-1)),n.splice(r,1)}function Qp(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&rD(i,r),e>0&&(t[n-1][4]=r[4]);const s=kl(t,10+e);!function aF(t,e){Za(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function iD(t,e){if(!(128&e[2])){const n=e[11];n.destroyNode&&Za(t,e,n,3,null,null),function lF(t){let e=t[13];if(!e)return Yp(t[1],t);for(;e;){let n=null;if(un(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)un(e)&&Yp(e[1],e),e=e[3];null===e&&(e=t),un(e)&&Yp(e[1],e),n=e&&e[4]}e=n}}(e)}}function Yp(t,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function pF(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Va)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];try{c.call(a)}finally{}}else try{s.call(i)}finally{}}}}(t,e),function fF(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[i=o]():r[i=-o].unsubscribe(),s+=2}else{const o=r[i=n[s+1]];n[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();e[7]=null}}(t,e),1===e[1].type&&e[11].destroy();const n=e[17];if(null!==n&&Rn(e[3])){n!==e[3]&&rD(n,e);const r=e[19];null!==r&&r.detachView(t)}!function Yk(t){Vp.delete(t[20])}(e)}}function sD(t,e,n){return function oD(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===Wn.None||s===Wn.Emulated)return null}return ln(r,n)}}(t,e.parent,n)}function Wi(t,e,n,r,i){t.insertBefore(e,n,r,i)}function aD(t,e,n){t.appendChild(e,n)}function cD(t,e,n,r,i){null!==r?Wi(t,e,n,r,i):aD(t,e,n)}function Bl(t,e){return t.parentNode(e)}let ng,Hl,dD=function lD(t,e,n){return 40&t.type?ln(t,n):null};function Vl(t,e,n,r){const i=sD(t,r,e),s=e[11],a=function uD(t,e,n){return dD(t,e,n)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)cD(s,i,n[c],a,!1);else cD(s,i,n,a,!1)}function jl(t,e){if(null!==e){const n=e.type;if(3&n)return ln(e,t);if(4&n)return Xp(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return jl(t,r);{const i=t[e.index];return Rn(i)?Xp(-1,i):vt(i)}}if(32&n)return qp(e,t)()||vt(t[e.index]);{const r=fD(t,e);return null!==r?Array.isArray(r)?r[0]:jl(Ya(t[16]),r):jl(t,e.next)}}return null}function fD(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Xp(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return jl(r,i)}return e[7]}function eg(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],c=n.type;if(o&&0===e&&(a&&At(vt(a),r),n.flags|=2),32!=(32&n.flags))if(8&c)eg(t,e,n.child,r,i,s,!1),co(e,t,i,a,s);else if(32&c){const u=qp(n,r);let l;for(;l=u();)co(e,t,i,l,s);co(e,t,i,a,s)}else 16&c?pD(t,e,r,n,i,s):co(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Za(t,e,n,r,i,s){eg(n,r,t.firstChild,e,i,s,!1)}function pD(t,e,n,r,i,s){const o=n[16],c=o[6].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)co(e,t,i,c[u],s);else eg(t,e,c,o[3],i,s,!0)}function gD(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function mD(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&xp(t,e,r),null!==i&&gD(t,e,i),null!==s&&function wF(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}function wD(t){return function rg(){if(void 0===Hl&&(Hl=null,xe.trustedTypes))try{Hl=xe.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Hl}()?.createScriptURL(t)||t}class bD{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${F0})`}}function Xr(t){return t instanceof bD?t.changingThisBreaksApplicationSecurity:t}function Xa(t,e){const n=function AF(t){return t instanceof bD&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${F0})`)}return n===e}const NF=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Xe=(()=>((Xe=Xe||{})[Xe.NONE=0]="NONE",Xe[Xe.HTML=1]="HTML",Xe[Xe.STYLE=2]="STYLE",Xe[Xe.SCRIPT=3]="SCRIPT",Xe[Xe.URL=4]="URL",Xe[Xe.RESOURCE_URL=5]="RESOURCE_URL",Xe))();function Jr(t){const e=ec();return e?e.sanitize(Xe.URL,t)||"":Xa(t,"URL")?Xr(t):function ig(t){return(t=String(t)).match(NF)?t:"unsafe:"+t}(J(t))}function TD(t){const e=ec();if(e)return wD(e.sanitize(Xe.RESOURCE_URL,t)||"");if(Xa(t,"ResourceURL"))return wD(Xr(t));throw new P(904,!1)}function ec(){const t=I();return t&&t[12]}const zl=new Y("ENVIRONMENT_INITIALIZER"),AD=new Y("INJECTOR",-1),OD=new Y("INJECTOR_DEF_TYPES");class PD{get(e,n=Oa){if(n===Oa){const r=new Error(`NullInjectorError: No provider for ${Ie(e)}!`);throw r.name="NullInjectorError",r}return n}}function WF(...t){return{\u0275providers:RD(0,t),\u0275fromNgModule:!0}}function RD(t,...e){const n=[],r=new Set;let i;return Gi(e,s=>{const o=s;cg(o,n,[],r)&&(i||(i=[]),i.push(o))}),void 0!==i&&ND(i,n),n}function ND(t,e){for(let n=0;n<t.length;n++){const{providers:i}=t[n];ug(i,s=>{e.push(s)})}}function cg(t,e,n,r){if(!(t=G(t)))return!1;let i=null,s=U0(t);const o=!s&&we(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const c=t.ngModule;if(s=U0(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of c)cg(u,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{Gi(s.imports,l=>{cg(l,e,n,r)&&(u||(u=[]),u.push(l))})}finally{}void 0!==u&&ND(u,e)}if(!a){const u=$i(i)||(()=>new i);e.push({provide:i,useFactory:u,deps:ye},{provide:OD,useValue:i,multi:!0},{provide:zl,useValue:()=>H(i),multi:!0})}const c=s.providers;null==c||a||ug(c,l=>{e.push(l)})}}return i!==t&&void 0!==t.providers}function ug(t,e){for(let n of t)sp(n)&&(n=n.\u0275providers),Array.isArray(n)?ug(n,e):e(n)}const KF=Ee({provide:String,useValue:Ee});function lg(t){return null!==t&&"object"==typeof t&&KF in t}function Qi(t){return"function"==typeof t}const dg=new Y("Set Injector scope."),Gl={},YF={};let hg;function Wl(){return void 0===hg&&(hg=new PD),hg}class xr{}class LD extends xr{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,pg(e,o=>this.processProvider(o)),this.records.set(AD,uo(void 0,this)),i.has("environment")&&this.records.set(xr,uo(void 0,this));const s=this.records.get(dg);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(OD.multi,ye,W.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const n=Gs(this),r=bn(void 0);try{return e()}finally{Gs(n),bn(r)}}get(e,n=Oa,r=W.Default){this.assertNotDestroyed(),r=yl(r);const i=Gs(this),s=bn(void 0);try{if(!(r&W.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function tL(t){return"function"==typeof t||"object"==typeof t&&t instanceof Y}(e)&&pl(e);a=c&&this.injectableDefInScope(c)?uo(fg(e),Gl):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&W.Self?Wl():this.parent).get(e,n=r&W.Optional&&n===Oa?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[ml]=o[ml]||[]).unshift(Ie(e)),i)throw o;return function SN(t,e,n,r){const i=t[ml];throw e[j0]&&i.unshift(e[j0]),t.message=function TN(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Ie(e);if(Array.isArray(e))i=e.map(Ie).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Ie(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(CN,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[ml]=null,t}(o,e,"R3InjectorError",this.source)}throw o}finally{bn(s),Gs(i)}}resolveInjectorInitializers(){const e=Gs(this),n=bn(void 0);try{const r=this.get(zl.multi,ye,W.Self);for(const i of r)i()}finally{Gs(e),bn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Ie(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new P(205,!1)}processProvider(e){let n=Qi(e=G(e))?e:G(e&&e.provide);const r=function XF(t){return lg(t)?uo(void 0,t.useValue):uo(function UD(t,e,n){let r;if(Qi(t)){const i=G(t);return $i(i)||fg(i)}if(lg(t))r=()=>G(t.useValue);else if(function FD(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...up(t.deps||[]));else if(function kD(t){return!(!t||!t.useExisting)}(t))r=()=>H(G(t.useExisting));else{const i=G(t&&(t.useClass||t.provide));if(!function JF(t){return!!t.deps}(t))return $i(i)||fg(i);r=()=>new i(...up(t.deps))}return r}(t),Gl)}(e);if(Qi(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=uo(void 0,Gl,!0),i.factory=()=>up(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Gl&&(n.value=YF,n.value=n.factory()),"object"==typeof n.value&&n.value&&function eL(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=G(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function fg(t){const e=pl(t),n=null!==e?e.factory:$i(t);if(null!==n)return n;if(t instanceof Y)throw new P(204,!1);if(t instanceof Function)return function ZF(t){const e=t.length;if(e>0)throw function qa(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new P(204,!1);const n=function _N(t){const e=t&&(t[gl]||t[B0]);if(e){const n=function vN(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new P(204,!1)}function uo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function pg(t,e){for(const n of t)Array.isArray(n)?pg(n,e):n&&sp(n)?pg(n.\u0275providers,e):e(n)}class nL{}class BD{}class iL{resolveComponentFactory(e){throw function rL(t){const e=Error(`No component factory found for ${Ie(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(e)}}let tc=(()=>{class t{}return t.NULL=new iL,t})();function sL(){return lo(wt(),I())}function lo(t,e){return new ei(ln(t,e))}let ei=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=sL,t})();class jD{}let Kl=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function aL(){const t=I(),n=dn(wt().index,t);return(un(n)?n:t)[11]}(),t})(),cL=(()=>{class t{}return t.\u0275prov=K({token:t,providedIn:"root",factory:()=>null}),t})();class Ql{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const uL=new Ql("15.1.4"),gg={};function yg(t){return t.ngOriginalError}class ho{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&yg(e);for(;n&&yg(n);)n=yg(n);return n||null}}function Sr(t){return t instanceof Function?t():t}function HD(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}const qD="ng-template";function wL(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==HD(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function zD(t){return 4===t.type&&t.value!==qD}function bL(t,e,n){return e===(4!==t.type||n?t.value:qD)}function DL(t,e,n){let r=4;const i=t.attrs||[],s=function IL(t){for(let e=0;e<t.length;e++)if(_b(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!bL(t,c,n)||""===c&&1===e.length){if(kn(r))return!1;o=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==t.attrs){if(!wL(t.attrs,u,n)){if(kn(r))return!1;o=!0}continue}const d=CL(8&r?"class":c,i,zD(t),n);if(-1===d){if(kn(r))return!1;o=!0;continue}if(""!==u){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==HD(f,u,0)||2&r&&u!==h){if(kn(r))return!1;o=!0}}}}else{if(!o&&!kn(r)&&!kn(c))return!1;if(o&&kn(c))continue;o=!1,r=c|1&r}}return kn(r)||o}function kn(t){return 0==(1&t)}function CL(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function xL(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function GD(t,e,n=!1){for(let r=0;r<e.length;r++)if(DL(t,e[r],n))return!0;return!1}function WD(t,e){return t?":not("+e.trim()+")":e}function TL(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!kn(o)&&(e+=WD(s,i),i=""),r=o,s=s||!kn(r);n++}return""!==i&&(e+=WD(s,i)),e}const te={};function Je(t){KD(fe(),I(),jt()+t,!1)}function KD(t,e,n,r){if(!r)if(3==(3&e[2])){const s=t.preOrderCheckHooks;null!==s&&Sl(e,s,n)}else{const s=t.preOrderHooks;null!==s&&Tl(e,s,0,n)}qi(n)}function XD(t,e=null,n=null,r){const i=JD(t,e,n,r);return i.resolveInjectorInitializers(),i}function JD(t,e=null,n=null,r,i=new Set){const s=[n||ye,WF(t)];return r=r||("object"==typeof t?void 0:Ie(t)),new LD(s,e||Wl(),r||null,i)}let Zn=(()=>{class t{static create(n,r){if(Array.isArray(n))return XD({name:""},r,n,"");{const i=n.name??"";return XD({name:i},n.parent,n.providers,i)}}}return t.THROW_IF_NOT_FOUND=Oa,t.NULL=new PD,t.\u0275prov=K({token:t,providedIn:"any",factory:()=>H(AD)}),t.__NG_ELEMENT_ID__=-1,t})();function $(t,e=W.Default){const n=I();return null===n?H(t,e):Sb(wt(),n,G(t),e)}function aC(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];bp(n[r]),o.contentQueries(2,e[s],s)}}}function Zl(t,e,n,r,i,s,o,a,c,u,l){const d=e.blueprint.slice();return d[0]=i,d[2]=76|r,(null!==l||t&&1024&t[2])&&(d[2]|=1024),ib(d),d[3]=d[15]=t,d[8]=n,d[10]=o||t&&t[10],d[11]=a||t&&t[11],d[12]=c||t&&t[12]||null,d[9]=u||t&&t[9]||null,d[6]=s,d[20]=function Kk(){return Wk++}(),d[21]=l,d[16]=2==e.type?t[16]:d,d}function go(t,e,n,r,i){let s=t.data[e];if(null===s)s=function Dg(t,e,n,r,i){const s=ab(),o=yp(),c=t.data[e]=function e2(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c)),c}(t,e,n,r,i),function XN(){return ee.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function Ba(){const t=ee.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Qn(s,!0),s}function nc(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Cg(t,e,n){Dp(e);try{const r=t.viewQuery;null!==r&&Rg(1,r,n);const i=t.template;null!==i&&cC(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&aC(t,e),t.staticViewQueries&&Rg(2,t.viewQuery,n);const s=t.components;null!==s&&function ZL(t,e){for(let n=0;n<e.length;n++)v2(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,Cp()}}function Xl(t,e,n,r){const i=e[2];if(128!=(128&i)){Dp(e);try{ib(e),function ub(t){return ee.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&cC(t,e,n,2,r);const o=3==(3&i);if(o){const u=t.preOrderCheckHooks;null!==u&&Sl(e,u,null)}else{const u=t.preOrderHooks;null!==u&&Tl(e,u,0,null),Ep(e,0)}if(function y2(t){for(let e=zp(t);null!==e;e=Gp(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const i=n[r];512&i[2]||mp(i[3],1),i[2]|=512}}}(e),function m2(t){for(let e=zp(t);null!==e;e=Gp(e))for(let n=10;n<e.length;n++){const r=e[n],i=r[1];Il(r)&&Xl(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&aC(t,e),o){const u=t.contentCheckHooks;null!==u&&Sl(e,u)}else{const u=t.contentHooks;null!==u&&Tl(e,u,1),Ep(e,1)}!function QL(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)qi(~i);else{const s=i,o=n[++r],a=n[++r];JN(o,s),a(2,e[s])}}}finally{qi(-1)}}(t,e);const a=t.components;null!==a&&function YL(t,e){for(let n=0;n<e.length;n++)_2(t,e[n])}(e,a);const c=t.viewQuery;if(null!==c&&Rg(2,c,r),o){const u=t.viewCheckHooks;null!==u&&Sl(e,u)}else{const u=t.viewHooks;null!==u&&Tl(e,u,2),Ep(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,mp(e[3],-1))}finally{Cp()}}}function cC(t,e,n,r,i){const s=jt(),o=2&r;try{qi(-1),o&&e.length>22&&KD(t,e,22,!1),n(r,i)}finally{qi(s)}}function Eg(t,e,n){if(pp(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=t.data[s];o.contentQueries&&o.contentQueries(1,n[s],s)}}}function Ig(t,e,n){ob()&&(function o2(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;Ua(n)&&function f2(t,e,n){const r=ln(e,t),i=uC(n),s=t[10],o=Jl(t,Zl(t,i,null,n.onPush?32:16,r,e,s,s.createRenderer(r,n),null,null,null));t[e.index]=o}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Pl(n,e),At(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const c=t.data[a],u=zi(e,t,a,n);At(u,e),null!==o&&p2(0,a-i,u,c,0,o),Nn(c)&&(dn(n.index,e)[8]=zi(e,t,a,n))}}(t,e,n,ln(n,e)),64==(64&n.flags)&&gC(t,e,n))}function xg(t,e,n=ln){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function uC(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Sg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Sg(t,e,n,r,i,s,o,a,c,u){const l=22+r,d=l+i,h=function XL(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:te);return n}(l,d),f="function"==typeof u?u():u;return h[1]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:f,incompleteFirstPass:!1}}function dC(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?hC(n,e,i,s):r.hasOwnProperty(i)&&hC(n,e,r[i],s)}return n}function hC(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function fn(t,e,n,r,i,s,o,a){const c=ln(e,n);let l,u=e.inputs;!a&&null!=u&&(l=u[r])?(Ng(t,n,l,r,i),Ua(e)&&fC(n,e.index)):3&e.type&&(r=function n2(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}function fC(t,e){const n=dn(e,t);16&n[2]||(n[2]|=32)}function Tg(t,e,n,r){let i=!1;if(ob()){const s=null===r?null:{"":-1},o=function c2(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(GD(e,o.selectors,!1))if(r||(r=[]),Nn(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),Mg(t,e,a.length)}else r.unshift(o),Mg(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let a,c;null===o?a=c=null:[a,c]=o,null!==a&&(i=!0,pC(t,e,n,a,s,c)),s&&function u2(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new P(-301,!1);r.push(e[i],s)}}}(n,r,s)}return n.mergedAttrs=ja(n.mergedAttrs,n.attrs),i}function pC(t,e,n,r,i,s){for(let u=0;u<r.length;u++)Ap(Pl(n,e),t,r[u].type);!function d2(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let u=0;u<r.length;u++){const l=r[u];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,c=nc(t,e,r.length,null);for(let u=0;u<r.length;u++){const l=r[u];n.mergedAttrs=ja(n.mergedAttrs,l.hostAttrs),h2(t,n,e,c,l),l2(c,l,i),null!==l.contentQueries&&(n.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(n.flags|=64);const d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),c++}!function t2(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let c=null,u=null;for(let l=e.directiveStart;l<i;l++){const d=s[l],h=n?n.get(d):null,p=h?h.outputs:null;c=dC(d.inputs,l,c,h?h.inputs:null),u=dC(d.outputs,l,u,p);const g=null===c||null===o||zD(e)?null:g2(c,l,o);a.push(g)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}(t,n,s)}function gC(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function ek(){return ee.lFrame.currentDirectiveIndex}();try{qi(s);for(let a=r;a<i;a++){const c=t.data[a],u=e[a];vp(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&a2(c,u)}}finally{qi(-1),vp(o)}}function a2(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Mg(t,e,n){e.componentOffset=n,(t.components||(t.components=[])).push(e.index)}function l2(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Nn(e)&&(n[""]=t)}}function h2(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=$i(i.type)),o=new Va(s,Nn(i),$);t.blueprint[r]=o,n[r]=o,function i2(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function s2(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,nc(t,n,i.hostVars,te),i)}function Xn(t,e,n,r,i,s){const o=ln(t,e);!function Ag(t,e,n,r,i,s,o){if(null==s)t.removeAttribute(e,i,n);else{const a=null==o?J(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}(e[11],o,s,t.value,n,r,i)}function p2(t,e,n,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let c=0;c<o.length;){const u=o[c++],l=o[c++],d=o[c++];null!==a?r.setInput(n,d,u,l):n[l]=d}}}function g2(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function mC(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null]}function _2(t,e){const n=dn(e,t);if(Il(n)){const r=n[1];48&n[2]?Xl(r,n,r.template,n[8]):n[5]>0&&Og(n)}}function Og(t){for(let r=zp(t);null!==r;r=Gp(r))for(let i=10;i<r.length;i++){const s=r[i];if(Il(s))if(512&s[2]){const o=s[1];Xl(o,s,o.template,s[8])}else s[5]>0&&Og(s)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=dn(n[r],t);Il(i)&&i[5]>0&&Og(i)}}function v2(t,e){const n=dn(e,t),r=n[1];(function w2(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),Cg(r,n,n[8])}function Jl(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Pg(t){for(;t;){t[2]|=32;const e=Ya(t);if(PN(t)&&!e)return t;t=e}return null}function ed(t,e,n,r=!0){const i=e[10];i.begin&&i.begin();try{Xl(t,e,t.template,n)}catch(o){throw r&&wC(e,o),o}finally{i.end&&i.end()}}function Rg(t,e,n){bp(0),e(t,n)}function yC(t){return t[7]||(t[7]=[])}function _C(t){return t.cleanup||(t.cleanup=[])}function wC(t,e){const n=t[9],r=n?n.get(ho,null):null;r&&r.handleError(e)}function Ng(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],c=e[o],u=t.data[o];null!==u.setInput?u.setInput(c,i,r,a):c[a]=i}}function td(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=np(i,a):2==s&&(r=np(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function nd(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(vt(s)),Rn(s))for(let a=10;a<s.length;a++){const c=s[a],u=c[1].firstChild;null!==u&&nd(c[1],c,u,r)}const o=n.type;if(8&o)nd(t,e,n.child,r);else if(32&o){const a=qp(n,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=fD(e,n);if(Array.isArray(a))r.push(...a);else{const c=Ya(e[16]);nd(c[1],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}class rc{get rootNodes(){const e=this._lView,n=e[1];return nd(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Rn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Qp(e,r),kl(n,r))}this._attachedToViewContainer=!1}iD(this._lView[1],this._lView)}onDestroy(e){!function lC(t,e,n,r){const i=yC(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&_C(t).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){Pg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){ed(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new P(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function uF(t,e){Za(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new P(902,!1);this._appRef=e}}class b2 extends rc{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;ed(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class bC extends tc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=we(e);return new ic(n,this.ngModule)}}function DC(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class C2{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=yl(r);const i=this.injector.get(e,gg,r);return i!==gg||n===gg?i:this.parentInjector.get(e,n,r)}}class ic extends BD{get inputs(){return DC(this.componentDef.inputs)}get outputs(){return DC(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function ML(t){return t.map(TL).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof xr?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new C2(e,s):e,a=o.get(jD,null);if(null===a)throw new P(407,!1);const c=o.get(cL,null),u=a.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",d=r?function JL(t,e,n){return t.selectRootElement(e,n===Wn.ShadowDom)}(u,r,this.componentDef.encapsulation):Kp(u,l,function D2(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(l)),h=this.componentDef.onPush?288:272,f=Sg(0,null,null,1,0,null,null,null,null,null),p=Zl(null,f,null,h,null,null,a,u,c,o,null);let g,m;Dp(p);try{const C=this.componentDef;let x,y=null;C.findHostDirectiveDefs?(x=[],y=new Map,C.findHostDirectiveDefs(C,x,y),x.push(C)):x=[C];const T=function I2(t,e){const n=t[1];return t[22]=e,go(n,22,2,"#host",null)}(p,d),L=function x2(t,e,n,r,i,s,o,a){const c=i[1];!function S2(t,e,n,r){for(const i of t)e.mergedAttrs=ja(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(td(e,e.mergedAttrs,!0),null!==n&&mD(r,n,e))}(r,t,e,o);const u=s.createRenderer(e,n),l=Zl(i,uC(n),null,n.onPush?32:16,i[t.index],t,s,u,a||null,null,null);return c.firstCreatePass&&Mg(c,t,r.length-1),Jl(i,l),i[t.index]=l}(T,d,C,x,p,a,u);m=rb(f,22),d&&function M2(t,e,n,r){if(r)xp(t,n,["ng-version",uL.full]);else{const{attrs:i,classes:s}=function AL(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!kn(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&xp(t,n,i),s&&s.length>0&&gD(t,n,s.join(" "))}}(u,C,d,r),void 0!==n&&function A2(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(m,this.ngContentSelectors,n),g=function T2(t,e,n,r,i,s){const o=wt(),a=i[1],c=ln(o,i);pC(a,i,o,n,null,r);for(let l=0;l<n.length;l++)At(zi(i,a,o.directiveStart+l,o),i);gC(a,i,o),c&&At(c,i);const u=zi(i,a,o.directiveStart+o.componentOffset,o);if(t[8]=i[8]=u,null!==s)for(const l of s)l(u,e);return Eg(a,o,t),u}(L,C,x,y,p,[O2]),Cg(f,p,null)}finally{Cp()}return new E2(this.componentType,g,lo(m,p),p,m)}}class E2 extends nL{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new b2(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const s=this._rootLView;Ng(s[1],s,i,e,n),fC(s,this._tNode.index)}}get injector(){return new to(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function O2(){const t=wt();xl(I()[1],t)}let rd=null;function Yi(){if(!rd){const t=xe.Symbol;if(t&&t.iterator)rd=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(rd=r)}}}return rd}function id(t){return!!function Fg(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Yi()in t)}function Ot(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Lg(t,e,n,r){const i=I();return Ot(i,Js(),e)&&(fe(),Xn(Le(),i,t,e,n,r)),Lg}function yo(t,e,n,r){return Ot(t,Js(),n)?e+J(n)+r:te}function oc(t,e,n,r,i,s,o,a){const c=I(),u=fe(),l=t+22,d=u.firstCreatePass?function z2(t,e,n,r,i,s,o,a,c){const u=e.consts,l=go(e,t,4,o||null,Zr(u,a));Tg(e,n,l,Zr(u,c)),xl(e,l);const d=l.tViews=Sg(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}(l,u,c,e,n,r,i,s,o):u.data[l];Qn(d,!1);const h=c[11].createComment("");Vl(u,c,h,d),At(h,c),Jl(c,c[l]=mC(h,c,h,d)),Cl(d)&&Ig(u,c,d),null!=o&&xg(c,d,a)}function er(t,e,n){const r=I();return Ot(r,Js(),e)&&fn(fe(),Le(),r,t,e,r[11],n,!1),er}function Ug(t,e,n,r,i){const o=i?"class":"style";Ng(t,n,e.inputs[o],o,r)}function b(t,e,n,r){const i=I(),s=fe(),o=22+t,a=i[11],c=i[o]=Kp(a,e,function ck(){return ee.lFrame.currentNamespace}()),u=s.firstCreatePass?function K2(t,e,n,r,i,s,o){const a=e.consts,u=go(e,t,2,i,Zr(a,s));return Tg(e,n,u,Zr(a,o)),null!==u.attrs&&td(u,u.attrs,!1),null!==u.mergedAttrs&&td(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,0,e,n,r):s.data[o];return Qn(u,!0),mD(a,c,u),32!=(32&u.flags)&&Vl(s,i,c,u),0===function qN(){return ee.lFrame.elementDepthCount}()&&At(c,i),function zN(){ee.lFrame.elementDepthCount++}(),Cl(u)&&(Ig(s,i,u),Eg(s,u,i)),null!==r&&xg(i,u),b}function D(){let t=wt();yp()?function _p(){ee.lFrame.isParent=!1}():(t=t.parent,Qn(t,!1));const e=t;!function GN(){ee.lFrame.elementDepthCount--}();const n=fe();return n.firstCreatePass&&(xl(n,t),pp(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function hk(t){return 0!=(8&t.flags)}(e)&&Ug(n,e,I(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function fk(t){return 0!=(16&t.flags)}(e)&&Ug(n,e,I(),e.stylesWithoutHost,!1),D}function N(t,e,n,r){return b(t,e,n,r),D(),N}function od(t){return!!t&&"function"==typeof t.then}const BC=function UC(t){return!!t&&"function"==typeof t.subscribe};function In(t,e,n,r){const i=I(),s=fe(),o=wt();return function jC(t,e,n,r,i,s,o){const a=Cl(r),u=t.firstCreatePass&&_C(t),l=e[8],d=yC(e);let h=!0;if(3&r.type||o){const g=ln(r,e),m=o?o(g):g,C=d.length,x=o?T=>o(vt(T[r.index])):r.index;let y=null;if(!o&&a&&(y=function Z2(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[7],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==y)(y.__ngLastListenerFn__||y).__ngNextListenerFn__=s,y.__ngLastListenerFn__=s,h=!1;else{s=HC(r,e,l,s,!1);const T=n.listen(m,i,s);d.push(s,T),u&&u.push(i,x,C,C+1)}}else s=HC(r,e,l,s,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const g=p.length;if(g)for(let m=0;m<g;m+=2){const L=e[p[m]][p[m+1]].subscribe(s),V=d.length;d.push(s,L),u&&u.push(i,r.index,V,-(V+1))}}}(s,i,i[11],o,t,e,r),In}function $C(t,e,n,r){try{return!1!==n(r)}catch(i){return wC(t,i),!1}}function HC(t,e,n,r,i){return function s(o){if(o===Function)return r;Pg(t.componentOffset>-1?dn(t.index,e):e);let c=$C(e,0,r,o),u=s.__ngNextListenerFn__;for(;u;)c=$C(e,0,u,o)&&c,u=u.__ngNextListenerFn__;return i&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function Xi(t,e,n){return ad(t,"",e,"",n),Xi}function ad(t,e,n,r,i){const s=I(),o=yo(s,e,n,r);return o!==te&&fn(fe(),Le(),s,t,o,s[11],i,!1),ad}function cd(t,e){return t<<17|e<<2}function ti(t){return t>>17&32767}function jg(t){return 2|t}function Ji(t){return(131068&t)>>2}function $g(t,e){return-131069&t|e<<2}function Hg(t){return 1|t}function XC(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?ti(s):Ji(s),c=!1;for(;0!==a&&(!1===c||o);){const l=t[a+1];aU(t[a],e)&&(c=!0,t[a+1]=r?Hg(l):jg(l)),a=r?ti(l):Ji(l)}c&&(t[n+1]=r?jg(s):Hg(s))}function aU(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&oo(t,e)>=0}function ac(t,e,n){return function Fn(t,e,n,r){const i=I(),s=fe(),o=function Er(t){const e=ee.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);s.firstUpdatePass&&function aE(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[jt()],o=function oE(t,e){return e>=t.expandoStartIndex}(t,n);(function dE(t,e){return 0!=(t.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function mU(t,e,n,r){const i=function wp(t){const e=ee.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=cc(n=qg(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=qg(i,t,e,n,r),null===s){let c=function yU(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Ji(r))return t[ti(r)]}(t,e,r);void 0!==c&&Array.isArray(c)&&(c=qg(null,t,e,c[1],r),c=cc(c,e.attrs,r),function _U(t,e,n,r){t[ti(n?e.classBindings:e.styleBindings)]=r}(t,e,r,c))}else s=function vU(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=cc(r,t[s].hostAttrs,n);return cc(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function sU(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ti(o),c=Ji(o);t[r]=n;let l,u=!1;if(Array.isArray(n)?(l=n[1],(null===l||oo(n,l)>0)&&(u=!0)):l=n,i)if(0!==c){const h=ti(t[a+1]);t[r+1]=cd(h,a),0!==h&&(t[h+1]=$g(t[h+1],r)),t[a+1]=function rU(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=cd(a,0),0!==a&&(t[a+1]=$g(t[a+1],r)),a=r;else t[r+1]=cd(c,0),0===a?a=r:t[c+1]=$g(t[c+1],r),c=r;u&&(t[r+1]=jg(t[r+1])),XC(t,l,r,!0),XC(t,l,r,!1),function oU(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&oo(s,e)>=0&&(n[r+1]=Hg(n[r+1]))}(e,l,t,r,s),o=cd(a,c),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==te&&Ot(i,o,e)&&function uE(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const c=t.data,u=c[a+1],l=function iU(t){return 1==(1&t)}(u)?lE(c,e,n,i,Ji(u),o):void 0;ud(l)||(ud(s)||function nU(t){return 2==(2&t)}(u)&&(s=lE(c,null,n,i,a,o)),function vF(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:Jt.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Jt.Important),t.setStyle(n,r,i,s))}}(r,o,El(jt(),n),i,s))}(s,s.data[jt()],i,i[11],t,i[o+1]=function DU(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Ie(Xr(t)))),t}(e,n),r,o)}(t,e,n,!1),ac}function qg(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=cc(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function cc(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),hn(t,o,!!n||e[++s]))}return void 0===t?null:t}function lE(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const c=t[i],u=Array.isArray(c),l=u?c[1]:c,d=null===l;let h=n[i+1];h===te&&(h=d?ye:void 0);let f=d?Np(h,r):l===r?h:void 0;if(u&&!ud(f)&&(f=Np(c,r)),ud(f)&&(a=f,o))return a;const p=t[i+1];i=o?ti(p):Ji(p)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=Np(c,r))}return a}function ud(t){return void 0!==t}function M(t,e=""){const n=I(),r=fe(),i=t+22,s=r.firstCreatePass?go(r,i,1,e,null):r.data[i],o=n[i]=function Wp(t,e){return t.createText(e)}(n[11],e);Vl(r,n,o,s),Qn(s,!1)}function xo(t){return zg("",t,""),xo}function zg(t,e,n){const r=I(),i=yo(r,t,e,n);return i!==te&&function Tr(t,e,n){const r=El(e,t);!function nD(t,e,n){t.setValue(e,n)}(t[11],r,n)}(r,jt(),i),zg}const To="en-US";let RE=To;class Mo{}class sI{}class oI extends Mo{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new bC(this);const r=cn(e);this._bootstrapComponents=Sr(r.bootstrap),this._r3Injector=JD(e,n,[{provide:Mo,useValue:this},{provide:tc,useValue:this.componentFactoryResolver}],Ie(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Xg extends sI{constructor(e){super(),this.moduleType=e}create(e){return new oI(this.moduleType,e)}}class HB extends Mo{constructor(e,n,r){super(),this.componentFactoryResolver=new bC(this),this.instance=null;const i=new LD([...e,{provide:Mo,useValue:this},{provide:tc,useValue:this.componentFactoryResolver}],n||Wl(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function pd(t,e,n=null){return new HB(t,e,n).injector}let qB=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const r=RD(0,n.type),i=r.length>0?pd([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,i)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=K({token:t,providedIn:"environment",factory:()=>new t(H(xr))}),t})();function aI(t){t.getStandaloneInjector=e=>e.get(qB).getOrCreateStandaloneInjector(t)}function em(t){return e=>{setTimeout(t,void 0,e)}}const Ht=class mV extends _r{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=em(s),i&&(i=em(i)),o&&(o=em(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof vn&&e.add(a),a}};let Mr=(()=>{class t{}return t.__NG_ELEMENT_ID__=wV,t})();const _V=Mr,vV=class extends _V{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e,n){const r=this._declarationTContainer.tViews,i=Zl(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,n||null);i[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(i[19]=o.createEmbeddedView(r)),Cg(r,i,e),new rc(i)}};function wV(){return function gd(t,e){return 4&t.type?new vV(e,t,lo(t,e)):null}(wt(),I())}let Un=(()=>{class t{}return t.__NG_ELEMENT_ID__=bV,t})();function bV(){return function bI(t,e){let n;const r=e[t.index];if(Rn(r))n=r;else{let i;if(8&t.type)i=vt(r);else{const s=e[11];i=s.createComment("");const o=ln(t,e);Wi(s,Bl(s,o),i,function mF(t,e){return t.nextSibling(e)}(s,o),!1)}e[t.index]=n=mC(r,e,i,t),Jl(e,n)}return new vI(n,t,e)}(wt(),I())}const DV=Un,vI=class extends DV{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return lo(this._hostTNode,this._hostLView)}get injector(){return new to(this._hostTNode,this._hostLView)}get parentInjector(){const e=Mp(this._hostTNode,this._hostLView);if(bb(e)){const n=Al(e,this._hostLView),r=Ml(e);return new to(n[1].data[r+8],n)}return new to(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=wI(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=e.createEmbeddedView(n||{},s);return this.insert(o,i),o}createComponent(e,n,r,i,s){const o=e&&!function Ha(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const d=n||{};a=d.index,r=d.injector,i=d.projectableNodes,s=d.environmentInjector||d.ngModuleRef}const c=o?e:new ic(we(e)),u=r||this.parentInjector;if(!s&&null==c.ngModule){const h=(o?u:this.parentInjector).get(xr,null);h&&(s=h)}const l=c.create(u,i,void 0,s);return this.insert(l.hostView,a),l}insert(e,n){const r=e._lView,i=r[1];if(function HN(t){return Rn(t[3])}(r)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const d=r[3],h=new vI(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(n),o=this._lContainer;!function dF(t,e,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-10?(e[4]=n[i],Nb(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function hF(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=64}(i,r,o,s);const a=Xp(s,o),c=r[11],u=Bl(c,o[7]);return null!==u&&function cF(t,e,n,r,i,s){r[0]=i,r[6]=e,Za(t,r,n,1,i,s)}(i,o[6],c,r,u,a),e.attachToViewContainerRef(),Nb(nm(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=wI(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Qp(this._lContainer,n);r&&(kl(nm(this._lContainer),n),iD(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=Qp(this._lContainer,n);return r&&null!=kl(nm(this._lContainer),n)?new rc(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function wI(t){return t[8]}function nm(t){return t[8]||(t[8]=[])}function yd(...t){}const _d=new Y("Application Initializer");let vd=(()=>{class t{constructor(n){this.appInits=n,this.resolve=yd,this.reject=yd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(od(s))n.push(s);else if(BC(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});n.push(o)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(H(_d,8))},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const yc=new Y("AppId",{providedIn:"root",factory:function KI(){return`${hm()}${hm()}${hm()}`}});function hm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const QI=new Y("Platform Initializer"),YI=new Y("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ZI=new Y("appBootstrapListener");let YV=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const Ar=new Y("LocaleId",{providedIn:"root",factory:()=>he(Ar,W.Optional|W.SkipSelf)||function ZV(){return typeof $localize<"u"&&$localize.locale||To}()});class JV{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let XI=(()=>{class t{compileModuleSync(n){return new Xg(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=Sr(cn(n).declarations).reduce((o,a)=>{const c=we(a);return c&&o.push(new ic(c)),o},[]);return new JV(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const nj=(()=>Promise.resolve(0))();function fm(t){typeof Zone>"u"?nj.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class et{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ht(!1),this.onMicrotaskEmpty=new Ht(!1),this.onStable=new Ht(!1),this.onError=new Ht(!1),typeof Zone>"u")throw new P(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function rj(){let t=xe.requestAnimationFrame,e=xe.cancelAnimationFrame;if(typeof Zone<"u"&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function oj(t){const e=()=>{!function sj(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(xe,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,gm(t),t.isCheckStableRunning=!0,pm(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),gm(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return tx(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),nx(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return tx(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),nx(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,gm(t),pm(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!et.isInAngularZone())throw new P(909,!1)}static assertNotInAngularZone(){if(et.isInAngularZone())throw new P(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,ij,yd,yd);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const ij={};function pm(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function gm(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function tx(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function nx(t){t._nesting--,pm(t)}class aj{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ht,this.onMicrotaskEmpty=new Ht,this.onStable=new Ht,this.onError=new Ht}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const rx=new Y(""),wd=new Y("");let _m,mm=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,_m||(function cj(t){_m=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{et.assertNotInAngularZone(),fm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())fm(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(H(et),H(ym),H(wd))},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})(),ym=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return _m?.findTestabilityInTree(this,n,r)??null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),ni=null;const ix=new Y("AllowMultipleToken"),vm=new Y("PlatformDestroyListeners");class sx{constructor(e,n){this.name=e,this.token=n}}function ax(t,e,n=[]){const r=`Platform: ${e}`,i=new Y(r);return(s=[])=>{let o=wm();if(!o||o.injector.get(ix,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function dj(t){if(ni&&!ni.get(ix,!1))throw new P(400,!1);ni=t;const e=t.get(ux);(function ox(t){const e=t.get(QI,null);e&&e.forEach(n=>n())})(t)}(function cx(t=[],e){return Zn.create({name:e,providers:[{provide:dg,useValue:"platform"},{provide:vm,useValue:new Set([()=>ni=null])},...t]})}(a,r))}return function fj(t){const e=wm();if(!e)throw new P(401,!1);return e}()}}function wm(){return ni?.get(ux)??null}let ux=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function dx(t,e){let n;return n="noop"===t?new aj:("zone.js"===t?void 0:t)||new et(e),n}(r?.ngZone,function lx(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:et,useValue:i}];return i.run(()=>{const o=Zn.create({providers:s,parent:this.injector,name:n.moduleType.name}),a=n.create(o),c=a.injector.get(ho,null);if(!c)throw new P(402,!1);return i.runOutsideAngular(()=>{const u=i.onError.subscribe({next:l=>{c.handleError(l)}});a.onDestroy(()=>{Dd(this._modules,a),u.unsubscribe()})}),function hx(t,e,n){try{const r=n();return od(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(c,i,()=>{const u=a.injector.get(vd);return u.runInitializers(),u.donePromise.then(()=>(function NE(t){wn(t,"Expected localeId to be defined"),"string"==typeof t&&(RE=t.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Ar,To)||To),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,r=[]){const i=fx({},r);return function uj(t,e,n){const r=new Xg(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(bd);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new P(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new P(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(vm,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(H(Zn))},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function fx(t,e){return Array.isArray(e)?e.reduce(fx,t):{...t,...e}}let bd=(()=>{class t{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(n,r,i){this._zone=n,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new st(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new st(a=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{et.assertNotInAngularZone(),fm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const u=this._zone.onUnstable.subscribe(()=>{et.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{c.unsubscribe(),u.unsubscribe()}});this.isStable=function uN(...t){const e=Aa(t),n=function nN(t,e){return"number"==typeof Jf(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?An(r[0]):zs(n)(ot(r,e)):Gn}(s,o.pipe(function lN(t={}){const{connector:e=(()=>new _r),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,c,u=0,l=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=c=void 0,l=d=!1},p=()=>{const g=o;f(),g?.unsubscribe()};return ht((g,m)=>{u++,!d&&!l&&h();const C=c=c??e();m.add(()=>{u--,0===u&&!d&&!l&&(a=ep(p,i))}),C.subscribe(m),!o&&u>0&&(o=new Ma({next:x=>C.next(x),error:x=>{d=!0,h(),a=ep(f,n,x),C.error(x)},complete:()=>{l=!0,h(),a=ep(f,r),C.complete()}}),An(g).subscribe(o))})(s)}}()))}bootstrap(n,r){const i=n instanceof BD;if(!this._injector.get(vd).done)throw!i&&function Ws(t){const e=we(t)||St(t)||Ut(t);return null!==e&&e.standalone}(n),new P(405,false);let o;o=i?n:this._injector.get(tc).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function lj(t){return t.isBoundToModule}(o)?void 0:this._injector.get(Mo),u=o.create(Zn.NULL,[],r||o.selector,a),l=u.location.nativeElement,d=u.injector.get(rx,null);return d?.registerApplication(l),u.onDestroy(()=>{this.detachView(u.hostView),Dd(this.components,u),d?.unregisterApplication(l)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new P(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Dd(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(ZI,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Dd(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new P(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(n){return new(n||t)(H(et),H(xr),H(ho))},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Dd(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let bm=(()=>{class t{}return t.__NG_ELEMENT_ID__=gj,t})();function gj(t){return function mj(t,e,n){if(Ua(t)&&!n){const r=dn(t.index,e);return new rc(r,r)}return 47&t.type?new rc(e[16],e):null}(wt(),I(),16==(16&t))}class _x{constructor(){}supports(e){return id(e)}create(e){return new Dj(e)}}const bj=(t,e)=>e;class Dj{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||bj}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<wx(r,i,s)?n:r,a=wx(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;l<=p&&p<u&&(s[h]=f+1)}s[o.previousIndex]=l-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!id(e))throw new P(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function $2(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Yi()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Cj(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new vx),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vx),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Cj{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ej{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class vx{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new Ej,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function wx(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Dx(){return new Id([new _x])}let Id=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Dx()),deps:[[t,new Ga,new za]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new P(901,!1)}}return t.\u0275prov=K({token:t,providedIn:"root",factory:Dx}),t})();const Mj=ax(null,"core",[]);let Aj=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(H(bd))},t.\u0275mod=Vi({type:t}),t.\u0275inj=Qr({}),t})();function xm(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let Sm=null;function ri(){return Sm}class Rj{}const tn=new Y("DocumentToken");let Tm=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:function(){return function Nj(){return H(Ex)}()},providedIn:"platform"}),t})();const kj=new Y("Location Initialized");let Ex=(()=>{class t extends Tm{constructor(n){super(),this._doc=n,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ri().getBaseHref(this._doc)}onPopState(n){const r=ri().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=ri().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){Ix()?this._history.pushState(n,r,i):this._location.hash=i}replaceState(n,r,i){Ix()?this._history.replaceState(n,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)(H(tn))},t.\u0275prov=K({token:t,factory:function(){return function Fj(){return new Ex(H(tn))}()},providedIn:"platform"}),t})();function Ix(){return!!window.history.pushState}function Mm(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function xx(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Pr(t){return t&&"?"!==t[0]?"?"+t:t}let ns=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:function(){return he(Tx)},providedIn:"root"}),t})();const Sx=new Y("appBaseHref");let Tx=(()=>{class t extends ns{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??he(tn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Mm(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Pr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+Pr(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+Pr(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(H(Tm),H(Sx,8))},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Lj=(()=>{class t extends ns{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Mm(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Pr(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Pr(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(H(Tm),H(Sx,8))},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})(),Am=(()=>{class t{constructor(n){this._subject=new Ht,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function Vj(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(xx(Mx(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Pr(r))}normalize(n){return t.stripTrailingSlash(function Bj(t,e){return t&&new RegExp(`^${t}([/;?#]|$)`).test(e)?e.substring(t.length):e}(this._basePath,Mx(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Pr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Pr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return t.normalizeQueryParams=Pr,t.joinWithSlash=Mm,t.stripTrailingSlash=xx,t.\u0275fac=function(n){return new(n||t)(H(ns))},t.\u0275prov=K({token:t,factory:function(){return function Uj(){return new Am(H(ns))}()},providedIn:"root"}),t})();function Mx(t){return t.replace(/\/index.html$/,"")}class x${constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bc=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new x$(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),jx(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{jx(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)($(Un),$(Mr),$(Id))},t.\u0275dir=Lt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function jx(t,e){t.context.$implicit=e.item}let e3=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Vi({type:t}),t.\u0275inj=Qr({}),t})();let i3=(()=>{class t{}return t.\u0275prov=K({token:t,providedIn:"root",factory:()=>new s3(H(tn),window)}),t})();class s3{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function o3(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Gx(this.window.history)||Gx(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Gx(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class N3 extends Rj{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Km extends N3{static makeCurrent(){!function Pj(t){Sm||(Sm=t)}(new Km)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function k3(){return Cc=Cc||document.querySelector("base"),Cc?Cc.getAttribute("href"):null}();return null==n?null:function F3(t){Fd=Fd||document.createElement("a"),Fd.setAttribute("href",t);const e=Fd.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Cc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function C$(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Fd,Cc=null;const Zx=new Y("TRANSITION_ID"),U3=[{provide:_d,useFactory:function L3(t,e,n){return()=>{n.get(vd).donePromise.then(()=>{const r=ri(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Zx,tn,Zn],multi:!0}];let V3=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})();const Ld=new Y("EventManagerPlugins");let Ud=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(n))return this._eventNameToPlugin.set(n,o),o}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(H(Ld),H(et))},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})();class Xx{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const i=ri().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let Jx=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})(),Ec=(()=>{class t extends Jx{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(eS),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(eS))}}return t.\u0275fac=function(n){return new(n||t)(H(tn))},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})();function eS(t){ri().remove(t)}const Qm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ym=/%COMP%/g;function Zm(t,e){return e.flat(100).map(n=>n.replace(Ym,t))}function rS(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Xm=(()=>{class t{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Jm(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case Wn.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new G3(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case Wn.ShadowDom:return new W3(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=Zm(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(H(Ud),H(Ec),H(yc))},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})();class Jm{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?document.createElementNS(Qm[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){(sS(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(sS(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=Qm[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Qm[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Jt.DashCase|Jt.Important)?e.style.setProperty(n,r,i&Jt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Jt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,rS(r)):this.eventManager.addEventListener(e,n,rS(r))}}function sS(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class G3 extends Jm{constructor(e,n,r,i){super(e),this.component=r;const s=Zm(i+"-"+r.id,r.styles);n.addStyles(s),this.contentAttr=function H3(t){return"_ngcontent-%COMP%".replace(Ym,t)}(i+"-"+r.id),this.hostAttr=function q3(t){return"_nghost-%COMP%".replace(Ym,t)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class W3 extends Jm{constructor(e,n,r,i){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Zm(i.id,i.styles);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let K3=(()=>{class t extends Xx{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(H(tn))},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})();const oS=["alt","control","meta","shift"],Q3={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Y3={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Z3=(()=>{class t extends Xx{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ri().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),oS.forEach(u=>{const l=r.indexOf(u);l>-1&&(r.splice(l,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(n,r){let i=Q3[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),oS.forEach(o=>{o!==i&&(0,Y3[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(H(tn))},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})();const cS=[{provide:YI,useValue:"browser"},{provide:QI,useValue:function X3(){Km.makeCurrent()},multi:!0},{provide:tn,useFactory:function eH(){return function EF(t){ng=t}(document),document},deps:[]}],tH=ax(Mj,"browser",cS),uS=new Y(""),lS=[{provide:wd,useClass:class B3{addToWindow(e){xe.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},xe.getAllAngularTestabilities=()=>e.getAllTestabilities(),xe.getAllAngularRootElements=()=>e.getAllRootElements(),xe.frameworkStabilizers||(xe.frameworkStabilizers=[]),xe.frameworkStabilizers.push(r=>{const i=xe.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?ri().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:rx,useClass:mm,deps:[et,ym,wd]},{provide:mm,useClass:mm,deps:[et,ym,wd]}],dS=[{provide:dg,useValue:"root"},{provide:ho,useFactory:function J3(){return new ho},deps:[]},{provide:Ld,useClass:K3,multi:!0,deps:[tn,et,YI]},{provide:Ld,useClass:Z3,multi:!0,deps:[tn]},{provide:Xm,useClass:Xm,deps:[Ud,Ec,yc]},{provide:jD,useExisting:Xm},{provide:Jx,useExisting:Ec},{provide:Ec,useClass:Ec,deps:[tn]},{provide:Ud,useClass:Ud,deps:[Ld,et]},{provide:class a3{},useClass:V3,deps:[]},[]];let nH=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:yc,useValue:n.appId},{provide:Zx,useExisting:yc},U3]}}}return t.\u0275fac=function(n){return new(n||t)(H(uS,12))},t.\u0275mod=Vi({type:t}),t.\u0275inj=Qr({providers:[...dS,...lS],imports:[e3,Aj]}),t})(),hS=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return t.\u0275fac=function(n){return new(n||t)(H(tn))},t.\u0275prov=K({token:t,factory:function(n){let r=null;return r=n?new n:function iH(){return new hS(H(tn))}(),r},providedIn:"root"}),t})();function z(...t){return ot(t,Aa(t))}typeof window<"u"&&window;class $n extends _r{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Bd=qf(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:hH}=Array,{getPrototypeOf:fH,prototype:pH,keys:gH}=Object;const{isArray:_H}=Array;function gS(...t){const e=Aa(t),n=function tN(t){return Fe(Jf(t))?t.pop():void 0}(t),{args:r,keys:i}=function mH(t){if(1===t.length){const e=t[0];if(hH(e))return{args:e,keys:null};if(function yH(t){return t&&"object"==typeof t&&fH(t)===pH}(e)){const n=gH(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t);if(0===r.length)return ot([],e);const s=new st(function DH(t,e,n=Ui){return r=>{mS(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let c=0;c<i;c++)mS(e,()=>{const u=ot(t[c],e);let l=!1;u.subscribe(ft(r,d=>{s[c]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>function bH(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}(i,o):Ui));return n?s.pipe(function wH(t){return de(e=>function vH(t,e){return _H(e)?t(...e):t(e)}(t,e))}(n)):s}function mS(t,e,n){t?vr(n,t,e):e()}function ny(...t){return function CH(){return zs(1)}()(ot(t,Aa(t)))}function yS(t){return new st(e=>{An(t()).subscribe(e)})}function Ic(t,e){const n=Fe(t)?t:()=>t,r=i=>i.error(n());return new st(e?i=>e.schedule(r,0,i):r)}function ry(){return ht((t,e)=>{let n=null;t._refCount++;const r=ft(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class _S extends st{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,v0(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new vn;const n=this.getSubject();e.add(this.source.subscribe(ft(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=vn.EMPTY)}return e}refCount(){return ry()(this)}}function rr(t,e){return ht((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(ft(r,c=>{i?.unsubscribe();let u=0;const l=s++;An(t(c,l)).subscribe(i=ft(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function xc(t){return t<=0?()=>Gn:ht((e,n)=>{let r=0;e.subscribe(ft(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function si(t,e){return ht((n,r)=>{let i=0;n.subscribe(ft(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Vd(t){return ht((e,n)=>{let r=!1;e.subscribe(ft(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function vS(t=IH){return ht((e,n)=>{let r=!1;e.subscribe(ft(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function IH(){return new Bd}function oi(t,e){const n=arguments.length>=2;return r=>r.pipe(t?si((i,s)=>t(i,s,r)):Ui,xc(1),n?Vd(e):vS(()=>new Bd))}function rs(t,e){return Fe(e)?_t(t,e,1):_t(t,1)}function Pt(t,e,n){const r=Fe(t)||e||n?{next:t,error:e,complete:n}:t;return r?ht((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(ft(s,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),s.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):Ui}function ai(t){return ht((e,n)=>{let s,r=null,i=!1;r=e.subscribe(ft(n,void 0,void 0,o=>{s=An(t(o,ai(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function xH(t,e,n,r,i){return(s,o)=>{let a=n,c=e,u=0;s.subscribe(ft(o,l=>{const d=u++;c=a?t(c,l,d):(a=!0,l),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function wS(t,e){return ht(xH(t,e,arguments.length>=2,!0))}function iy(t){return t<=0?()=>Gn:ht((e,n)=>{let r=[];e.subscribe(ft(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function bS(t,e){const n=arguments.length>=2;return r=>r.pipe(t?si((i,s)=>t(i,s,r)):Ui,iy(1),n?Vd(e):vS(()=>new Bd))}function sy(t){return ht((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const ne="primary",Sc=Symbol("RouteTitle");class MH{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Po(t){return new MH(t)}function AH(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ir(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!DS(t[i],e[i]))return!1;return!0}function DS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function CS(t){return Array.prototype.concat.apply([],t)}function ES(t){return t.length>0?t[t.length-1]:null}function bt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function ci(t){return BC(t)?t:od(t)?ot(Promise.resolve(t)):z(t)}const jd=!1,PH={exact:function SS(t,e,n){if(!ss(t.segments,e.segments)||!$d(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!SS(t.children[r],e.children[r],n))return!1;return!0},subset:TS},IS={exact:function RH(t,e){return ir(t,e)},subset:function NH(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>DS(t[n],e[n]))},ignored:()=>!0};function xS(t,e,n){return PH[n.paths](t.root,e.root,n.matrixParams)&&IS[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function TS(t,e,n){return MS(t,e,e.segments,n)}function MS(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!ss(i,n)||e.hasChildren()||!$d(i,n,r))}if(t.segments.length===n.length){if(!ss(t.segments,n)||!$d(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!TS(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(ss(t.segments,i)&&$d(t.segments,i,r)&&t.children[ne])&&MS(t.children[ne],e,s,r)}}function $d(t,e,n){return e.every((r,i)=>IS[n](t[i].parameters,r.parameters))}class is{constructor(e=new ae([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Po(this.queryParams)),this._queryParamMap}toString(){return LH.serialize(this)}}class ae{constructor(e,n){this.segments=e,this.children=n,this.parent=null,bt(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hd(this)}}class Tc{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Po(this.parameters)),this._parameterMap}toString(){return PS(this)}}function ss(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Mc=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:function(){return new oy},providedIn:"root"}),t})();class oy{parse(e){const n=new GH(e);return new is(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Ac(e.root,!0)}`,r=function VH(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${qd(n)}=${qd(i)}`).join("&"):`${qd(n)}=${qd(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function UH(t){return encodeURI(t)}(e.fragment)}`:""}`}}const LH=new oy;function Hd(t){return t.segments.map(e=>PS(e)).join("/")}function Ac(t,e){if(!t.hasChildren())return Hd(t);if(e){const n=t.children[ne]?Ac(t.children[ne],!1):"",r=[];return bt(t.children,(i,s)=>{s!==ne&&r.push(`${s}:${Ac(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function FH(t,e){let n=[];return bt(t.children,(r,i)=>{i===ne&&(n=n.concat(e(r,i)))}),bt(t.children,(r,i)=>{i!==ne&&(n=n.concat(e(r,i)))}),n}(t,(r,i)=>i===ne?[Ac(t.children[ne],!1)]:[`${i}:${Ac(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[ne]?`${Hd(t)}/${n[0]}`:`${Hd(t)}/(${n.join("//")})`}}function AS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qd(t){return AS(t).replace(/%3B/gi,";")}function ay(t){return AS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zd(t){return decodeURIComponent(t)}function OS(t){return zd(t.replace(/\+/g,"%20"))}function PS(t){return`${ay(t.path)}${function BH(t){return Object.keys(t).map(e=>`;${ay(e)}=${ay(t[e])}`).join("")}(t.parameters)}`}const jH=/^[^\/()?;=#]+/;function Gd(t){const e=t.match(jH);return e?e[0]:""}const $H=/^[^=?&#]+/,qH=/^[^&#]+/;class GH{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ae([],{}):new ae([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ne]=new ae(e,n)),r}parseSegment(){const e=Gd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new P(4009,jd);return this.capture(e),new Tc(zd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=Gd(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=Gd(this.remaining);i&&(r=i,this.capture(r))}e[zd(n)]=zd(r)}parseQueryParam(e){const n=function HH(t){const e=t.match($H);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function zH(t){const e=t.match(qH);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=OS(n),s=OS(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Gd(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new P(4010,jd);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ne);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[ne]:new ae([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new P(4011,jd)}}function cy(t){return t.segments.length>0?new ae([],{[ne]:t}):t}function Wd(t){const e={};for(const r of Object.keys(t.children)){const s=Wd(t.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function WH(t){if(1===t.numberOfChildren&&t.children[ne]){const e=t.children[ne];return new ae(t.segments.concat(e.segments),e.children)}return t}(new ae(t.segments,e))}function os(t){return t instanceof is}function YH(t,e,n,r,i){if(0===n.length)return Ro(e.root,e.root,e.root,r,i);const s=function kS(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new NS(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return bt(s.outlets,(c,u)=>{a[u]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new NS(n,e,r)}(n);return s.toRoot()?Ro(e.root,e.root,new ae([],{}),r,i):function o(c){const u=function XH(t,e,n,r){if(t.isAbsolute)return new No(e.root,!0,0);if(-1===r)return new No(n,n===e.root,0);return function FS(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new P(4005,!1);i=r.segments.length}return new No(r,!1,i-s)}(n,r+(Oc(t.commands[0])?0:1),t.numberOfDoubleDots)}(s,e,t.snapshot?._urlSegment,c),l=u.processChildren?ko(u.segmentGroup,u.index,s.commands):ly(u.segmentGroup,u.index,s.commands);return Ro(e.root,u.segmentGroup,l,r,i)}(t.snapshot?._lastPathIndex)}function Oc(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Pc(t){return"object"==typeof t&&null!=t&&t.outlets}function Ro(t,e,n,r,i){let o,s={};r&&bt(r,(c,u)=>{s[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`}),o=t===e?n:RS(t,e,n);const a=cy(Wd(o));return new is(a,s,i)}function RS(t,e,n){const r={};return bt(t.children,(i,s)=>{r[s]=i===e?n:RS(i,e,n)}),new ae(t.segments,r)}class NS{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Oc(r[0]))throw new P(4003,!1);const i=r.find(Pc);if(i&&i!==ES(r))throw new P(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class No{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function ly(t,e,n){if(t||(t=new ae([],{})),0===t.segments.length&&t.hasChildren())return ko(t,e,n);const r=function eq(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(Pc(a))break;const c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!US(c,u,o))return s;r+=2}else{if(!US(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new ae(t.segments.slice(0,r.pathIndex),{});return s.children[ne]=new ae(t.segments.slice(r.pathIndex),t.children),ko(s,0,i)}return r.match&&0===i.length?new ae(t.segments,{}):r.match&&!t.hasChildren()?dy(t,e,n):r.match?ko(t,0,i):dy(t,e,n)}function ko(t,e,n){if(0===n.length)return new ae(t.segments,{});{const r=function JH(t){return Pc(t[0])?t[0].outlets:{[ne]:t}}(n),i={};return!r[ne]&&t.children[ne]&&1===t.numberOfChildren&&0===t.children[ne].segments.length?ko(t.children[ne],e,n):(bt(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=ly(t.children[o],e,s))}),bt(t.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new ae(t.segments,i))}}function dy(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(Pc(s)){const c=tq(s.outlets);return new ae(r,c)}if(0===i&&Oc(n[0])){r.push(new Tc(t.segments[e].path,LS(n[0]))),i++;continue}const o=Pc(s)?s.outlets[ne]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Oc(a)?(r.push(new Tc(o,LS(a))),i+=2):(r.push(new Tc(o,{})),i++)}return new ae(r,{})}function tq(t){const e={};return bt(t,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(e[r]=dy(new ae([],{}),0,n))}),e}function LS(t){const e={};return bt(t,(n,r)=>e[r]=`${n}`),e}function US(t,e,n){return t==n.path&&ir(e,n.parameters)}const Rc="imperative";class sr{constructor(e,n){this.id=e,this.url=n}}class hy extends sr{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class as extends sr{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Kd extends sr{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class BS extends sr{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class VS extends sr{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nq extends sr{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rq extends sr{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iq extends sr{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class sq extends sr{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oq extends sr{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aq{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cq{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class uq{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lq{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dq{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hq{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jS{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let pq=(()=>{class t{createUrlTree(n,r,i,s,o,a){return YH(n||r.root,i,s,o,a)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})(),gq=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:function(e){return pq.\u0275fac(e)},providedIn:"root"}),t})();class $S{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=fy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=fy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=py(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return py(e,this._root).map(n=>n.value)}}function fy(t,e){if(t===e.value)return e;for(const n of e.children){const r=fy(t,n);if(r)return r}return null}function py(t,e){if(t===e.value)return[e];for(const n of e.children){const r=py(t,n);if(r.length)return r.unshift(e),r}return[]}class Nr{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Fo(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class HS extends $S{constructor(e,n){super(e),this.snapshot=n,gy(this,e)}toString(){return this.snapshot.toString()}}function qS(t,e){const n=function mq(t,e){const o=new Qd([],{},{},"",{},ne,e,null,t.root,-1,{});return new GS("",new Nr(o,[]))}(t,e),r=new $n([new Tc("",{})]),i=new $n({}),s=new $n({}),o=new $n({}),a=new $n(""),c=new Lo(r,i,o,a,s,ne,e,n.root);return c.snapshot=n.root,new HS(new Nr(c,[]),n)}class Lo{constructor(e,n,r,i,s,o,a,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(de(u=>u[Sc]))??z(void 0),this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(de(e=>Po(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(de(e=>Po(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zS(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function yq(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Qd{get title(){return this.data?.[Sc]}constructor(e,n,r,i,s,o,a,c,u,l,d){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._urlSegment=u,this._lastPathIndex=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Po(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Po(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class GS extends $S{constructor(e,n){super(n),this.url=e,gy(this,n)}toString(){return WS(this._root)}}function gy(t,e){e.value._routerState=t,e.children.forEach(n=>gy(t,n))}function WS(t){const e=t.children.length>0?` { ${t.children.map(WS).join(", ")} } `:"";return`${t.value}${e}`}function my(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ir(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),ir(e.params,n.params)||t.params.next(n.params),function OH(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ir(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),ir(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function yy(t,e){const n=ir(t.params,e.params)&&function kH(t,e){return ss(t,e)&&t.every((n,r)=>ir(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||yy(t.parent,e.parent))}function Nc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function vq(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Nc(t,r,i);return Nc(t,r)})}(t,e,n);return new Nr(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Nc(t,a)),o}}const r=function wq(t){return new Lo(new $n(t.url),new $n(t.params),new $n(t.queryParams),new $n(t.fragment),new $n(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>Nc(t,s));return new Nr(r,i)}}const _y="ngNavigationCancelingError";function KS(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=os(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=QS(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function QS(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[_y]=!0,r.cancellationCode=e,n&&(r.url=n),r}function YS(t){return ZS(t)&&os(t.url)}function ZS(t){return t&&t[_y]}class bq{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new kc,this.attachRef=null}}let kc=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new bq,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Yd=!1;let vy=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=ne,this.activateEvents=new Ht,this.deactivateEvents=new Ht,this.attachEvents=new Ht,this.detachEvents=new Ht,this.parentContexts=he(kc),this.location=he(Un),this.changeDetector=he(bm),this.environmentInjector=he(xr)}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new P(4012,Yd);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new P(4012,Yd);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new P(4012,Yd);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new P(4013,Yd);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Dq(n,a,i.injector);if(r&&function Cq(t){return!!t.resolveComponentFactory}(r)){const u=r.resolveComponentFactory(o);this.activated=i.createComponent(u,i.length,c)}else this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=Lt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Hi]}),t})();class Dq{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Lo?this.route:e===kc?this.childContexts:this.parent.get(e,n)}}let wy=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Ft({type:t,selectors:[["ng-component"]],standalone:!0,features:[aI],decls:1,vars:0,template:function(n,r){1&n&&N(0,"router-outlet")},dependencies:[vy],encapsulation:2}),t})();function XS(t,e){return t.providers&&!t._injector&&(t._injector=pd(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Dy(t){const e=t.children&&t.children.map(Dy),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ne&&(n.component=wy),n}function Tn(t){return t.outlet||ne}function JS(t,e){const n=t.filter(r=>Tn(r)===e);return n.push(...t.filter(r=>Tn(r)!==e)),n}function Fc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class Tq{constructor(e,n,r,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),my(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Fo(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),bt(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Fo(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Fo(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,n,r){const i=Fo(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new hq(s.value.snapshot))}),e.children.length&&this.forwardEvent(new lq(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(my(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),my(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Fc(i.snapshot),c=a?.get(tc)??null;o.attachRef=null,o.route=i,o.resolver=c,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class eT{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Zd{constructor(e,n){this.component=e,this.route=n}}function Mq(t,e,n){const r=t._root;return Lc(r,e?e._root:null,n,[r.value])}function Uo(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function yN(t){return null!==pl(t)}(t)?e.get(t):t:r}function Lc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Fo(e);return t.children.forEach(o=>{(function Oq(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function Pq(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!ss(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ss(t.url,e.url)||!ir(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yy(t,e)||!ir(t.queryParams,e.queryParams);default:return!yy(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new eT(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Lc(t,e,s.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Zd(a.outlet.component,o))}else o&&Uc(e,a,i),i.canActivateChecks.push(new eT(r)),Lc(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),bt(s,(o,a)=>Uc(o,n.getContext(a),i)),i}function Uc(t,e,n){const r=Fo(t),i=t.value;bt(r,(s,o)=>{Uc(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new Zd(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Bc(t){return"function"==typeof t}function Cy(t){return t instanceof Bd||"EmptyError"===t?.name}const Xd=Symbol("INITIAL_VALUE");function Bo(){return rr(t=>gS(t.map(e=>e.pipe(xc(1),function EH(...t){const e=Aa(t);return ht((n,r)=>{(e?ny(t,n,e):ny(t,n)).subscribe(r)})}(Xd)))).pipe(de(e=>{for(const n of e)if(!0!==n){if(n===Xd)return Xd;if(!1===n||n instanceof is)return n}return!0}),si(e=>e!==Xd),xc(1)))}function tT(t){return function kR(...t){return m0(t)}(Pt(e=>{if(os(e))throw KS(0,e)}),de(e=>!0===e))}const Ey={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nT(t,e,n,r,i){const s=Iy(t,e,n);return s.matched?function Qq(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?z(i.map(o=>{const a=Uo(o,t);return ci(function Uq(t){return t&&Bc(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Bo(),tT()):z(!0)}(r=XS(e,r),e,n).pipe(de(o=>!0===o?s:{...Ey})):z(s)}function Iy(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...Ey}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||AH)(n,t,e);if(!i)return{...Ey};const s={};bt(i.posParams,(a,c)=>{s[c]=a.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Jd(t,e,n,r){if(n.length>0&&function Xq(t,e,n){return n.some(r=>eh(t,e,r)&&Tn(r)!==ne)}(t,n,r)){const s=new ae(e,function Zq(t,e,n,r){const i={};i[ne]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&Tn(s)!==ne){const o=new ae([],{});o._sourceSegment=t,o._segmentIndexShift=e.length,i[Tn(s)]=o}return i}(t,e,r,new ae(n,t.children)));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function Jq(t,e,n){return n.some(r=>eh(t,e,r))}(t,n,r)){const s=new ae(t.segments,function Yq(t,e,n,r,i){const s={};for(const o of r)if(eh(t,n,o)&&!i[Tn(o)]){const a=new ae([],{});a._sourceSegment=t,a._segmentIndexShift=e.length,s[Tn(o)]=a}return{...i,...s}}(t,e,n,r,t.children));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const i=new ae(t.segments,t.children);return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}function eh(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function rT(t,e,n,r){return!!(Tn(t)===r||r!==ne&&eh(e,n,t))&&("**"===t.path||Iy(e,t,n).matched)}function iT(t,e,n){return 0===e.length&&!t.children[n]}const th=!1;class nh{constructor(e){this.segmentGroup=e||null}}class sT{constructor(e){this.urlTree=e}}function Vc(t){return Ic(new nh(t))}function oT(t){return Ic(new sT(t))}class r4{constructor(e,n,r,i,s){this.injector=e,this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=Jd(this.urlTree.root,[],[],this.config).segmentGroup,n=new ae(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,n,ne).pipe(de(s=>this.createUrlTree(Wd(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ai(s=>{if(s instanceof sT)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof nh?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,ne).pipe(de(i=>this.createUrlTree(Wd(i),e.queryParams,e.fragment))).pipe(ai(i=>{throw i instanceof nh?this.noMatchError(i):i}))}noMatchError(e){return new P(4002,th)}createUrlTree(e,n,r){const i=cy(e);return new is(i,n,r)}expandSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,n,r).pipe(de(s=>new ae([],s))):this.expandSegment(e,r,n,r.segments,i,!0)}expandChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return ot(i).pipe(rs(s=>{const o=r.children[s],a=JS(n,s);return this.expandSegmentGroup(e,a,o,s).pipe(de(c=>({segment:c,outlet:s})))}),wS((s,o)=>(s[o.outlet]=o.segment,s),{}),bS())}expandSegment(e,n,r,i,s,o){return ot(r).pipe(rs(a=>this.expandSegmentAgainstRoute(e,n,r,a,i,s,o).pipe(ai(u=>{if(u instanceof nh)return z(null);throw u}))),oi(a=>!!a),ai((a,c)=>{if(Cy(a))return iT(n,i,s)?z(new ae([],{})):Vc(n);throw a}))}expandSegmentAgainstRoute(e,n,r,i,s,o,a){return rT(i,n,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,n,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o):Vc(n):Vc(n)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?oT(s):this.lineralizeSegments(r,s).pipe(_t(o=>{const a=new ae(o,{});return this.expandSegment(e,a,n,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:c,remainingSegments:u,positionalParamSegments:l}=Iy(n,i,s);if(!a)return Vc(n);const d=this.applyRedirectCommands(c,i.redirectTo,l);return i.redirectTo.startsWith("/")?oT(d):this.lineralizeSegments(i,d).pipe(_t(h=>this.expandSegment(e,n,r,h.concat(u),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){return"**"===r.path?(e=XS(r,e),r.loadChildren?(r._loadedRoutes?z({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(de(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new ae(i,{})))):z(new ae(i,{}))):nT(n,r,i,e).pipe(rr(({matched:o,consumedSegments:a,remainingSegments:c})=>o?this.getChildConfig(e=r._injector??e,r,i).pipe(_t(l=>{const d=l.injector??e,h=l.routes,{segmentGroup:f,slicedSegments:p}=Jd(n,a,c,h),g=new ae(f.segments,f.children);if(0===p.length&&g.hasChildren())return this.expandChildren(d,h,g).pipe(de(y=>new ae(a,y)));if(0===h.length&&0===p.length)return z(new ae(a,{}));const m=Tn(r)===s;return this.expandSegment(d,g,h,p,m?ne:s,!0).pipe(de(x=>new ae(a.concat(x.segments),x.children)))})):Vc(n)))}getChildConfig(e,n,r){return n.children?z({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?z({routes:n._loadedRoutes,injector:n._loadedInjector}):function Kq(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?z(!0):z(i.map(o=>{const a=Uo(o,t);return ci(function Nq(t){return t&&Bc(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Bo(),tT())}(e,n,r).pipe(_t(i=>i?this.configLoader.loadChildren(e,n).pipe(Pt(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function t4(t){return Ic(QS(th,3))}())):z({routes:[],injector:e})}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return z(r);if(i.numberOfChildren>1||!i.children[ne])return Ic(new P(4e3,th));i=i.children[ne]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new is(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return bt(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=n[a]}else r[s]=i}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return bt(n.children,(a,c)=>{o[c]=this.createSegmentGroup(e,a,r,i)}),new ae(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new P(4001,th);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}class s4{}class c4{constructor(e,n,r,i,s,o,a){this.injector=e,this.rootComponentType=n,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const e=Jd(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ne).pipe(de(n=>{if(null===n)return null;const r=new Qd([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ne,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Nr(r,n),s=new GS(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const n=e.value,r=zS(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i)}processChildren(e,n,r){return ot(Object.keys(r.children)).pipe(rs(i=>{const s=r.children[i],o=JS(n,i);return this.processSegmentGroup(e,o,s,i)}),wS((i,s)=>i&&s?(i.push(...s),i):null),function SH(t,e=!1){return ht((n,r)=>{let i=0;n.subscribe(ft(r,s=>{const o=t(s,i++);(o||e)&&r.next(s),!o&&r.complete()}))})}(i=>null!==i),Vd(null),bS(),de(i=>{if(null===i)return null;const s=cT(i);return function u4(t){t.sort((e,n)=>e.value.outlet===ne?-1:n.value.outlet===ne?1:e.value.outlet.localeCompare(n.value.outlet))}(s),s}))}processSegment(e,n,r,i,s){return ot(n).pipe(rs(o=>this.processSegmentAgainstRoute(o._injector??e,o,r,i,s)),oi(o=>!!o),ai(o=>{if(Cy(o))return iT(r,i,s)?z([]):z(null);throw o}))}processSegmentAgainstRoute(e,n,r,i,s){if(n.redirectTo||!rT(n,r,i,s))return z(null);let o;if("**"===n.path){const a=i.length>0?ES(i).parameters:{},c=lT(r)+i.length;o=z({snapshot:new Qd(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dT(n),Tn(n),n.component??n._loadedComponent??null,n,uT(r),c,hT(n)),consumedSegments:[],remainingSegments:[]})}else o=nT(r,n,i,e).pipe(de(({matched:a,consumedSegments:c,remainingSegments:u,parameters:l})=>{if(!a)return null;const d=lT(r)+c.length;return{snapshot:new Qd(c,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dT(n),Tn(n),n.component??n._loadedComponent??null,n,uT(r),d,hT(n)),consumedSegments:c,remainingSegments:u}}));return o.pipe(rr(a=>{if(null===a)return z(null);const{snapshot:c,consumedSegments:u,remainingSegments:l}=a;e=n._injector??e;const d=n._loadedInjector??e,h=function l4(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(n),{segmentGroup:f,slicedSegments:p}=Jd(r,u,l,h.filter(m=>void 0===m.redirectTo));if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(de(m=>null===m?null:[new Nr(c,m)]));if(0===h.length&&0===p.length)return z([new Nr(c,[])]);const g=Tn(n)===s;return this.processSegment(d,h,f,p,g?ne:s).pipe(de(m=>null===m?null:[new Nr(c,m)]))}))}}function d4(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function cT(t){const e=[],n=new Set;for(const r of t){if(!d4(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=cT(r.children);e.push(new Nr(r.value,i))}return e.filter(r=>!n.has(r))}function uT(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function lT(t){let e=t,n=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift??0;return n-1}function dT(t){return t.data||{}}function hT(t){return t.resolve||{}}function fT(t){return"string"==typeof t.title||null===t.title}function xy(t){return rr(e=>{const n=t(e);return n?ot(n).pipe(de(()=>e)):z(e)})}const Vo=new Y("ROUTES");let Sy=(()=>{class t{constructor(n,r){this.injector=n,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return z(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=ci(n.loadComponent()).pipe(de(gT),Pt(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),sy(()=>{this.componentLoaders.delete(n)})),i=new _S(r,()=>new _r).pipe(ry());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(de(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let c,u,l=!1;Array.isArray(a)?u=a:(c=a.create(n).injector,u=CS(c.get(Vo,[],W.Self|W.Optional)));return{routes:u.map(Dy),injector:c}}),sy(()=>{this.childrenLoaders.delete(r)})),o=new _S(s,()=>new _r).pipe(ry());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(n){return ci(n()).pipe(de(gT),_t(i=>i instanceof sI||Array.isArray(i)?z(i):ot(this.compiler.compileModuleAsync(i))))}}return t.\u0275fac=function(n){return new(n||t)(H(Zn),H(XI))},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function gT(t){return function w4(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let ih=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new _r,this.configLoader=he(Sy),this.environmentInjector=he(xr),this.urlSerializer=he(Mc),this.rootContexts=he(kc),this.navigationId=0,this.afterPreactivation=()=>z(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new cq(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new aq(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n){return this.transitions=new $n({id:0,targetPageId:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Rc,restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(si(r=>0!==r.id),de(r=>({...r,extractedUrl:n.urlHandlingStrategy.extract(r.rawUrl)})),rr(r=>{let i=!1,s=!1;return z(r).pipe(Pt(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),rr(o=>{const a=n.browserUrlTree.toString(),c=!n.navigated||o.extractedUrl.toString()!==a||a!==n.currentUrlTree.toString();if(!c&&"reload"!==(o.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const l="";return this.events.next(new BS(o.id,n.serializeUrl(r.rawUrl),l,0)),n.rawUrlTree=o.rawUrl,o.resolve(null),Gn}if(n.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return mT(o.source)&&(n.browserUrlTree=o.extractedUrl),z(o).pipe(rr(l=>{const d=this.transitions?.getValue();return this.events.next(new hy(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),d!==this.transitions?.getValue()?Gn:Promise.resolve(l)}),function i4(t,e,n,r){return rr(i=>function n4(t,e,n,r,i){return new r4(t,e,n,r,i).apply()}(t,e,n,i.extractedUrl,r).pipe(de(s=>({...i,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,n.config),Pt(l=>{this.currentNavigation={...this.currentNavigation,finalUrl:l.urlAfterRedirects},r.urlAfterRedirects=l.urlAfterRedirects}),function f4(t,e,n,r,i){return _t(s=>function a4(t,e,n,r,i,s,o="emptyOnly"){return new c4(t,e,n,r,i,o,s).recognize().pipe(rr(a=>null===a?function o4(t){return new st(e=>e.error(t))}(new s4):z(a)))}(t,e,n,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i).pipe(de(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),Pt(l=>{if(r.targetSnapshot=l.targetSnapshot,"eager"===n.urlUpdateStrategy){if(!l.extras.skipLocationChange){const h=n.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl);n.setBrowserUrl(h,l)}n.browserUrlTree=l.urlAfterRedirects}const d=new nq(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}));if(c&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:l,extractedUrl:d,source:h,restoredState:f,extras:p}=o,g=new hy(l,this.urlSerializer.serialize(d),h,f);this.events.next(g);const m=qS(d,this.rootComponentType).snapshot;return z(r={...o,targetSnapshot:m,urlAfterRedirects:d,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}{const l="";return this.events.next(new BS(o.id,n.serializeUrl(r.extractedUrl),l,1)),n.rawUrlTree=o.rawUrl,o.resolve(null),Gn}}),Pt(o=>{const a=new rq(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),de(o=>r={...o,guards:Mq(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function Vq(t,e){return _t(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?z({...n,guardsResult:!0}):function jq(t,e,n,r){return ot(t).pipe(_t(i=>function Wq(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?z(s.map(a=>{const c=Fc(e)??i,u=Uo(a,c);return ci(function Lq(t){return t&&Bc(t.canDeactivate)}(u)?u.canDeactivate(t,e,n,r):c.runInContext(()=>u(t,e,n,r))).pipe(oi())})).pipe(Bo()):z(!0)}(i.component,i.route,n,e,r)),oi(i=>!0!==i,!0))}(o,r,i,t).pipe(_t(a=>a&&function Rq(t){return"boolean"==typeof t}(a)?function $q(t,e,n,r){return ot(e).pipe(rs(i=>ny(function qq(t,e){return null!==t&&e&&e(new uq(t)),z(!0)}(i.route.parent,r),function Hq(t,e){return null!==t&&e&&e(new dq(t)),z(!0)}(i.route,r),function Gq(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Aq(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>yS(()=>z(o.guards.map(c=>{const u=Fc(o.node)??n,l=Uo(c,u);return ci(function Fq(t){return t&&Bc(t.canActivateChild)}(l)?l.canActivateChild(r,t):u.runInContext(()=>l(r,t))).pipe(oi())})).pipe(Bo())));return z(s).pipe(Bo())}(t,i.path,n),function zq(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return z(!0);const i=r.map(s=>yS(()=>{const o=Fc(e)??n,a=Uo(s,o);return ci(function kq(t){return t&&Bc(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(oi())}));return z(i).pipe(Bo())}(t,i.route,n))),oi(i=>!0!==i,!0))}(r,s,t,e):z(a)),de(a=>({...n,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),Pt(o=>{if(r.guardsResult=o.guardsResult,os(o.guardsResult))throw KS(0,o.guardsResult);const a=new iq(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),si(o=>!!o.guardsResult||(n.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),xy(o=>{if(o.guards.canActivateChecks.length)return z(o).pipe(Pt(a=>{const c=new sq(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),rr(a=>{let c=!1;return z(a).pipe(function p4(t,e){return _t(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return z(n);let s=0;return ot(i).pipe(rs(o=>function g4(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!fT(i)&&(s[Sc]=i.title),function m4(t,e,n,r){const i=function y4(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return z({});const s={};return ot(i).pipe(_t(o=>function _4(t,e,n,r){const i=Fc(e)??r,s=Uo(t,i);return ci(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(oi(),Pt(a=>{s[o]=a}))),iy(1),function TH(t){return de(()=>t)}(s),ai(o=>Cy(o)?Gn:Ic(o)))}(s,t,e,r).pipe(de(o=>(t._resolvedData=o,t.data=zS(t,n).resolve,i&&fT(i)&&(t.data[Sc]=i.title),null)))}(o.route,r,t,e)),Pt(()=>s++),iy(1),_t(o=>s===i.length?z(n):Gn))})}(n.paramsInheritanceStrategy,this.environmentInjector),Pt({next:()=>c=!0,complete:()=>{c||(n.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),Pt(a=>{const c=new oq(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),xy(o=>{const a=c=>{const u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(c.routeConfig).pipe(Pt(l=>{c.component=l}),de(()=>{})));for(const l of c.children)u.push(...a(l));return u};return gS(a(o.targetSnapshot.root)).pipe(Vd(),xc(1))}),xy(()=>this.afterPreactivation()),de(o=>{const a=function _q(t,e,n){const r=Nc(t,e._root,n?n._root:void 0);return new HS(r,e)}(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return r={...o,targetRouterState:a}}),Pt(o=>{n.currentUrlTree=o.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),n.routerState=o.targetRouterState,"deferred"===n.urlUpdateStrategy&&(o.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,o),n.browserUrlTree=o.urlAfterRedirects)}),((t,e,n)=>de(r=>(new Tq(e,r.targetRouterState,r.currentRouterState,n).activate(t),r)))(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o)),Pt({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new as(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),sy(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),ai(o=>{if(s=!0,ZS(o)){YS(o)||(n.navigated=!0,n.restoreHistory(r,!0));const a=new Kd(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),YS(o)){const c=n.urlHandlingStrategy.merge(o.url,n.rawUrlTree),u={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||mT(r.source)};n.scheduleNavigation(c,Rc,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{n.restoreHistory(r,!0);const a=new VS(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(n.errorHandler(o))}catch(c){r.reject(c)}}return Gn}))}))}cancelNavigationTransition(n,r,i){const s=new Kd(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function mT(t){return t!==Rc}let yT=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ne);return r}getResolvedTitleForRoute(n){return n.data[Sc]}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:function(){return he(b4)},providedIn:"root"}),t})(),b4=(()=>{class t extends yT{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return t.\u0275fac=function(n){return new(n||t)(H(hS))},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),D4=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:function(){return he(E4)},providedIn:"root"}),t})();class C4{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let E4=(()=>{class t extends C4{}return t.\u0275fac=function(){let e;return function(r){return(e||(e=function Ob(t){return Yr(()=>{const e=t.prototype.constructor,n=e[br]||Op(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[br]||Op(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}(t)))(r||t)}}(),t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const sh=new Y("",{providedIn:"root",factory:()=>({})});let x4=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:function(){return he(S4)},providedIn:"root"}),t})(),S4=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function T4(t){throw t}function M4(t,e,n){return e.parse("/")}const A4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},O4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let pn=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=he(YV),this.isNgZoneEnabled=!1,this.options=he(sh,{optional:!0})||{},this.errorHandler=this.options.errorHandler||T4,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||M4,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=he(x4),this.routeReuseStrategy=he(D4),this.urlCreationStrategy=he(gq),this.titleStrategy=he(yT),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=CS(he(Vo,{optional:!0})??[]),this.navigationTransitions=he(ih),this.urlSerializer=he(Mc),this.location=he(Am),this.isNgZoneEnabled=he(et)instanceof et&&et.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new is,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=qS(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Rc,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(n){this.config=n.map(Dy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:o;let l=null;switch(a){case"merge":l={...this.currentUrlTree.queryParams,...s};break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=s||null}return null!==l&&(l=this.removeEmptyProps(l)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,n,l,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=os(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Rc,null,r)}navigate(n,r={skipLocationChange:!1}){return function P4(t){for(let e=0;e<t.length;e++){if(null==t[e])throw new P(4008,!1)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...A4}:!1===r?{...O4}:r,os(n))return xS(this.currentUrlTree,n,i);const s=this.parseUrl(n);return xS(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,u,l;return o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((d,h)=>{a=d,c=h}),l="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:l,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),cs=(()=>{class t{constructor(n,r,i,s,o,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new _r;const c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=n.events.subscribe(u=>{u instanceof as&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(n){this._preserveFragment=xm(n)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(n){this._skipLocationChange=xm(n)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(n){this._replaceUrl=xm(n)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function MD(t,e,n){return function GF(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?TD:Jr}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,n,r):i.removeAttribute(s,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return t.\u0275fac=function(n){return new(n||t)($(pn),$(Lo),function Nl(t){return function yk(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(_b(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===e)return n[i+1];i+=2}}}return null}(wt(),t)}("tabindex"),$(Kl),$(ei),$(ns))},t.\u0275dir=Lt({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,r){1&n&&In("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&n&&Lg("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Hi]}),t})();class vT{}let k4=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(si(n=>n instanceof as),rs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=pd(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return ot(i).pipe(zs())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):z(null);const s=i.pipe(_t(o=>null===o?z(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?ot([s,this.loader.loadComponent(r)]).pipe(zs()):s})}}return t.\u0275fac=function(n){return new(n||t)(H(pn),H(XI),H(xr),H(vT),H(Sy))},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Ty=new Y("");let wT=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof hy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof as&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof jS&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new jS(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return t.\u0275fac=function(n){!function oC(){throw new Error("invalid")}()},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})();function us(t,e){return{\u0275kind:t,\u0275providers:e}}function DT(){const t=he(Zn);return e=>{const n=t.get(bd);if(e!==n.components[0])return;const r=t.get(pn),i=t.get(CT);1===t.get(Ay)&&r.initialNavigation(),t.get(ET,null,W.Optional)?.setUpPreloading(),t.get(Ty,null,W.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const CT=new Y("",{factory:()=>new _r}),Ay=new Y("",{providedIn:"root",factory:()=>1});const ET=new Y("");function V4(t){return us(0,[{provide:ET,useExisting:k4},{provide:vT,useExisting:t}])}const IT=new Y("ROUTER_FORROOT_GUARD"),j4=[Am,{provide:Mc,useClass:oy},pn,kc,{provide:Lo,useFactory:function bT(t){return t.routerState.root},deps:[pn]},Sy,[]];function $4(){return new sx("Router",pn)}let xT=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[j4,[],{provide:Vo,multi:!0,useValue:n},{provide:IT,useFactory:G4,deps:[[pn,new za,new Ga]]},{provide:sh,useValue:r||{}},r?.useHash?{provide:ns,useClass:Lj}:{provide:ns,useClass:Tx},{provide:Ty,useFactory:()=>{const t=he(i3),e=he(et),n=he(sh),r=he(ih),i=he(Mc);return n.scrollOffset&&t.setOffset(n.scrollOffset),new wT(i,r,t,e,n)}},r?.preloadingStrategy?V4(r.preloadingStrategy).\u0275providers:[],{provide:sx,multi:!0,useFactory:$4},r?.initialNavigation?W4(r):[],[{provide:ST,useFactory:DT},{provide:ZI,multi:!0,useExisting:ST}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Vo,multi:!0,useValue:n}]}}}return t.\u0275fac=function(n){return new(n||t)(H(IT,8))},t.\u0275mod=Vi({type:t}),t.\u0275inj=Qr({imports:[wy]}),t})();function G4(t){return"guarded"}function W4(t){return["disabled"===t.initialNavigation?us(3,[{provide:_d,multi:!0,useFactory:()=>{const e=he(pn);return()=>{e.setUpLocationChangeListener()}}},{provide:Ay,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?us(2,[{provide:Ay,useValue:0},{provide:_d,multi:!0,deps:[Zn],useFactory:e=>{const n=e.get(kj,Promise.resolve());return()=>n.then(()=>new Promise(i=>{const s=e.get(pn),o=e.get(CT);(function r(i){e.get(pn).events.pipe(si(o=>o instanceof as||o instanceof Kd||o instanceof VS),de(o=>o instanceof as||o instanceof Kd&&(0===o.code||1===o.code)&&null),si(o=>null!==o),xc(1)).subscribe(()=>{i()})})(()=>{i(!0)}),e.get(ih).afterPreactivation=()=>(i(!0),o.closed?z(void 0):o),s.initialNavigation()}))}}]).\u0275providers:[]]}const ST=new Y("");function TT(t,e,n,r,i,s,o){try{var a=t[s](o),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function v(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(c){TT(s,r,i,o,a,"next",c)}function a(c){TT(s,r,i,o,a,"throw",c)}o(void 0)})}}const MT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},AT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0;let h=(15&a)<<2|u>>6,f=63&u;c||(f=64,o||(h=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(MT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const c=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==a||null==u||null==d)throw Error();r.push(s<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==d&&r.push(u<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},oh=function(t){return function(t){const e=MT(t);return AT.encodeByteArray(e,!0)}(t).replace(/\./g,"")};function $c(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!J4(n)||(t[n]=$c(t[n],e[n]));return t}function J4(t){return"__proto__"!==t}const ah=()=>{try{return function ez(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&function(t){try{return AT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}};class OT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function PT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[oh(JSON.stringify({alg:"none",type:"JWT"})),oh(JSON.stringify(o)),""].join(".")}function ls(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function RT(){var t;const e=null===(t=ah())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function NT(){try{return"object"==typeof indexedDB}catch{return!1}}class ui extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ch.prototype.create)}}class ch{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function lz(t,e){return t.replace(dz,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new ui(i,`${this.serviceName}: ${o} (${i}).`,r)}}const dz=/\{\$([^}]+)}/g;function FT(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ry(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(LT(s)&&LT(o)){if(!Ry(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function LT(t){return null!==t&&"object"==typeof t}function hz(t,e){const n=new fz(t,e);return n.subscribe.bind(n)}class fz{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function pz(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=Ny),void 0===i.error&&(i.error=Ny),void 0===i.complete&&(i.complete=Ny);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ny(){}function De(t){return t&&t._delegate?t._delegate:t}class kr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ds="[DEFAULT]";class wz{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new OT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Dz(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return v(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=ds){return this.instances.has(e)}getOptions(e=ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===ds?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=ds){return this.component?this.component.multipleInstances?e:ds:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Cz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wz(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const Fy=[];var me=(()=>{return(t=me||(me={}))[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",me;var t})();const UT={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},Ez=me.INFO,Iz={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},xz=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=Iz[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class Ly{constructor(e){this.name=e,this._logLevel=Ez,this._logHandler=xz,this._userLogHandler=null,Fy.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?UT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}let BT,VT;const jT=new WeakMap,Uy=new WeakMap,$T=new WeakMap,By=new WeakMap,Vy=new WeakMap;let jy={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Uy.get(t);if("objectStoreNames"===e)return t.objectStoreNames||$T.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return li(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Fz(t){return"function"==typeof t?function kz(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Oz(){return VT||(VT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply($y(this),e),li(jT.get(this))}:function(...e){return li(t.apply($y(this),e))}:function(e,...n){const r=t.call($y(this),e,...n);return $T.set(r,e.sort?e.sort():[e]),li(r)}}(t):(t instanceof IDBTransaction&&function Rz(t){if(Uy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Uy.set(t,e)}(t),((t,e)=>e.some(n=>t instanceof n))(t,function Az(){return BT||(BT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,jy):t)}function li(t){if(t instanceof IDBRequest)return function Pz(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(li(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&jT.set(n,t)}).catch(()=>{}),Vy.set(e,t),e}(t);if(By.has(t))return By.get(t);const e=Fz(t);return e!==t&&(By.set(t,e),Vy.set(e,t)),e}const $y=t=>Vy.get(t),Uz=["get","getKey","getAll","getAllKeys","count"],Bz=["put","add","delete","clear"],Hy=new Map;function HT(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Hy.get(e))return Hy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Bz.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Uz.includes(n))return;const s=function(){var o=v(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]});return function(c){return o.apply(this,arguments)}}();return Hy.set(e,s),s}!function Nz(t){jy=t(jy)}(t=>({...t,get:(e,n,r)=>HT(e,n)||t.get(e,n,r),has:(e,n)=>!!HT(e,n)||t.has(e,n)}));class Vz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function jz(t){return"VERSION"===t.getComponent()?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const qy="@firebase/app",hs=new Ly("@firebase/app"),di="[DEFAULT]",fG={[qy]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},hi=new Map,Hc=new Map;function lh(t,e){try{t.container.addComponent(e)}catch(n){hs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zT(t,e){t.container.addOrOverwriteComponent(e)}function fs(t){const e=t.name;if(Hc.has(e))return hs.debug(`There were multiple attempts to register component ${e}.`),!1;Hc.set(e,t);for(const n of hi.values())lh(n,t);return!0}function GT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function pG(t,e,n=di){GT(t,e).clearInstance(n)}function gG(){Hc.clear()}const Fr=new ch("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class yG{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}}const dh="9.17.1";function zy(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:di,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Fr.create("bad-app-name",{appName:String(i)});if(n||(n=(()=>{var t;return null===(t=ah())||void 0===t?void 0:t.config})()),!n)throw Fr.create("no-options");const s=hi.get(i);if(s){if(Ry(n,s.options)&&Ry(r,s.config))return s;throw Fr.create("duplicate-app",{appName:i})}const o=new Cz(i);for(const c of Hc.values())o.addComponent(c);const a=new yG(n,r,o);return hi.set(i,a),a}function _G(t=di){const e=hi.get(t);if(!e&&t===di)return zy();if(!e)throw Fr.create("no-app",{appName:t});return e}function vG(){return Array.from(hi.values())}function WT(t){return Gy.apply(this,arguments)}function Gy(){return(Gy=v(function*(t){const e=t.name;hi.has(e)&&(hi.delete(e),yield Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)})).apply(this,arguments)}function or(t,e,n){var r;let i=null!==(r=fG[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void hs.warn(a.join(" "))}fs(new kr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function KT(t,e){if(null!==t&&"function"!=typeof t)throw Fr.create("invalid-log-argument");!function Tz(t,e){for(const n of Fy){let r=null;e&&e.level&&(r=UT[e.level]),n.userLogHandler=null===t?null:(i,s,...o)=>{const a=o.map(c=>{if(null==c)return null;if("string"==typeof c)return c;if("number"==typeof c||"boolean"==typeof c)return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");s>=(r??i.logLevel)&&t({level:me[s].toLowerCase(),message:a,args:o,type:i.name})}}}(t,e)}function QT(t){!function Sz(t){Fy.forEach(e=>{e.setLogLevel(t)})}(t)}const qc="firebase-heartbeat-store";let Wy=null;function YT(){return Wy||(Wy=function Lz(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=li(o);return r&&o.addEventListener("upgradeneeded",c=>{r(li(o.result),c.oldVersion,c.newVersion,li(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(qc)}}).catch(t=>{throw Fr.create("idb-open",{originalErrorMessage:t.message})})),Wy}function Ky(){return(Ky=v(function*(t){try{return(yield YT()).transaction(qc).objectStore(qc).get(XT(t))}catch(e){if(e instanceof ui)hs.warn(e.message);else{const n=Fr.create("idb-get",{originalErrorMessage:e?.message});hs.warn(n.message)}}})).apply(this,arguments)}function ZT(t,e){return Qy.apply(this,arguments)}function Qy(){return(Qy=v(function*(t,e){try{const r=(yield YT()).transaction(qc,"readwrite");return yield r.objectStore(qc).put(e,XT(t)),r.done}catch(n){if(n instanceof ui)hs.warn(n.message);else{const r=Fr.create("idb-set",{originalErrorMessage:n?.message});hs.warn(r.message)}}})).apply(this,arguments)}function XT(t){return`${t.name}!${t.options.appId}`}class IG{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new SG(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return v(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=JT();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return v(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=JT(),{heartbeatsToSend:r,unsentEntries:i}=function xG(t,e=1024){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),e1(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),e1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=oh(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function JT(){return(new Date).toISOString().substring(0,10)}class SG{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(function*(){return!!NT()&&function cz(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(n){e(n)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return v(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function DG(t){return Ky.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return v(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return ZT(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return v(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return ZT(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function e1(t){return oh(JSON.stringify({version:2,heartbeats:t})).length}!function TG(t){fs(new kr("platform-logger",e=>new Vz(e),"PRIVATE")),fs(new kr("heartbeat",e=>new IG(e),"PRIVATE")),or(qy,"0.9.3",t),or(qy,"0.9.3","esm2017"),or("fire-js","")}("");class MG{constructor(e,n){this._delegate=e,this.firebase=n,lh(e,new kr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),WT(this._delegate)))}_getService(e,n=di){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&"EXPLICIT"===(null===(r=i.getComponent())||void 0===r?void 0:r.instantiationMode)&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=di){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){lh(this._delegate,e)}_addOrOverwriteComponent(e){zT(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const t1=new ch("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),PG=function n1(){const t=function OG(t){const e={},n={__esModule:!0,initializeApp:function s(u,l={}){const d=zy(u,l);if(FT(e,d.name))return e[d.name];const h=new t(d,n);return e[d.name]=h,h},app:i,registerVersion:or,setLogLevel:QT,onLog:KT,apps:null,SDK_VERSION:dh,INTERNAL:{registerComponent:function a(u){const l=u.name,d=l.replace("-compat","");if(fs(u)&&"PUBLIC"===u.type){const h=(f=i())=>{if("function"!=typeof f[d])throw t1.create("invalid-app-argument",{appName:l});return f[d]()};void 0!==u.serviceProps&&$c(h,u.serviceProps),n[d]=h,t.prototype[d]=function(...f){return this._getService.bind(this,l).apply(this,u.multipleInstances?f:[])}}return"PUBLIC"===u.type?n[d]:null},removeApp:function r(u){delete e[u]},useAsService:function c(u,l){return"serverAuth"===l?null:l},modularAPIs:Ta}};function i(u){if(!FT(e,u=u||di))throw t1.create("no-app",{appName:u});return e[u]}return n.default=n,Object.defineProperty(n,"apps",{get:function o(){return Object.keys(e).map(u=>e[u])}}),i.App=t,n}(MG);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:n1,extendNamespace:function e(n){$c(t,n)},createSubscribe:hz,ErrorFactory:ch,deepExtend:$c}),t}(),r1=new Ly("@firebase/app-compat");if(function oz(){return"object"==typeof self&&self.self===self}()&&void 0!==self.firebase){r1.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&r1.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const hh=PG;!function kG(t){or("@firebase/app-compat","0.2.3",t)}(),hh.registerVersion("firebase","9.17.1","app-compat");const i1="firebasestorage.googleapis.com",s1="storageBucket";class Be extends ui{constructor(e,n,r=0){super(Yy(e),`Firebase Storage: ${n} (${Yy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Be.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Te=(()=>{return(t=Te||(Te={})).UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Te;var t})();function Yy(t){return"storage/"+t}function Zy(){return new Be(Te.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function o1(){return new Be(Te.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function a1(){return new Be(Te.CANCELED,"User canceled the upload/download.")}function c1(){return new Be(Te.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function $o(t){return new Be(Te.INVALID_ARGUMENT,t)}function u1(){return new Be(Te.APP_DELETED,"The Firebase app was deleted.")}function l1(t){return new Be(Te.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zc(t,e){return new Be(Te.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Gc(t){throw new Be(Te.INTERNAL_ERROR,"Internal error: "+t)}class Rt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Rt.makeFromUrl(e,n)}catch{return new Rt(e,"")}if(""===r.path)return r;throw function WG(t){return new Be(Te.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function u(T){T.path_=decodeURIComponent(T.path)}const d=n.replace(/[.]/g,"\\."),y=[{regex:a,indices:{bucket:1,path:3},postModify:function s(T){"/"===T.path.charAt(T.path.length-1)&&(T.path_=T.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${d}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:u},{regex:new RegExp(`^https?://${n===i1?"(?:storage.googleapis.com|storage.cloud.google.com)":n}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:u}];for(let T=0;T<y.length;T++){const L=y[T],V=L.regex.exec(e);if(V){let zn=V[L.indices.path];zn||(zn=""),r=new Rt(V[L.indices.bucket],zn),L.postModify(r);break}}if(null==r)throw function GG(t){return new Be(Te.INVALID_URL,"Invalid URL '"+t+"'.")}(e);return r}}class XG{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function fh(t){return"string"==typeof t||t instanceof String}function d1(t){return Xy()&&t instanceof Blob}function Xy(){return typeof Blob<"u"&&!RT()}function Jy(t,e,n,r){if(r<e)throw $o(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw $o(`Invalid value for '${t}'. Expected ${n} or less.`)}function Lr(t,e,n){let r=e;return null==n&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function h1(t){const e=encodeURIComponent;let n="?";for(const r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n=n.slice(0,-1),n}var fi=(()=>{return(t=fi||(fi={}))[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",fi;var t})();function f1(t,e){const n=t>=500&&t<600,i=-1!==[408,429].indexOf(t),s=-1!==e.indexOf(t);return n||i||s}class i8{constructor(e,n,r,i,s,o,a,c,u,l,d,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=l,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());!function t8(t){return void 0!==t}(c)?s():s(c)}catch(c){o(c)}else if(null!==a){const c=Zy();c.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,c):c)}else o(i.canceled?this.appDelete_?u1():a1():o1())};this.canceled_?n(0,new ph(!1,null,!0)):this.backoffId_=function JG(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let u=!1;function l(...m){u||(u=!0,e.apply(null,m))}function d(m){i=setTimeout(()=>{i=null,t(f,c())},m)}function h(){s&&clearTimeout(s)}function f(m,...C){if(u)return void h();if(m)return h(),void l.call(null,m,...C);if(c()||o)return h(),void l.call(null,m,...C);let y;r<64&&(r*=2),1===a?(a=2,y=0):y=1e3*(r+Math.random()),d(y)}let p=!1;function g(m){p||(p=!0,h(),!u&&(null!==i?(m||(a=2),clearTimeout(i),d(0)):m||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}((r,i)=>{if(i)return void r(!1,new ph(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===fi.NO_ERROR,c=s.getStatus();if(!a||f1(c,this.additionalRetryCodes_)&&this.retry){const l=s.getErrorCode()===fi.ABORT;return void r(!1,new ph(!1,null,l))}const u=-1!==this.successCodes_.indexOf(c);r(!0,new ph(u,s))})},n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function e8(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ph{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function d8(...t){const e=function l8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}if(Xy())return new Blob(t);throw new Be(Te.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const gn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class e_{constructor(e,n){this.data=e,this.contentType=n||null}}function t_(t,e){switch(t){case gn.RAW:return new e_(p1(e));case gn.BASE64:case gn.BASE64URL:return new e_(g1(t,e));case gn.DATA_URL:return new e_(function g8(t){const e=new m1(t);return e.base64?g1(gn.BASE64,e.rest):function p8(t){let e;try{e=decodeURIComponent(t)}catch{throw zc(gn.DATA_URL,"Malformed data URL.")}return p1(e)}(e.rest)}(e),function m8(t){return new m1(t).contentType}(e))}throw Zy()}function p1(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function g1(t,e){switch(t){case gn.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw zc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case gn.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw zc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=function f8(t){if(typeof atob>"u")throw function ZG(t){return new Be(Te.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(t)}(e)}catch(i){throw i.message.includes("polyfill")?i:zc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class m1{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(null===n)throw zc(gn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;null!=r&&(this.base64=function y8(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ar{constructor(e,n){let r=0,i="";d1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(d1(this.data_)){const i=function h8(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===i?null:new ar(i)}{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ar(r,!0)}}static getBlob(...e){if(Xy()){const n=e.map(r=>r instanceof ar?r.data_:r);return new ar(d8.apply(null,n))}{const n=e.map(o=>fh(o)?t_(gn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new ar(i,!0)}}uploadData(){return this.data_}}function n_(t){let e;try{e=JSON.parse(t)}catch{return null}return function r8(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function y1(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function w8(t,e){return e}class zt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||w8}}let gh=null;function Wc(){if(gh)return gh;const t=[];t.push(new zt("bucket")),t.push(new zt("generation")),t.push(new zt("metageneration")),t.push(new zt("name","fullPath",!0));const n=new zt("name");n.xform=function e(s,o){return function b8(t){return!fh(t)||t.length<2?t:y1(t)}(o)},t.push(n);const i=new zt("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},t.push(i),t.push(new zt("timeCreated")),t.push(new zt("updated")),t.push(new zt("md5Hash",null,!0)),t.push(new zt("cacheControl",null,!0)),t.push(new zt("contentDisposition",null,!0)),t.push(new zt("contentEncoding",null,!0)),t.push(new zt("contentLanguage",null,!0)),t.push(new zt("contentType",null,!0)),t.push(new zt("metadata","customMetadata",!0)),gh=t,gh}function _1(t,e,n){const r=n_(e);return null===r?null:function C8(t,e,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return function D8(t,e){Object.defineProperty(t,"ref",{get:function n(){const s=new Rt(t.bucket,t.fullPath);return e._makeStorageReference(s)}})}(r,t),r}(t,r,n)}function r_(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}const v1="prefixes";class cr{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ur(t){if(!t)throw Zy()}function mh(t,e){return function n(r,i){const s=_1(t,i,e);return ur(null!==s),s}}function Ho(t){return function e(n,r){let i;return i=401===n.getStatus()?n.getErrorText().includes("Firebase App Check token is invalid")?function qG(){return new Be(Te.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function HG(){return new Be(Te.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===n.getStatus()?function $G(t){return new Be(Te.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(t.bucket):403===n.getStatus()?function zG(t){return new Be(Te.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}(t.path):r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}}function Kc(t){const e=Ho(t);return function n(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function jG(t){return new Be(Te.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}(t.path)),s.serverResponse=i.serverResponse,s}}function b1(t,e,n){const i=Lr(e.fullServerUrl(),t.host,t._protocol),o=t.maxOperationRetryTime,a=new cr(i,"GET",mh(t,n),o);return a.errorHandler=Kc(e),a}function M8(t,e,n,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=Lr(e.bucketOnlyServerUrl(),t.host,t._protocol),u=t.maxOperationRetryTime,l=new cr(a,"GET",function S8(t,e){return function n(r,i){const s=function x8(t,e,n){const r=n_(n);return null===r?null:function I8(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[v1])for(const i of n[v1]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new Rt(e,s));r.prefixes.push(o)}if(n.items)for(const i of n.items){const s=t._makeStorageReference(new Rt(e,i.name));r.items.push(s)}return r}(t,e,r)}(t,e,i);return ur(null!==s),s}}(t,e.bucket),u);return l.urlParams=s,l.errorHandler=Ho(e),l}function C1(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function R8(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class yh{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function i_(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{ur(!1)}return ur(!!n&&-1!==(e||["active"]).indexOf(n)),n}const L8={STATE_CHANGED:"state_changed"},Gt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function s_(t){switch(t){case"running":case"pausing":case"canceling":return Gt.RUNNING;case"paused":return Gt.PAUSED;case"success":return Gt.SUCCESS;case"canceled":return Gt.CANCELED;default:return Gt.ERROR}}class U8{constructor(e,n,r){if(function n8(t){return"function"==typeof t}(e)||null!=n||null!=r)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function qo(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class B8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Gc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Gc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Gc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Gc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Gc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class V8 extends B8{initXhr(){this.xhr_.responseType="text"}}function Hn(){return new V8}class S1{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Wc(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Te.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(f1(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=o1()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Te.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,n)=>{const r=function N8(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=C1(e,r,i),a={name:o.fullPath},c=Lr(s,t.host,t._protocol),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=r_(o,n),p=new cr(c,"POST",function f(g){let m;i_(g);try{m=g.getResponseHeader("X-Goog-Upload-URL")}catch{ur(!1)}return ur(fh(m)),m},t.maxUploadRetryTime);return p.urlParams=a,p.headers=l,p.body=d,p.errorHandler=Ho(e),p}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Hn,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=function k8(t,e,n,r){const c=new cr(n,"POST",function s(u){const l=i_(u,["active","final"]);let d=null;try{d=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ur(!1)}d||ur(!1);const h=Number(d);return ur(!isNaN(h)),new yh(h,r.size(),"final"===l)},t.maxUploadRetryTime);return c.headers={"X-Goog-Upload-Command":"query"},c.errorHandler=Ho(e),c}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Hn,n,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,n=new yh(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function F8(t,e,n,r,i,s,o,a){const c=new yh(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw function QG(){return new Be(Te.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const u=c.total-c.current;let l=u;i>0&&(l=Math.min(l,i));const d=c.current;let f="";f=0===l?"finalize":u===l?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${c.current}`},g=r.slice(d,d+l);if(null===g)throw c1();const y=new cr(n,"POST",function m(T,L){const V=i_(T,["active","final"]),Ge=c.current+l,zn=r.size();let u0;return u0="final"===V?mh(e,s)(T,L):null,new yh(Ge,zn,"final"===V,u0)},e.maxUploadRetryTime);return y.headers=p,y.body=g.uploadData(),y.progressCallback=a||null,y.errorHandler=Ho(t),y}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){return this._error=c,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Hn,i,s,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=b1(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Hn,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=function E1(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},c=function a(){let y="";for(let T=0;T<2;T++)y+=Math.random().toString().slice(2);return y}();o["Content-Type"]="multipart/related; boundary="+c;const u=C1(e,r,i),l=r_(u,n),f=ar.getBlob("--"+c+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+c+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+c+"--");if(null===f)throw c1();const p={name:u.fullPath},g=Lr(s,t.host,t._protocol),C=t.maxUploadRetryTime,x=new cr(g,"POST",mh(t,n),C);return x.urlParams=p,x.headers=o,x.body=f.uploadData(),x.errorHandler=Ho(e),x}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Hn,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n="paused"===this._state;this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=a1(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=s_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new U8(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);-1!==n&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(s_(this._state)){case Gt.SUCCESS:qo(this._resolve.bind(null,this.snapshot))();break;case Gt.CANCELED:case Gt.ERROR:qo(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(s_(this._state)){case Gt.RUNNING:case Gt.PAUSED:e.next&&qo(e.next.bind(e,this.snapshot))();break;case Gt.SUCCESS:e.complete&&qo(e.complete.bind(e))();break;default:e.error&&qo(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class ps{constructor(e,n){this._service=e,this._location=n instanceof Rt?n:Rt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ps(e,n)}get root(){const e=new Rt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return y1(this._location.path)}get storage(){return this._service}get parent(){const e=function _8(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;const n=new Rt(this._location.bucket,e);return new ps(this._service,n)}_throwIfRoot(e){if(""===this._location.path)throw l1(e)}}function M1(t,e,n){return o_.apply(this,arguments)}function o_(){return(o_=v(function*(t,e,n){const i=yield A1(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield M1(t,e,i.nextPageToken))})).apply(this,arguments)}function A1(t,e){null!=e&&"number"==typeof e.maxResults&&Jy("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=M8(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,Hn)}function X8(t){t._throwIfRoot("getDownloadURL");const e=function A8(t,e,n){const i=Lr(e.fullServerUrl(),t.host,t._protocol),o=t.maxOperationRetryTime,a=new cr(i,"GET",function T8(t,e){return function n(r,i){const s=_1(t,i,e);return ur(null!==s),function E8(t,e,n,r){const i=n_(e);if(null===i||!fh(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const d=t.fullPath;return Lr("/b/"+o(t.bucket)+"/o/"+o(d),n,r)+h1({alt:"media",token:u})})[0]}(s,i,t.host,t._protocol)}}(t,n),o);return a.errorHandler=Kc(e),a}(t.storage,t._location,Wc());return t.storage.makeRequestWithTokens(e,Hn).then(n=>{if(null===n)throw function YG(){return new Be(Te.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return n})}function O1(t,e){const n=function v8(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Rt(t._location.bucket,n);return new ps(t.storage,r)}function P1(t,e){if(t instanceof a_){const n=t;if(null==n._bucket)throw function KG(){return new Be(Te.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+s1+"' property when initializing the app?")}();const r=new ps(n,n._bucket);return null!=e?P1(r,e):r}return void 0!==e?O1(t,e):t}function n5(t,e){if(e&&function e5(t){return/^[A-Za-z]+:\/\//.test(t)}(e)){if(t instanceof a_)return function t5(t,e){return new ps(t,e)}(t,e);throw $o("To use ref(service, url), the first argument must be a Storage instance.")}return P1(t,e)}function R1(t,e){const n=e?.[s1];return null==n?null:Rt.makeFromBucketSpec(n,t)}class a_{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=i1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Rt.makeFromBucketSpec(i,this._host):R1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Rt.makeFromBucketSpec(this._url,e):R1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Jy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Jy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return v(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const n=e._authProvider.getImmediate({optional:!0});if(n){const r=yield n.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return v(function*(){const n=e._appCheckProvider.getImmediate({optional:!0});return n?(yield n.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ps(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new XG(u1());{const o=function u8(t,e,n,r,i,s,o=!0){const a=h1(t.urlParams),c=t.url+a,u=Object.assign({},t.headers);return function a8(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function s8(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function o8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(u,s),function c8(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new i8(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){var r=this;return v(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,n,i,s).getPromise()})()}}const N1="@firebase/storage";function L1(t,e){return n5(t=De(t),e)}function h5(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new a_(n,r,i,e,dh)}!function f5(){fs(new kr("storage",h5,"PUBLIC").setMultipleInstances(!0)),or(N1,"0.11.1",""),or(N1,"0.11.1","esm2017")}();class _h{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class B1{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new _h(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new _h(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(s="function"==typeof n?o=>n(new _h(o,this,this._ref)):{next:n.next?o=>n.next(new _h(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class V1{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Ur(e,this._service))}get items(){return this._delegate.items.map(e=>new Ur(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ur{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=function d5(t,e){return O1(t,e)}(this._delegate,e);return new Ur(n,this.storage)}get root(){return new Ur(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ur(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new B1(function i5(t,e,n){return function W8(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new S1(t,new ar(e),n)}(t=De(t),e,n)}(this._delegate,e,n),this)}putString(e,n=gn.RAW,r){this._throwIfRoot("putString");const i=t_(n,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new B1(new S1(this._delegate,new ar(i.data,!0),s),this)}listAll(){return function c5(t){return function Q8(t){const e={prefixes:[],items:[]};return M1(t,e).then(()=>e)}(t=De(t))}(this._delegate).then(e=>new V1(e,this.storage))}list(e){return function a5(t,e){return A1(t=De(t),e)}(this._delegate,e||void 0).then(n=>new V1(n,this.storage))}getMetadata(){return function s5(t){return function Y8(t){t._throwIfRoot("getMetadata");const e=b1(t.storage,t._location,Wc());return t.storage.makeRequestWithTokens(e,Hn)}(t=De(t))}(this._delegate)}updateMetadata(e){return function o5(t,e){return function Z8(t,e){t._throwIfRoot("updateMetadata");const n=function O8(t,e,n,r){const s=Lr(e.fullServerUrl(),t.host,t._protocol),a=r_(n,r),u=t.maxOperationRetryTime,l=new cr(s,"PATCH",mh(t,r),u);return l.headers={"Content-Type":"application/json; charset=utf-8"},l.body=a,l.errorHandler=Kc(e),l}(t.storage,t._location,e,Wc());return t.storage.makeRequestWithTokens(n,Hn)}(t=De(t),e)}(this._delegate,e)}getDownloadURL(){return function u5(t){return X8(t=De(t))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function l5(t){return function J8(t){t._throwIfRoot("deleteObject");const e=function P8(t,e){const r=Lr(e.fullServerUrl(),t.host,t._protocol),a=new cr(r,"DELETE",function o(c,u){},t.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=Kc(e),a}(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Hn)}(t=De(t))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw l1(e)}}class j1{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if($1(e))throw $o("ref() expected a child path but got a URL, use refFromURL instead.");return new Ur(L1(this._delegate,e),this)}refFromURL(e){if(!$1(e))throw $o("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Rt.makeFromUrl(e,this._delegate.host)}catch{throw $o("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ur(L1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){!function U1(t,e,n,r={}){!function r5(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken="string"==typeof i?i:PT(i,t.app.options.projectId))}(t,e,n,r)}(this._delegate,e,n,r)}}function $1(t){return/^[A-Za-z]+:\/\//.test(t)}function y5(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new j1(n,r)}!function _5(t){const e={TaskState:Gt,TaskEvent:L8,StringFormat:gn,Storage:j1,Reference:Ur};t.INTERNAL.registerComponent(new kr("storage-compat",y5,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage-compat","0.3.1")}(hh);var B,v5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Br={},c_=c_||{},Z=v5||self;function vh(){}function wh(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Qc(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var u_="closure_uid_"+(1e9*Math.random()>>>0),b5=0;function D5(t,e,n){return t.call.apply(t.bind,arguments)}function C5(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Nt(t,e,n){return(Nt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?D5:C5).apply(null,arguments)}function bh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Dt(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function pi(){this.s=this.s,this.o=this.o}pi.prototype.s=!1,pi.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function w5(t){Object.prototype.hasOwnProperty.call(t,u_)&&t[u_]||(t[u_]=++b5)}(this)},pi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const H1=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function l_(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function q1(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(wh(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function kt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}kt.prototype.h=function(){this.defaultPrevented=!0};var I5=function(){if(!Z.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Z.addEventListener("test",vh,e),Z.removeEventListener("test",vh,e)}catch{}return t}();function Dh(t){return/^[\s\xa0]*$/.test(t)}var z1=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function d_(t,e){return t<e?-1:t>e?1:0}function Ch(){var t=Z.navigator;return t&&(t=t.userAgent)?t:""}function lr(t){return-1!=Ch().indexOf(t)}function h_(t){return h_[" "](t),t}h_[" "]=vh;var Eh,t,S5=lr("Opera"),zo=lr("Trident")||lr("MSIE"),G1=lr("Edge"),f_=G1||zo,W1=lr("Gecko")&&!(-1!=Ch().toLowerCase().indexOf("webkit")&&!lr("Edge"))&&!(lr("Trident")||lr("MSIE"))&&!lr("Edge"),T5=-1!=Ch().toLowerCase().indexOf("webkit")&&!lr("Edge");function K1(){var t=Z.document;return t?t.documentMode:void 0}e:{var p_="",g_=(t=Ch(),W1?/rv:([^\);]+)(\)|;)/.exec(t):G1?/Edge\/([\d\.]+)/.exec(t):zo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):T5?/WebKit\/(\S+)/.exec(t):S5?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(g_&&(p_=g_?g_[1]:""),zo){var m_=K1();if(null!=m_&&m_>parseFloat(p_)){Eh=String(m_);break e}}Eh=p_}var M5={};var O5=Z.document&&zo&&(K1()||parseInt(Eh,10))||void 0;function Yc(t,e){if(kt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(W1){e:{try{h_(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:P5[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Yc.X.h.call(this)}}Dt(Yc,kt);var P5={2:"touch",3:"pen",4:"mouse"};Yc.prototype.h=function(){Yc.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Zc="closure_listenable_"+(1e6*Math.random()|0),R5=0;function N5(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++R5,this.ba=this.ea=!1}function Ih(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function __(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Y1(t){const e={};for(const n in t)e[n]=t[n];return e}const Z1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X1(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<Z1.length;s++)n=Z1[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function xh(t){this.src=t,this.g={},this.h=0}function v_(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=H1(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Ih(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function w_(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ba&&s.listener==e&&s.capture==!!n&&s.ha==r)return i}return-1}xh.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=w_(t,e,r,i);return-1<o?(e=t[o],n||(e.ea=!1)):((e=new N5(e,this.src,s,!!r,i)).ea=n,t.push(e)),e};var b_="closure_lm_"+(1e6*Math.random()|0),D_={};function J1(t,e,n,r,i){if(r&&r.once)return tM(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)J1(t,e[s],n,r,i);return null}return n=x_(n),t&&t[Zc]?t.N(e,n,Qc(r)?!!r.capture:!!r,i):eM(t,e,n,!1,r,i)}function eM(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Qc(i)?!!i.capture:!!i,a=E_(t);if(a||(t[b_]=a=new xh(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function k5(){const e=F5;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)I5||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(rM(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function tM(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)tM(t,e[s],n,r,i);return null}return n=x_(n),t&&t[Zc]?t.O(e,n,Qc(r)?!!r.capture:!!r,i):eM(t,e,n,!0,r,i)}function nM(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)nM(t,e[s],n,r,i);else r=Qc(r)?!!r.capture:!!r,n=x_(n),t&&t[Zc]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=w_(s=t.g[e],n,r,i))&&(Ih(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=E_(t))&&(e=t.g[e.toString()],t=-1,e&&(t=w_(e,n,r,i)),(n=-1<t?e[t]:null)&&C_(n))}function C_(t){if("number"!=typeof t&&t&&!t.ba){var e=t.src;if(e&&e[Zc])v_(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(rM(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=E_(e))?(v_(n,t),0==n.h&&(n.src=null,e[b_]=null)):Ih(t)}}}function rM(t){return t in D_?D_[t]:D_[t]="on"+t}function F5(t,e){if(t.ba)t=!0;else{e=new Yc(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&C_(t),t=n.call(r,e)}return t}function E_(t){return(t=t[b_])instanceof xh?t:null}var I_="__closure_events_fn_"+(1e9*Math.random()>>>0);function x_(t){return"function"==typeof t?t:(t[I_]||(t[I_]=function(e){return t.handleEvent(e)}),t[I_])}function pt(){pi.call(this),this.i=new xh(this),this.P=this,this.I=null}function Ct(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new kt(e,t);else if(e instanceof kt)e.target=e.target||t;else{var i=e;X1(e=new kt(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Sh(o,r,!0,e)&&i}if(i=Sh(o=e.g=t,r,!0,e)&&i,i=Sh(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Sh(o=e.g=n[s],r,!1,e)&&i}function Sh(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==n){var a=o.listener,c=o.ha||o.src;o.ea&&v_(t.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}Dt(pt,pi),pt.prototype[Zc]=!0,pt.prototype.removeEventListener=function(t,e,n,r){nM(this,t,e,n,r)},pt.prototype.M=function(){if(pt.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ih(n[r]);delete t.g[e],t.h--}}this.I=null},pt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},pt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var S_=Z.JSON.stringify;function L5(){var t=oM;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var T_,iM=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new B5,t=>t.reset());class B5{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function V5(t){Z.setTimeout(()=>{throw t},0)}function sM(t,e){T_||function j5(){var t=Z.Promise.resolve(void 0);T_=function(){t.then($5)}}(),M_||(T_(),M_=!0),oM.add(t,e)}var M_=!1,oM=new class U5{constructor(){this.h=this.g=null}add(e,n){const r=iM.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}};function $5(){for(var t;t=L5();){try{t.h.call(t.g)}catch(n){V5(n)}var e=iM;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}M_=!1}function Th(t,e){pt.call(this),this.h=t||1,this.g=e||Z,this.j=Nt(this.lb,this),this.l=Date.now()}function A_(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}function O_(t,e,n){if("function"==typeof t)n&&(t=Nt(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Nt(t.handleEvent,t)}return 2147483647<Number(e)?-1:Z.setTimeout(t,e||0)}function aM(t){t.g=O_(()=>{t.g=null,t.i&&(t.i=!1,aM(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Dt(Th,pt),(B=Th.prototype).ca=!1,B.R=null,B.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ct(this,"tick"),this.ca&&(A_(this),this.start()))}},B.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},B.M=function(){Th.X.M.call(this),A_(this),delete this.g};class H5 extends pi{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:aM(this)}M(){super.M(),this.g&&(Z.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xc(t){pi.call(this),this.h=t,this.g={}}Dt(Xc,pi);var cM=[];function uM(t,e,n,r){Array.isArray(n)||(n&&(cM[0]=n.toString()),n=cM);for(var i=0;i<n.length;i++){var s=J1(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function lM(t){__(t.g,function(e,n){this.g.hasOwnProperty(n)&&C_(e)},t),t.g={}}function Mh(){this.g=!0}function Go(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function W5(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return S_(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Xc.prototype.M=function(){Xc.X.M.call(this),lM(this)},Xc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mh.prototype.Aa=function(){this.g=!1},Mh.prototype.info=function(){};var gs={},dM=null;function Ah(){return dM=dM||new pt}function hM(t){kt.call(this,gs.Pa,t)}function Jc(t){const e=Ah();Ct(e,new hM(e))}function fM(t,e){kt.call(this,gs.STAT_EVENT,t),this.stat=e}function Wt(t){const e=Ah();Ct(e,new fM(e,t))}function pM(t,e){kt.call(this,gs.Qa,t),this.size=e}function eu(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Z.setTimeout(function(){t()},e)}gs.Pa="serverreachability",Dt(hM,kt),gs.STAT_EVENT="statevent",Dt(fM,kt),gs.Qa="timingevent",Dt(pM,kt);var Oh={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},gM={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function P_(){}function yM(){}P_.prototype.h=null;var k_,tu={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function R_(){kt.call(this,"d")}function N_(){kt.call(this,"c")}function Ph(){}function nu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new Xc(this),this.O=K5,this.T=new Th(t=f_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new _M}function _M(){this.i=null,this.g="",this.h=!1}Dt(R_,kt),Dt(N_,kt),Dt(Ph,P_),Ph.prototype.g=function(){return new XMLHttpRequest},Ph.prototype.i=function(){return{}},k_=new Ph;var K5=45e3,F_={},Rh={};function L_(t,e,n){t.K=1,t.v=Lh(Vr(e)),t.s=n,t.P=!0,vM(t,null)}function vM(t,e){t.F=Date.now(),ru(t),t.A=Vr(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),MM(n.i,"t",r),t.C=0,n=t.l.H,t.h=new _M,t.g=JM(t.l,n?e:null,!t.s),0<t.N&&(t.L=new H5(Nt(t.La,t,t.g),t.N)),uM(t.S,t.g,"readystatechange",t.ib),e=t.H?Y1(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Jc(),function q5(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");o=2<=d.length&&"type"==d[1]?o+(l+"=")+u+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.U,t.s)}function wM(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Da}function bM(t,e,n){let i,r=!0;for(;!t.I&&t.C<n.length;){if(i=Q5(t,n),i==Rh){4==e&&(t.o=4,Wt(14),r=!1),Go(t.j,t.m,null,"[Incomplete Response]");break}if(i==F_){t.o=4,Wt(15),Go(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Go(t.j,t.m,i,null),U_(t,i)}wM(t)&&i!=Rh&&i!=F_&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Wt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,(e=t.l).g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),G_(e),e.K=!0,Wt(11))):(Go(t.j,t.m,n,"[Invalid Chunked Response]"),ms(t),iu(t))}function Q5(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Rh:(n=Number(e.substring(n,r)),isNaN(n)?F_:(r+=1)+n>e.length?Rh:(e=e.substr(r,n),t.C=r+n,e))}function ru(t){t.V=Date.now()+t.O,DM(t,t.O)}function DM(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=eu(Nt(t.gb,t),e)}function Nh(t){t.B&&(Z.clearTimeout(t.B),t.B=null)}function iu(t){0==t.l.G||t.I||QM(t.l,t)}function ms(t){Nh(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,A_(t.T),lM(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function U_(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||B_(n.h,t)))if(!t.J&&B_(n.h,t)&&3==n.G){try{var r=n.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break e;Hh(n),jh(n)}z_(n),Wt(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=eu(Nt(n.cb,n),6e3));if(1>=PM(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else _s(n,11)}else if((t.J||n.g==t)&&Hh(n),!Dh(e))for(i=n.Fa.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.I=u[1],n.ka=u[2];const l=u[3];null!=l&&(n.ma=l,n.j.info("VER="+n.ma));const d=u[4];null!=d&&(n.Ca=d,n.j.info("SVER="+n.Ca));const h=u[5];null!=h&&"number"==typeof h&&0<h&&(n.J=r=1.5*h,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.h;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(V_(s,s.h),s.h=null))}if(r.D){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.za=g,Re(r.F,r.D,g))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms"));var o=t;if((r=n).sa=XM(r,r.H?r.ka:null,r.V),o.J){RM(r.h,o);var a=o,c=r.J;c&&a.setTimeout(c),a.B&&(Nh(a),ru(a)),r.g=o}else WM(r);0<n.i.length&&$h(n)}else"stop"!=u[0]&&"close"!=u[0]||_s(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?_s(n,7):q_(n):"noop"!=u[0]&&n.l&&n.l.wa(u),n.A=0)}Jc()}catch{}}function CM(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(wh(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function Z5(t){if(t.oa&&"function"==typeof t.oa)return t.oa();if(!t.W||"function"!=typeof t.W){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(wh(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function Y5(t){if(t.W&&"function"==typeof t.W)return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(wh(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(B=nu.prototype).setTimeout=function(t){this.O=t},B.ib=function(t){t=t.target;const e=this.L;e&&3==jr(t)?e.l():this.La(t)},B.La=function(t){try{if(t==this.g)e:{const l=jr(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>l)&&(3!=l||f_||this.g&&(this.h.h||this.g.fa()||jM(this.g)))){this.I||4!=l||7==e||Jc(),Nh(this);var n=this.g.aa();this.Y=n;t:if(wM(this)){var r=jM(this.g);t="";var i=r.length,s=4==jr(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ms(this),iu(this);var o="";break t}this.h.i=new Z.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==n,function z5(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.U,l,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Dh(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,Wt(12),ms(this),iu(this);break e}Go(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,U_(this,n)}this.P?(bM(this,l,o),f_&&this.i&&3==l&&(uM(this.S,this.T,"tick",this.hb),this.T.start())):(Go(this.j,this.m,o,null),U_(this,o)),4==l&&ms(this),this.i&&!this.I&&(4==l?QM(this.l,this):(this.i=!1,ru(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Wt(12)):(this.o=0,Wt(13)),ms(this),iu(this)}}}catch{}},B.hb=function(){if(this.g){var t=jr(this.g),e=this.g.fa();this.C<e.length&&(Nh(this),bM(this,t,e),this.i&&4!=t&&ru(this))}},B.cancel=function(){this.I=!0,ms(this)},B.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(function G5(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Jc(),Wt(17)),ms(this),this.o=2,iu(this)):DM(this,this.V-t)};var EM=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ys(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ys){this.h=void 0!==e?e:t.h,kh(this,t.j),this.s=t.s,this.g=t.g,Fh(this,t.m),this.l=t.l,e=t.i;var n=new au;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),IM(this,n),this.o=t.o}else t&&(n=String(t).match(EM))?(this.h=!!e,kh(this,n[1]||"",!0),this.s=su(n[2]||""),this.g=su(n[3]||"",!0),Fh(this,n[4]),this.l=su(n[5]||"",!0),IM(this,n[6]||"",!0),this.o=su(n[7]||"")):(this.h=!!e,this.i=new au(null,this.h))}function Vr(t){return new ys(t)}function kh(t,e,n){t.j=n?su(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Fh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function IM(t,e,n){e instanceof au?(t.i=e,function i6(t,e){e&&!t.j&&(gi(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(SM(this,r),MM(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=ou(e,n6)),t.i=new au(e,t.h))}function Re(t,e,n){t.i.set(e,n)}function Lh(t){return Re(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function su(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ou(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,J5),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function J5(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ys.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ou(e,xM,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(ou(e,xM,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(ou(n,"/"==n.charAt(0)?t6:e6,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ou(n,r6)),t.join("")};var xM=/[#\/\?@]/g,e6=/[#\?:]/g,t6=/[#\?]/g,n6=/[#\?@]/g,r6=/#/g;function au(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function gi(t){t.g||(t.g=new Map,t.h=0,t.i&&function X5(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function SM(t,e){gi(t),e=Wo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function TM(t,e){return gi(t),e=Wo(t,e),t.g.has(e)}function MM(t,e,n){SM(t,e),0<n.length&&(t.i=null,t.g.set(Wo(t,e),l_(n)),t.h+=n.length)}function Wo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function AM(t){this.l=t||o6,t=Z.PerformanceNavigationTiming?0<(t=Z.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Z.g&&Z.g.Ga&&Z.g.Ga()&&Z.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(B=au.prototype).add=function(t,e){gi(this),this.i=null,t=Wo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},B.forEach=function(t,e){gi(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},B.oa=function(){gi(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},B.W=function(t){gi(this);let e=[];if("string"==typeof t)TM(this,t)&&(e=e.concat(this.g.get(Wo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},B.set=function(t,e){return gi(this),this.i=null,TM(this,t=Wo(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},B.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},B.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var o6=10;function OM(t){return!!t.h||!!t.g&&t.g.size>=t.j}function PM(t){return t.h?1:t.g?t.g.size:0}function B_(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function V_(t,e){t.g?t.g.add(e):t.h=e}function RM(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function NM(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return l_(t.i)}function j_(){}function a6(){this.g=new j_}function c6(t,e,n){const r=n||"";try{CM(t,function(i,s){let o=i;Qc(i)&&(o=S_(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Uh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function cu(t){this.l=t.ac||null,this.j=t.jb||!1}function Bh(t,e){pt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=$_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}AM.prototype.cancel=function(){if(this.i=NM(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},j_.prototype.stringify=function(t){return Z.JSON.stringify(t,void 0)},j_.prototype.parse=function(t){return Z.JSON.parse(t,void 0)},Dt(cu,P_),cu.prototype.g=function(){return new Bh(this.l,this.j)},cu.prototype.i=function(t){return function(){return t}}({}),Dt(Bh,pt);var $_=0;function kM(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}function uu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,lu(t)}function lu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(B=Bh.prototype).open=function(t,e){if(this.readyState!=$_)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,lu(this)},B.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Z).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},B.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,uu(this)),this.readyState=$_},B.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,lu(this)),this.g&&(this.readyState=3,lu(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Z.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kM(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))},B.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?uu(this):lu(this),3==this.readyState&&kM(this)}},B.Va=function(t){this.g&&(this.response=this.responseText=t,uu(this))},B.Ua=function(t){this.g&&(this.response=t,uu(this))},B.ga=function(){this.g&&uu(this)},B.setRequestHeader=function(t,e){this.v.append(t,e)},B.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},B.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Bh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var l6=Z.JSON.parse;function $e(t){pt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=FM,this.K=this.L=!1}Dt($e,pt);var FM="",d6=/^https?$/i,h6=["POST","PUT"];function LM(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,UM(t),Vh(t)}function UM(t){t.D||(t.D=!0,Ct(t,"complete"),Ct(t,"error"))}function BM(t){if(t.h&&typeof c_<"u"&&(!t.C[1]||4!=jr(t)||2!=t.aa()))if(t.v&&4==jr(t))O_(t.Ha,0,t);else if(Ct(t,"readystatechange"),4==jr(t)){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===a){var i=String(t.H).match(EM)[1]||null;if(!i&&Z.self&&Z.self.location){var s=Z.self.location.protocol;i=s.substr(0,s.length-1)}r=!d6.test(i?i.toLowerCase():"")}n=r}if(n)Ct(t,"complete"),Ct(t,"success");else{t.m=6;try{var o=2<jr(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",UM(t)}}finally{Vh(t)}}}function Vh(t,e){if(t.g){VM(t);const n=t.g,r=t.C[0]?vh:null;t.g=null,t.C=null,e||Ct(t,"ready");try{n.onreadystatechange=r}catch{}}}function VM(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Z.clearTimeout(t.A),t.A=null)}function jr(t){return t.g?t.g.readyState:0}function jM(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case FM:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function $M(t){let e="";return __(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function H_(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=$M(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Re(t,e,n))}function du(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function HM(t){this.Ca=0,this.i=[],this.j=new Mh,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=du("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=du("baseRetryDelayMs",5e3,t),this.bb=du("retryDelaySeedMs",1e4,t),this.$a=du("forwardChannelMaxRetries",2,t),this.ta=du("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new AM(t&&t.concurrentRequestLimit),this.Fa=new a6,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function q_(t){if(qM(t),3==t.G){var e=t.U++,n=Vr(t.F);Re(n,"SID",t.I),Re(n,"RID",e),Re(n,"TYPE","terminate"),hu(t,n),(e=new nu(t,t.j,e,void 0)).K=2,e.v=Lh(Vr(n)),n=!1,Z.navigator&&Z.navigator.sendBeacon&&(n=Z.navigator.sendBeacon(e.v.toString(),"")),!n&&Z.Image&&((new Image).src=e.v,n=!0),n||(e.g=JM(e.l,null),e.g.da(e.v)),e.F=Date.now(),ru(e)}ZM(t)}function jh(t){t.g&&(G_(t),t.g.cancel(),t.g=null)}function qM(t){jh(t),t.u&&(Z.clearTimeout(t.u),t.u=null),Hh(t),t.h.cancel(),t.m&&("number"==typeof t.m&&Z.clearTimeout(t.m),t.m=null)}function $h(t){OM(t.h)||t.m||(t.m=!0,sM(t.Ja,t),t.C=0)}function zM(t,e){var n;n=e?e.m:t.U++;const r=Vr(t.F);Re(r,"SID",t.I),Re(r,"RID",n),Re(r,"AID",t.T),hu(t,r),t.o&&t.s&&H_(r,t.o,t.s),n=new nu(t,t.j,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=GM(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),V_(t.h,n),L_(n,r,e)}function hu(t,e){t.ia&&__(t.ia,function(n,r){Re(e,r,n)}),t.l&&CM({},function(n,r){Re(e,r,n)})}function GM(t,e,n){n=Math.min(t.i.length,n);var r=t.l?Nt(t.l.Ra,t.l,t):null;e:{var i=t.i;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let u=i[c].h;const l=i[c].g;if(u-=s,0>u)s=Math.max(0,i[c].h-100),a=!1;else try{c6(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,r}function WM(t){t.g||t.u||(t.Z=1,sM(t.Ia,t),t.A=0)}function z_(t){return!(t.g||t.u||3<=t.A||(t.Z++,t.u=eu(Nt(t.Ia,t),YM(t,t.A)),t.A++,0))}function G_(t){null!=t.B&&(Z.clearTimeout(t.B),t.B=null)}function KM(t){t.g=new nu(t,t.j,"rpc",t.Z),null===t.o&&(t.g.H=t.s),t.g.N=0;var e=Vr(t.sa);Re(e,"RID","rpc"),Re(e,"SID",t.I),Re(e,"CI",t.L?"0":"1"),Re(e,"AID",t.T),Re(e,"TYPE","xmlhttp"),hu(t,e),t.o&&t.s&&H_(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=Lh(Vr(e)),n.s=null,n.P=!0,vM(n,t)}function Hh(t){null!=t.v&&(Z.clearTimeout(t.v),t.v=null)}function QM(t,e){var n=null;if(t.g==e){Hh(t),G_(t),t.g=null;var r=2}else{if(!B_(t.h,e))return;n=e.D,RM(t.h,e),r=1}if(0!=t.G)if(t.pa=e.Y,e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Ct(r=Ah(),new pM(r,n)),$h(t)}else WM(t);else if(3==(i=e.o)||0==i&&0<t.pa||!(1==r&&function p6(t,e){return!(PM(t.h)>=t.h.j-(t.m?1:0)||(t.m?(t.i=e.D.concat(t.i),0):1==t.G||2==t.G||t.C>=(t.Za?0:t.$a)||(t.m=eu(Nt(t.Ja,t,e),YM(t,t.C)),t.C++,0)))}(t,e)||2==r&&z_(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:_s(t,5);break;case 4:_s(t,10);break;case 3:_s(t,6);break;default:_s(t,2)}}function YM(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function _s(t,e){if(t.j.info("Error code "+e),2==e){var n=null;t.l&&(n=null);var r=Nt(t.kb,t);n||(n=new ys("//www.google.com/images/cleardot.gif"),Z.location&&"http"==Z.location.protocol||kh(n,"https"),Lh(n)),function u6(t,e){const n=new Mh;if(Z.Image){const r=new Image;r.onload=bh(Uh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=bh(Uh,n,r,"TestLoadImage: error",!1,e),r.onabort=bh(Uh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=bh(Uh,n,r,"TestLoadImage: timeout",!1,e),Z.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Wt(2);t.G=0,t.l&&t.l.va(e),ZM(t),qM(t)}function ZM(t){if(t.G=0,t.la=[],t.l){const e=NM(t.h);(0!=e.length||0!=t.i.length)&&(q1(t.la,e),q1(t.la,t.i),t.h.i.length=0,l_(t.i),t.i.length=0),t.l.ua()}}function XM(t,e,n){var r=n instanceof ys?Vr(n):new ys(n,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Fh(r,r.m);else{var i=Z.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ys(null,void 0);r&&kh(s,r),e&&(s.g=e),i&&Fh(s,i),n&&(s.l=n),r=s}return e=t.za,(n=t.D)&&e&&Re(r,n,e),Re(r,"VER",t.ma),hu(t,r),r}function JM(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new $e(n&&t.Da&&!t.ra?new cu({jb:!0}):t.ra)).Ka(t.H),e}function eA(){}function qh(){if(zo&&!(10<=Number(O5)))throw Error("Environmental error: no available transport.")}function mn(t,e){pt.call(this),this.g=new HM(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!Dh(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Dh(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Ko(this)}function tA(t){R_.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function nA(){N_.call(this),this.status=1}function Ko(t){this.g=t}(B=$e.prototype).Ka=function(t){this.L=t},B.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():k_.g(),this.C=function mM(t){return t.h||(t.h=t.i())}(this.u?this.u:k_),this.g.onreadystatechange=Nt(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){return void LM(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=Z.FormData&&t instanceof Z.FormData,!(0<=H1(h6,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{VM(this),0<this.B&&((this.K=function f6(t){return zo&&function A5(){return function x5(t){var e=M5;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}(function(){let t=0;const e=z1(String(Eh)).split("."),n=z1("9").split("."),r=Math.max(e.length,n.length);for(let o=0;0==t&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;t=d_(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||d_(0==i[2].length,0==s[2].length)||d_(i[2],s[2]),i=i[3],s=s[3]}while(0==t)}return 0<=t})}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nt(this.qa,this)):this.A=O_(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){LM(this,s)}},B.qa=function(){typeof c_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ct(this,"timeout"),this.abort(8))},B.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ct(this,"complete"),Ct(this,"abort"),Vh(this))},B.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vh(this,!0)),$e.X.M.call(this)},B.Ha=function(){this.s||(this.F||this.v||this.l?BM(this):this.fb())},B.fb=function(){BM(this)},B.aa=function(){try{return 2<jr(this)?this.g.status:-1}catch{return-1}},B.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},B.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),l6(e)}},B.Ea=function(){return this.m},B.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(B=HM.prototype).ma=8,B.G=1,B.Ja=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new nu(this,this.j,t,void 0);let s=this.s;if(this.S&&(s?(s=Y1(s),X1(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=GM(this,i,e),Re(n=Vr(this.F),"RID",t),Re(n,"CVER",22),this.D&&Re(n,"X-HTTP-Session-Id",this.D),hu(this,n),s&&(this.N?e="headers="+encodeURIComponent(String($M(s)))+"&"+e:this.o&&H_(n,this.o,s)),V_(this.h,i),this.Ya&&Re(n,"TYPE","init"),this.O?(Re(n,"$req",e),Re(n,"SID","null"),i.Z=!0,L_(i,n,null)):L_(i,n,e),this.G=2}}else 3==this.G&&(t?zM(this,t):0==this.i.length||OM(this.h)||zM(this))},B.Ia=function(){if(this.u=null,KM(this),this.$&&!(this.K||null==this.g||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=eu(Nt(this.eb,this),t)}},B.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Wt(10),jh(this),KM(this))},B.cb=function(){null!=this.v&&(this.v=null,jh(this),z_(this),Wt(19))},B.kb=function(t){t?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))},(B=eA.prototype).xa=function(){},B.wa=function(){},B.va=function(){},B.ua=function(){},B.Ra=function(){},qh.prototype.g=function(t,e){return new mn(t,e)},Dt(mn,pt),mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;Wt(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=XM(t,null,t.V),$h(t)},mn.prototype.close=function(){q_(this.g)},mn.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=S_(t),t=n);e.i.push(new class{constructor(t,e){this.h=t,this.g=e}}(e.ab++,t)),3==e.G&&$h(e)},mn.prototype.M=function(){this.g.l=null,delete this.j,q_(this.g),delete this.g,mn.X.M.call(this)},Dt(tA,R_),Dt(nA,N_),Dt(Ko,eA),Ko.prototype.xa=function(){Ct(this.g,"a")},Ko.prototype.wa=function(t){Ct(this.g,new tA(t))},Ko.prototype.va=function(t){Ct(this.g,new nA)},Ko.prototype.ua=function(){Ct(this.g,"b")},qh.prototype.createWebChannel=qh.prototype.g,mn.prototype.send=mn.prototype.u,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Oh.NO_ERROR=0,Oh.TIMEOUT=8,Oh.HTTP_ERROR=6,gM.COMPLETE="complete",yM.EventType=tu,tu.OPEN="a",tu.CLOSE="b",tu.ERROR="c",tu.MESSAGE="d",pt.prototype.listen=pt.prototype.N,$e.prototype.listenOnce=$e.prototype.O,$e.prototype.getLastError=$e.prototype.Oa,$e.prototype.getLastErrorCode=$e.prototype.Ea,$e.prototype.getStatus=$e.prototype.aa,$e.prototype.getResponseJson=$e.prototype.Sa,$e.prototype.getResponseText=$e.prototype.fa,$e.prototype.send=$e.prototype.da,$e.prototype.setWithCredentials=$e.prototype.Ka;var g6=Br.createWebChannelTransport=function(){return new qh},m6=Br.getStatEventTarget=function(){return Ah()},W_=Br.ErrorCode=Oh,y6=Br.EventType=gM,_6=Br.Event=gs,rA=Br.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},v6=Br.FetchXmlHttpFactory=cu,zh=Br.WebChannel=yM,w6=Br.XhrIo=$e;const iA="@firebase/firestore";class gt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");let Qo="9.17.1";const mi=new Ly("@firebase/firestore");function K_(){return mi.logLevel}function S(t,...e){if(mi.logLevel<=me.DEBUG){const n=e.map(Q_);mi.debug(`Firestore (${Qo}): ${t}`,...n)}}function Qe(t,...e){if(mi.logLevel<=me.ERROR){const n=e.map(Q_);mi.error(`Firestore (${Qo}): ${t}`,...n)}}function vs(t,...e){if(mi.logLevel<=me.WARN){const n=e.map(Q_);mi.warn(`Firestore (${Qo}): ${t}`,...n)}}function Q_(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function F(t="Unexpected state"){const e=`FIRESTORE (${Qo}) INTERNAL ASSERTION FAILED: `+t;throw Qe(e),new Error(e)}function U(t,e){t||F()}function O(t,e){return t}const w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class E extends ui{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class lt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class sA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class C6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class E6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class I6{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let o=new lt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new lt,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(v(function*(){yield u.promise,yield s(r.currentUser)}))},c=u=>{S("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(S("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new lt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(S("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(U("string"==typeof r.accessToken),new sA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return U(null===e||"string"==typeof e),new gt(e)}}class x6{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(U(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class S6{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i}getToken(){return Promise.resolve(new x6(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class T6{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=s=>{null!=s.error&&S("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,S("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{S("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):S("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(U("string"==typeof n.token),this.A=n.token,new oA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function M6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class aA{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=M6(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function X(t,e){return t<e?-1:t>e?1:0}function Yo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function cA(t){return t+"\0"}class Ne{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new E(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new E(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new E(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new E(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ne.fromMillis(Date.now())}static fromDate(e){return Ne.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ne(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?X(this.nanoseconds,e.nanoseconds):X(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class j{constructor(e){this.timestamp=e}static fromTimestamp(e){return new j(e)}static min(){return new j(new Ne(0,0))}static max(){return new j(new Ne(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class fu{constructor(e,n,r){void 0===n?n=0:n>e.length&&F(),void 0===r?r=e.length-n:r>e.length-n&&F(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===fu.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class pe extends fu{construct(e,n,r){return new pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new E(w.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const A6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends fu{construct(e,n,r){return new He(e,n,r)}static isValidIdentifier(e){return A6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new He(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new E(w.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new E(w.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new E(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new E(w.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new He(n)}static emptyPath(){return new He([])}}class A{constructor(e){this.path=e}static fromPath(e){return new A(pe.fromString(e))}static fromName(e){return new A(pe.fromString(e).popFirst(5))}static empty(){return new A(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pe.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new A(new pe(e.slice()))}}class Gh{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Y_(t){return t.fields.find(e=>2===e.kind)}function ws(t){return t.fields.filter(e=>2!==e.kind)}Gh.UNKNOWN_ID=-1;class Wh{constructor(e,n){this.fieldPath=e,this.kind=n}}class pu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new pu(0,yn.min())}}function uA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=j.fromTimestamp(1e9===r?new Ne(n+1,0):new Ne(n,r));return new yn(i,A.empty(),e)}function lA(t){return new yn(t.readTime,t.key,-1)}class yn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new yn(j.min(),A.empty(),-1)}static max(){return new yn(j.max(),A.empty(),-1)}}function Z_(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=A.comparator(t.documentKey,e.documentKey),0!==n?n:X(t.largestBatchId,e.largestBatchId))}const dA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function yi(t){return X_.apply(this,arguments)}function X_(){return X_=v(function*(t){if(t.code!==w.FAILED_PRECONDITION||t.message!==dA)throw t;S("LocalStore","Unexpectedly lost primary lease")}),X_.apply(this,arguments)}class _{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&F(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new _((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof _?n:_.resolve(n)}catch(n){return _.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):_.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):_.reject(n)}static resolve(e){return new _((n,r)=>{n(e)})}static reject(e){return new _((n,r)=>{r(e)})}static waitFor(e){return new _((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=_.resolve(!1);for(const r of e)n=n.next(i=>i?_.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new _((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const u=c;n(e[u]).next(l=>{o[u]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new _((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}class Kh{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.P=new lt,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{n.error?this.P.reject(new gu(e,n.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=J_(r.target.error);this.P.reject(new gu(e,i))}}static open(e,n,r,i){try{return new Kh(n,e.transaction(i,r))}catch(s){throw new gu(n,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(S("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new N6(n)}}class qn{constructor(e,n,r){this.name=e,this.version=n,this.S=r,12.2===qn.D(ls())&&Qe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return S("SimpleDb","Removing database:",e),bs(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!NT())return!1;if(qn.N())return!0;const e=ls(),n=qn.D(e),r=0<n&&n<10,i=qn.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var n=this;return v(function*(){return n.db||(S("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const s=indexedDB.open(n.name,n.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new gu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new E(w.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new E(w.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new gu(e,a))},s.onupgradeneeded=o=>{S("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',o.oldVersion),n.S.$(o.target.result,s.transaction,o.oldVersion,n.version).next(()=>{S("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var s=this;return v(function*(){const o="readonly"===n;let a=0;for(;;){++a;try{s.db=yield s.F(e);const c=Kh.open(s.db,e,o?"readonly":"readwrite",r),u=i(c).next(l=>(c.V(),l)).catch(l=>(c.abort(l),_.reject(l))).toPromise();return u.catch(()=>{}),yield c.v,u}catch(c){const u=c,l="FirebaseError"!==u.name&&a<3;if(S("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),s.close(),!l)return Promise.reject(u)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class R6{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return bs(this.q.delete())}}class gu extends E{constructor(e,n){super(w.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function _i(t){return"IndexedDbTransactionError"===t.name}class N6{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(S("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(S("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),bs(r)}add(e){return S("SimpleDb","ADD",this.store.name,e,e),bs(this.store.add(e))}get(e){return bs(this.store.get(e)).next(n=>(void 0===n&&(n=null),S("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return S("SimpleDb","DELETE",this.store.name,e),bs(this.store.delete(e))}count(){return S("SimpleDb","COUNT",this.store.name),bs(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.H(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new _((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}J(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new _((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Y(e,n){S("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}Z(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}tt(e){const n=this.cursor({});return new _((r,i)=>{n.onerror=s=>{const o=J_(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new _((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const c=new R6(a),u=n(a.primaryKey,a.value,c);if(u instanceof _){const l=u.catch(d=>(c.done(),_.reject(d)));r.push(l)}c.isDone?i():null===c.G?a.continue():a.continue(c.G)}}).next(()=>_.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function bs(t){return new _((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=J_(r.target.error);n(i)}})}let fA=!1;function J_(t){const e=qn.D(ls());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new E("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fA||(fA=!0,setTimeout(()=>{throw r},0)),r}}return t}class k6{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var n=this;S("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,v(function*(){n.task=null;try{S("IndexBackiller",`Documents written: ${yield n.et.st()}`)}catch(r){_i(r)?S("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield yi(r)}yield n.nt(6e4)}))}}class F6{constructor(e,n){this.localStore=e,this.persistence=n}st(e=50){var n=this;return v(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.it(r,e))})()}it(e,n){const r=new Set;let i=n,s=!0;return _.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return S("IndexBackiller",`Processing collection: ${o}`),this.rt(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}rt(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ot(i,s)).next(a=>(S("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ot(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=lA(s);Z_(o,r)>0&&(r=o)}),new yn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let _n=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ct&&this.ct(n),n}}return t.at=-1,t})();class L6{constructor(e,n,r,i,s,o,a,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=c}}class vi{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new vi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof vi&&e.projectId===this.projectId&&e.database===this.database}}function pA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ds(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function gA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function mu(t){return null==t}function yu(t){return 0===t&&1/t==-1/0}function mA(t){return"number"==typeof t&&Number.isInteger(t)&&!yu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new dt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return X(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const B6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wi(t){if(U(!!t),"string"==typeof t){let e=0;const n=B6.exec(t);if(U(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(t.seconds),nanos:qe(t.nanos)}}function qe(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Cs(t){return"string"==typeof t?dt.fromBase64String(t):dt.fromUint8Array(t)}function ev(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function yA(t){const e=t.mapValue.fields.__previous_value__;return ev(e)?yA(e):e}function _u(t){const e=wi(t.mapValue.fields.__local_write_time__.timestampValue);return new Ne(e.seconds,e.nanos)}const bi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Qh={nullValue:"NULL_VALUE"};function Es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ev(t)?4:bA(t)?9007199254740991:10:F()}function dr(t,e){if(t===e)return!0;const n=Es(t);if(n!==Es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _u(t).isEqual(_u(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=wi(r.timestampValue),o=wi(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,Cs(t.bytesValue).isEqual(Cs(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return qe(r.geoPointValue.latitude)===qe(i.geoPointValue.latitude)&&qe(r.geoPointValue.longitude)===qe(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return qe(r.integerValue)===qe(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=qe(r.doubleValue),o=qe(i.doubleValue);return s===o?yu(s)===yu(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Yo(t.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(pA(s)!==pA(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!dr(s[a],o[a])))return!1;return!0}(t,e);default:return F()}var i}function vu(t,e){return void 0!==(t.values||[]).find(n=>dr(n,e))}function Di(t,e){if(t===e)return 0;const n=Es(t),r=Es(e);if(n!==r)return X(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return X(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=qe(i.integerValue||i.doubleValue),a=qe(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return _A(t.timestampValue,e.timestampValue);case 4:return _A(_u(t),_u(e));case 5:return X(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Cs(i),a=Cs(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let c=0;c<o.length&&c<a.length;c++){const u=X(o[c],a[c]);if(0!==u)return u}return X(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=X(qe(i.latitude),qe(s.latitude));return 0!==o?o:X(qe(i.longitude),qe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let c=0;c<o.length&&c<a.length;++c){const u=Di(o[c],a[c]);if(u)return u}return X(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===bi.mapValue&&s===bi.mapValue)return 0;if(i===bi.mapValue)return 1;if(s===bi.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),c=s.fields||{},u=Object.keys(c);a.sort(),u.sort();for(let l=0;l<a.length&&l<u.length;++l){const d=X(a[l],u[l]);if(0!==d)return d;const h=Di(o[a[l]],c[u[l]]);if(0!==h)return h}return X(a.length,u.length)}(t.mapValue,e.mapValue);default:throw F()}}function _A(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return X(t,e);const n=wi(t),r=wi(e),i=X(n.seconds,r.seconds);return 0!==i?i:X(n.nanos,r.nanos)}function Zo(t){return tv(t)}function tv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=wi(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Cs(t.bytesValue).toBase64():"referenceValue"in t?A.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=tv(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${tv(r.fields[a])}`;return s+"}"}(t.mapValue):F();var e}function Is(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function nv(t){return!!t&&"integerValue"in t}function wu(t){return!!t&&"arrayValue"in t}function vA(t){return!!t&&"nullValue"in t}function wA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yh(t){return!!t&&"mapValue"in t}function bu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ds(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=bu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function bA(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function V6(t){return"nullValue"in t?Qh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Is(vi.empty(),A.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:F()}function j6(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Is(vi.empty(),A.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?bi:F()}function DA(t,e){const n=Di(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function CA(t,e){const n=Di(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class Ci{constructor(e,n){this.position=e,this.inclusive=n}}function EA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?A.comparator(A.fromName(o.referenceValue),n.key):Di(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function IA(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!dr(t.position[n],e.position[n]))return!1;return!0}class xA{}class ue extends xA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new $6(e,n,r):"array-contains"===n?new z6(e,r):"in"===n?new PA(e,r):"not-in"===n?new G6(e,r):"array-contains-any"===n?new W6(e,r):new ue(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new H6(e,r):new q6(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Di(n,this.value)):null!==n&&Es(this.value)===Es(n)&&this.matchesComparison(Di(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return F()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class be extends xA{constructor(e,n){super(),this.filters=e,this.op=n,this.ht=null}static create(e,n){return new be(e,n)}matches(e){return Xo(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(n=>n.isInequality());return null!==e?e.field:null}lt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Xo(t){return"and"===t.op}function rv(t){return"or"===t.op}function iv(t){return SA(t)&&Xo(t)}function SA(t){for(const e of t.filters)if(e instanceof be)return!1;return!0}function sv(t){if(t instanceof ue)return t.field.canonicalString()+t.op.toString()+Zo(t.value);if(iv(t))return t.filters.map(e=>sv(e)).join(",");{const e=t.filters.map(n=>sv(n)).join(",");return`${t.op}(${e})`}}function TA(t,e){return t instanceof ue?(n=t,(r=e)instanceof ue&&n.op===r.op&&n.field.isEqual(r.field)&&dr(n.value,r.value)):t instanceof be?function(n,r){return r instanceof be&&n.op===r.op&&n.filters.length===r.filters.length&&n.filters.reduce((i,s,o)=>i&&TA(s,r.filters[o]),!0)}(t,e):void F();var n,r}function MA(t,e){const n=t.filters.concat(e);return be.create(n,t.op)}function AA(t){return t instanceof ue?`${(e=t).field.canonicalString()} ${e.op} ${Zo(e.value)}`:t instanceof be?function(e){return e.op.toString()+" {"+e.getFilters().map(AA).join(" ,")+"}"}(t):"Filter";var e}class $6 extends ue{constructor(e,n,r){super(e,n,r),this.key=A.fromName(r.referenceValue)}matches(e){const n=A.comparator(e.key,this.key);return this.matchesComparison(n)}}class H6 extends ue{constructor(e,n){super(e,"in",n),this.keys=OA(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class q6 extends ue{constructor(e,n){super(e,"not-in",n),this.keys=OA(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function OA(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>A.fromName(r.referenceValue))}class z6 extends ue{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wu(n)&&vu(n.arrayValue,this.value)}}class PA extends ue{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&vu(this.value.arrayValue,n)}}class G6 extends ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!vu(this.value.arrayValue,n)}}class W6 extends ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>vu(this.value.arrayValue,r))}}class Jo{constructor(e,n="asc"){this.field=e,this.dir=n}}function K6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class ze{constructor(e,n){this.comparator=e,this.root=n||Et.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Et.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zh(this.root,e,this.comparator,!0)}}class Zh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Et{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Et.RED,this.left=i??Et.EMPTY,this.right=s??Et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Et(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return Et.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw F();const e=this.left.check();if(e!==this.right.check())throw F();return e+(this.isRed()?0:1)}}Et.EMPTY=null,Et.RED=!0,Et.BLACK=!1,Et.EMPTY=new class{constructor(){this.size=0}get key(){throw F()}get value(){throw F()}get color(){throw F()}get left(){throw F()}get right(){throw F()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Et(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ce{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new RA(this.data.getIterator())}getIteratorFrom(e){return new RA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ce)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ce(this.comparator);return n.data=e,n}}class RA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ea(t){return t.hasNext()?t.getNext():void 0}class rn{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new rn([])}unionWith(e){let n=new Ce(He.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class It{constructor(e){this.value=e}static empty(){return new It({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bu(n)}setAll(e){let n=He.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=bu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Yh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Yh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ds(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new It(bu(this.value))}}function NA(t){const e=[];return Ds(t.fields,(n,r)=>{const i=new He([n]);if(Yh(r)){const s=NA(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new rn(e)}class Ae{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ae(e,0,j.min(),j.min(),j.min(),It.empty(),0)}static newFoundDocument(e,n,r,i){return new Ae(e,1,n,j.min(),r,i,0)}static newNoDocument(e,n){return new Ae(e,2,n,j.min(),j.min(),It.empty(),0)}static newUnknownDocument(e,n){return new Ae(e,3,n,j.min(),j.min(),It.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(j.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=j.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ae&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ae(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Q6{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ft=null}}function ov(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Q6(t,e,n,r,i,s,o)}function xs(t){const e=O(t);if(null===e.ft){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>sv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),mu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Zo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Zo(r)).join(",")),e.ft=n}return e.ft}function Du(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!K6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!TA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!IA(t.startAt,e.startAt)&&IA(t.endAt,e.endAt)}function Xh(t){return A.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function Jh(t,e){return t.filters.filter(n=>n instanceof ue&&n.field.isEqual(e))}function kA(t,e,n){let r=Qh,i=!0;for(const s of Jh(t,e)){let o=Qh,a=!0;switch(s.op){case"<":case"<=":o=V6(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Qh}DA({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];DA({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}function FA(t,e,n){let r=bi,i=!0;for(const s of Jh(t,e)){let o=bi,a=!0;switch(s.op){case">=":case">":o=j6(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=bi}CA({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];CA({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}class $r{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.dt=null,this._t=null}}function LA(t,e,n,r,i,s,o,a){return new $r(t,e,n,r,i,s,o,a)}function ta(t){return new $r(t)}function UA(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function av(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ef(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}function cv(t){return null!==t.collectionGroup}function Ss(t){const e=O(t);if(null===e.dt){e.dt=[];const n=ef(e),r=av(e);if(null!==n&&null===r)n.isKeyField()||e.dt.push(new Jo(n)),e.dt.push(new Jo(He.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.dt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Jo(He.keyField(),s))}}}return e.dt}function Kt(t){const e=O(t);if(!e._t)if("F"===e.limitType)e._t=ov(e.path,e.collectionGroup,Ss(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Ss(e))n.push(new Jo(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Ci(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ci(e.startAt.position,e.startAt.inclusive):null;e._t=ov(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function uv(t,e){e.getFirstInequalityField(),ef(t);const n=t.filters.concat([e]);return new $r(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tf(t,e,n){return new $r(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Cu(t,e){return Du(Kt(t),Kt(e))&&t.limitType===e.limitType}function BA(t){return`${xs(Kt(t))}|lt:${t.limitType}`}function lv(t){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>AA(r)).join(", ")}]`),mu(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Zo(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Zo(r)).join(",")),`Target(${n})`}(Kt(t))}; limitType=${t.limitType})`}function Eu(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):A.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of Ss(n))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&(r=e,!((n=t).startAt&&!function(i,s,o){const a=EA(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Ss(n),r)||n.endAt&&!function(i,s,o){const a=EA(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Ss(n),r)));var n,r}function VA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function jA(t){return(e,n)=>{let r=!1;for(const i of Ss(t)){const s=Y6(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Y6(t,e,n){const r=t.field.isKeyField()?A.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),c=o.data.field(i);return null!==a&&null!==c?Di(a,c):F()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return F()}}function $A(t,e){if(t.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yu(e)?"-0":e}}function HA(t){return{integerValue:""+t}}function qA(t,e){return mA(e)?HA(e):$A(t,e)}class nf{constructor(){this._=void 0}}function Z6(t,e,n){return t instanceof na?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof Ts?GA(t,e):t instanceof Ms?WA(t,e):function(r,i){const s=zA(r,i),o=KA(s)+KA(r.gt);return nv(s)&&nv(r.gt)?HA(o):$A(r.yt,o)}(t,e)}function X6(t,e,n){return t instanceof Ts?GA(t,e):t instanceof Ms?WA(t,e):n}function zA(t,e){return t instanceof ra?nv(n=e)||(r=n)&&"doubleValue"in r?e:{integerValue:0}:null;var r,n}class na extends nf{}class Ts extends nf{constructor(e){super(),this.elements=e}}function GA(t,e){const n=QA(e);for(const r of t.elements)n.some(i=>dr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ms extends nf{constructor(e){super(),this.elements=e}}function WA(t,e){let n=QA(e);for(const r of t.elements)n=n.filter(i=>!dr(i,r));return{arrayValue:{values:n}}}class ra extends nf{constructor(e,n){super(),this.yt=e,this.gt=n}}function KA(t){return qe(t.integerValue||t.doubleValue)}function QA(t){return wu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Iu{constructor(e,n){this.field=e,this.transform=n}}class e7{constructor(e,n){this.version=e,this.transformResults=n}}class ke{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ke}static exists(e){return new ke(void 0,e)}static updateTime(e){return new ke(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rf(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class sf{}function YA(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new sa(t.key,ke.none()):new ia(t.key,t.data,ke.none());{const n=t.data,r=It.empty();let i=new Ce(He.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Hr(t.key,r,new rn(i.toArray()),ke.none())}}function t7(t,e,n){t instanceof ia?function(r,i,s){const o=r.value.clone(),a=JA(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Hr?function(r,i,s){if(!rf(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=JA(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(XA(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function xu(t,e,n,r){return t instanceof ia?function(i,s,o,a){if(!rf(i.precondition,s))return o;const c=i.value.clone(),u=eO(i.fieldTransforms,a,s);return c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hr?function(i,s,o,a){if(!rf(i.precondition,s))return o;const c=eO(i.fieldTransforms,a,s),u=s.data;return u.setAll(XA(i)),u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(l=>l.field))}(t,e,n,r):(o=n,rf(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function n7(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=zA(r.transform,i||null);null!=s&&(null===n&&(n=It.empty()),n.set(r.field,s))}return n||null}function ZA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(n=t.fieldTransforms)&&void 0===r||n&&r&&Yo(n,r,(i,s)=>function J6(t,e){return t.field.isEqual(e.field)&&(r=e.transform,(n=t.transform)instanceof Ts&&r instanceof Ts||n instanceof Ms&&r instanceof Ms?Yo(n.elements,r.elements,dr):n instanceof ra&&r instanceof ra?dr(n.gt,r.gt):n instanceof na&&r instanceof na);var n,r}(i,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}class ia extends sf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hr extends sf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function XA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function JA(t,e,n){const r=new Map;U(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,X6(o,a,n[i]))}return r}function eO(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Z6(s,o,e))}return r}class sa extends sf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dv extends sf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class r7{constructor(e){this.count=e}}var it,ge;function tO(t){switch(t){default:return F();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0}}function nO(t){if(void 0===t)return Qe("GRPC error has no .code"),w.UNKNOWN;switch(t){case it.OK:return w.OK;case it.CANCELLED:return w.CANCELLED;case it.UNKNOWN:return w.UNKNOWN;case it.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case it.INTERNAL:return w.INTERNAL;case it.UNAVAILABLE:return w.UNAVAILABLE;case it.UNAUTHENTICATED:return w.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case it.NOT_FOUND:return w.NOT_FOUND;case it.ALREADY_EXISTS:return w.ALREADY_EXISTS;case it.PERMISSION_DENIED:return w.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case it.ABORTED:return w.ABORTED;case it.OUT_OF_RANGE:return w.OUT_OF_RANGE;case it.UNIMPLEMENTED:return w.UNIMPLEMENTED;case it.DATA_LOSS:return w.DATA_LOSS;default:return F()}}(ge=it||(it={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";class Ei{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ds(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return gA(this.inner)}size(){return this.innerSize}}const i7=new ze(A.comparator);function sn(){return i7}const rO=new ze(A.comparator);function Su(...t){let e=rO;for(const n of t)e=e.insert(n.key,n);return e}function iO(t){let e=rO;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function hr(){return Tu()}function sO(){return Tu()}function Tu(){return new Ei(t=>t.toString(),(t,e)=>t.isEqual(e))}const s7=new ze(A.comparator),o7=new Ce(A.comparator);function re(...t){let e=o7;for(const n of t)e=e.add(n);return e}const a7=new Ce(X);function af(){return a7}class Mu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Au.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Mu(j.min(),i,af(),sn(),re())}}class Au{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Au(r,n,re(),re(),re())}}class cf{constructor(e,n,r,i){this.It=e,this.removedTargetIds=n,this.key=r,this.Tt=i}}class oO{constructor(e,n){this.targetId=e,this.Et=n}}class aO{constructor(e,n,r=dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class cO{constructor(){this.At=0,this.Rt=lO(),this.bt=dt.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=re(),n=re(),r=re();return this.Rt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:F()}}),new Au(this.bt,this.Pt,e,n,r)}xt(){this.vt=!1,this.Rt=lO()}Nt(e,n){this.vt=!0,this.Rt=this.Rt.insert(e,n)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class c7{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=sn(),this.qt=uO(),this.Ut=new Ce(X)}Kt(e){for(const n of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(n,e.Tt):this.Qt(n,e.key,e.Tt);for(const n of e.removedTargetIds)this.Qt(n,e.key,e.Tt)}jt(e){this.forEachTarget(e,n=>{const r=this.Wt(n);switch(e.state){case 0:this.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(n);break;case 3:this.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(n)&&(this.Ht(n),r.Dt(e.resumeToken));break;default:F()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Bt.forEach((r,i)=>{this.zt(i)&&n(i)})}Jt(e){const n=e.targetId,r=e.Et.count,i=this.Yt(n);if(i){const s=i.target;if(Xh(s))if(0===r){const o=new A(s.path);this.Qt(n,o,Ae.newNoDocument(o,j.min()))}else U(1===r);else this.Xt(n)!==r&&(this.Ht(n),this.Ut=this.Ut.add(n))}}Zt(e){const n=new Map;this.Bt.forEach((s,o)=>{const a=this.Yt(o);if(a){if(s.current&&Xh(a.target)){const c=new A(a.target.path);null!==this.Lt.get(c)||this.te(o,c)||this.Qt(o,c,Ae.newNoDocument(c,e))}s.St&&(n.set(o,s.Ct()),s.xt())}});let r=re();this.qt.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Yt(c);return!u||2===u.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.Lt.forEach((s,o)=>o.setReadTime(e));const i=new Mu(e,n,this.Ut,this.Lt,r);return this.Lt=sn(),this.qt=uO(),this.Ut=new Ce(X),i}Gt(e,n){if(!this.zt(e))return;const r=this.te(e,n.key)?2:0;this.Wt(e).Nt(n.key,r),this.Lt=this.Lt.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ee(n.key).add(e))}Qt(e,n,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,n)?i.Nt(n,1):i.kt(n),this.qt=this.qt.insert(n,this.ee(n).delete(e)),r&&(this.Lt=this.Lt.insert(n,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const n=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let n=this.Bt.get(e);return n||(n=new cO,this.Bt.set(e,n)),n}ee(e){let n=this.qt.get(e);return n||(n=new Ce(X),this.qt=this.qt.insert(e,n)),n}zt(e){const n=null!==this.Yt(e);return n||S("WatchChangeAggregator","Detected inactive target",e),n}Yt(e){const n=this.Bt.get(e);return n&&n.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new cO),this.$t.getRemoteKeysForTarget(e).forEach(n=>{this.Qt(e,n,null)})}te(e,n){return this.$t.getRemoteKeysForTarget(e).has(n)}}function uO(){return new ze(A.comparator)}function lO(){return new ze(A.comparator)}const u7={asc:"ASCENDING",desc:"DESCENDING"},l7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},d7={and:"AND",or:"OR"};class h7{constructor(e,n){this.databaseId=e,this.wt=n}}function oa(t,e){return t.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dO(t,e){return t.wt?e.toBase64():e.toUint8Array()}function f7(t,e){return oa(t,e.toTimestamp())}function Ye(t){return U(!!t),j.fromTimestamp(function(e){const n=wi(e);return new Ne(n.seconds,n.nanos)}(t))}function hv(t,e){return(n=t,new pe(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function hO(t){const e=pe.fromString(t);return U(bO(e)),e}function Ou(t,e){return hv(t.databaseId,e.path)}function fr(t,e){const n=hO(e);if(n.get(1)!==t.databaseId.projectId)throw new E(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new E(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new A(pO(n))}function fv(t,e){return hv(t.databaseId,e)}function fO(t){const e=hO(t);return 4===e.length?pe.emptyPath():pO(e)}function Pu(t){return new pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pO(t){return U(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function gO(t,e,n){return{name:Ou(t,e),fields:n.value.mapValue.fields}}function mO(t,e,n){const r=fr(t,e.name),i=Ye(e.updateTime),s=e.createTime?Ye(e.createTime):j.min(),o=new It({mapValue:{fields:e.fields}}),a=Ae.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ru(t,e){let n;if(e instanceof ia)n={update:gO(t,e.key,e.value)};else if(e instanceof sa)n={delete:Ou(t,e.key)};else if(e instanceof Hr)n={update:gO(t,e.key,e.data),updateMask:b7(e.fieldMask)};else{if(!(e instanceof dv))return F();n={verify:Ou(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof na)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ts)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ms)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof ra)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw F()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:f7(t,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:F()),n;var i}function pv(t,e){const n=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ke.updateTime(Ye(i.updateTime)):void 0!==i.exists?ke.exists(i.exists):ke.none():ke.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let a=null;"setToServerValue"in o?(U("REQUEST_TIME"===o.setToServerValue),a=new na):"appendMissingElements"in o?a=new Ts(o.appendMissingElements.values||[]):"removeAllFromArray"in o?a=new Ms(o.removeAllFromArray.values||[]):"increment"in o?a=new ra(s,o.increment):F();const c=He.fromServerFormat(o.fieldPath);return new Iu(c,a)}(t,i)):[];var i;if(e.update){const i=fr(t,e.update.name),s=new It({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new rn((e.updateMask.fieldPaths||[]).map(u=>He.fromServerFormat(u)));return new Hr(i,s,o,n,r)}return new ia(i,s,n,r)}if(e.delete){const i=fr(t,e.delete);return new sa(i,n)}if(e.verify){const i=fr(t,e.verify);return new dv(i,n)}return F()}function yO(t,e){return{documents:[fv(t,e.path)]}}function gv(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=fv(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=fv(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(c){if(0!==c.length)return wO(be.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(c){if(0!==c.length)return c.map(u=>{return{field:aa((l=u).field),direction:_7(l.dir)};var l})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=(u=e.limit,t.wt||mu(u)?u:{value:u});var u,a,c;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt={before:!(c=e.endAt).inclusive,values:c.position}),n}function _O(t){let e=fO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){U(1===r);const l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(l){const d=vO(l);return d instanceof be&&iv(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(l=>{return new Jo(ca((d=l).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;n.limit&&(a=function(l){let d;return d="object"==typeof l?l.value:l,mu(d)?null:d}(n.limit));let c=null;var l;n.startAt&&(c=new Ci((l=n.startAt).values||[],!!l.before));let u=null;return n.endAt&&(u=function(l){return new Ci(l.values||[],!l.before)}(n.endAt)),LA(e,i,o,s,a,"F",c,u)}function vO(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=ca(e.unaryFilter.field);return ue.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=ca(e.unaryFilter.field);return ue.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ca(e.unaryFilter.field);return ue.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ca(e.unaryFilter.field);return ue.create(s,"!=",{nullValue:"NULL_VALUE"});default:return F()}}(t):void 0!==t.fieldFilter?ue.create(ca((e=t).fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return F()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==t.compositeFilter?function(e){return be.create(e.compositeFilter.filters.map(n=>vO(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return F()}}(e.compositeFilter.op))}(t):F();var e}function _7(t){return u7[t]}function v7(t){return l7[t]}function w7(t){return d7[t]}function aa(t){return{fieldPath:t.canonicalString()}}function ca(t){return He.fromServerFormat(t.fieldPath)}function wO(t){return t instanceof ue?function(e){if("=="===e.op){if(wA(e.value))return{unaryFilter:{field:aa(e.field),op:"IS_NAN"}};if(vA(e.value))return{unaryFilter:{field:aa(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(wA(e.value))return{unaryFilter:{field:aa(e.field),op:"IS_NOT_NAN"}};if(vA(e.value))return{unaryFilter:{field:aa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:aa(e.field),op:v7(e.op),value:e.value}}}(t):t instanceof be?function(e){const n=e.getFilters().map(r=>wO(r));return 1===n.length?n[0]:{compositeFilter:{op:w7(e.op),filters:n}}}(t):F()}function b7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bO(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Qt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=DO(e)),e=D7(t.get(n),e);return DO(e)}function D7(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function DO(t){return t+"\x01\x01"}function pr(t){const e=t.length;if(U(e>=2),2===e)return U("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),pe.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("\x01",s);switch((o<0||o>n)&&F(),t.charAt(o+1)){case"\x01":const a=t.substring(s,o);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:F()}s=o+2}return new pe(r)}const CO=["userId","batchId"];function uf(t,e){return[t,Qt(e)]}function EO(t,e,n){return[t,Qt(e),n]}const C7={},E7=["prefixPath","collectionGroup","readTime","documentId"],I7=["prefixPath","collectionGroup","documentId"],x7=["collectionGroup","readTime","prefixPath","documentId"],S7=["canonicalId","targetId"],T7=["targetId","path"],M7=["path","targetId"],A7=["collectionId","parent"],O7=["indexId","uid"],P7=["uid","sequenceNumber"],R7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],N7=["indexId","uid","orderedDocumentKey"],k7=["userId","collectionPath","documentId"],F7=["userId","collectionPath","largestBatchId"],L7=["userId","collectionGroup","largestBatchId"],IO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],U7=[...IO,"documentOverlays"],xO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],SO=xO,B7=[...SO,"indexConfiguration","indexState","indexEntries"];class mv extends hA{constructor(e,n){super(),this.se=e,this.currentSequenceNumber=n}}function mt(t,e){const n=O(t);return qn.M(n.se,e)}class yv{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&t7(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=xu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=xu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=sO();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const c=YA(o,a);null!==c&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(j.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,(n,r)=>ZA(n,r))&&Yo(this.baseMutations,e.baseMutations,(n,r)=>ZA(n,r))}}class _v{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){U(e.mutations.length===r.length);let i=s7;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new _v(e,n,r,i)}}class vv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ii{constructor(e,n,r,i,s=j.min(),o=j.min(),a=dt.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class TO{constructor(e){this.ie=e}}function MO(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:lf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ou(i=t.ie,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:oa(i,s.version.toTimestamp()),createTime:oa(i,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:As(e.version)};else{if(!e.isUnknownDocument())return F();r.unknownDocument={path:n.path.toArray(),version:As(e.version)}}var i,s;return r}function lf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function As(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Os(t){const e=new Ne(t.seconds,t.nanoseconds);return j.fromTimestamp(e)}function Ps(t,e){const n=(e.baseMutations||[]).map(s=>pv(t.ie,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>pv(t.ie,s)),i=Ne.fromMillis(e.localWriteTimeMs);return new yv(e.batchId,i,n,r)}function Nu(t){const e=Os(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Os(t.lastLimboFreeSnapshotVersion):j.min();let r;var i;return void 0!==t.query.documents?(U(1===(i=t.query).documents.length),r=Kt(ta(fO(i.documents[0])))):r=Kt(_O(t.query)),new Ii(r,t.targetId,0,t.lastListenSequenceNumber,e,n,dt.fromBase64String(t.resumeToken))}function AO(t,e){const n=As(e.snapshotVersion),r=As(e.lastLimboFreeSnapshotVersion);let i;i=Xh(e.target)?yO(t.ie,e.target):gv(t.ie,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xs(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function wv(t){const e=_O({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?tf(e,e.limit,"L"):e}function bv(t,e){return new vv(e.largestBatchId,pv(t.ie,e.overlayMutation))}function OO(t,e){const n=e.path.lastSegment();return[t,Qt(e.path.popLast()),n]}function PO(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:As(r.readTime),documentKey:Qt(r.documentKey.path),largestBatchId:r.largestBatchId}}class j7{getBundleMetadata(e,n){return RO(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Os(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return RO(e).put({bundleId:(r=n).id,createTime:As(Ye(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return NO(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:wv(i.bundledQuery),readTime:Os(i.readTime)};var i})}saveNamedQuery(e,n){return NO(e).put({name:(r=n).name,readTime:As(Ye(r.readTime)),bundledQuery:r.bundledQuery});var r}}function RO(t){return mt(t,"bundles")}function NO(t){return mt(t,"namedQueries")}class df{constructor(e,n){this.yt=e,this.userId=n}static re(e,n){return new df(e,n.uid||"")}getOverlay(e,n){return ku(e).get(OO(this.userId,n)).next(r=>r?bv(this.yt,r):null)}getOverlays(e,n){const r=hr();return _.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new vv(n,o);i.push(this.oe(e,a))}),_.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Qt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(ku(e).Y("collectionPathOverlayIndex",a))}),_.waitFor(s)}getOverlaysForCollection(e,n,r){const i=hr(),s=Qt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ku(e).W("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const u=bv(this.yt,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=hr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ku(e).Z({index:"collectionGroupOverlayIndex",range:a},(c,u,l)=>{const d=bv(this.yt,u);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):l.done()}).next(()=>s)}oe(e,n){return ku(e).put(function(r,i,s){const[o,a,c]=OO(i,s.mutation.key);return{userId:i,collectionPath:a,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Ru(r.ie,s.mutation)}}(this.yt,this.userId,n))}}function ku(t){return mt(t,"documentOverlays")}class Rs{constructor(){}ue(e,n){this.ce(e,n),n.ae()}ce(e,n){if("nullValue"in e)this.he(n,5);else if("booleanValue"in e)this.he(n,10),n.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(n,15),n.le(qe(e.integerValue));else if("doubleValue"in e){const r=qe(e.doubleValue);isNaN(r)?this.he(n,13):(this.he(n,15),yu(r)?n.le(0):n.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(n,20),"string"==typeof r?n.fe(r):(n.fe(`${r.seconds||""}`),n.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,n),this._e(n);else if("bytesValue"in e)this.he(n,30),n.we(Cs(e.bytesValue)),this._e(n);else if("referenceValue"in e)this.me(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(n,45),n.le(r.latitude||0),n.le(r.longitude||0)}else"mapValue"in e?bA(e)?this.he(n,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,n),this._e(n)):"arrayValue"in e?(this.ye(e.arrayValue,n),this._e(n)):F()}de(e,n){this.he(n,25),this.pe(e,n)}pe(e,n){n.fe(e)}ge(e,n){const r=e.fields||{};this.he(n,55);for(const i of Object.keys(r))this.de(i,n),this.ce(r[i],n)}ye(e,n){const r=e.values||[];this.he(n,50);for(const i of r)this.ce(i,n)}me(e,n){this.he(n,37),A.fromName(e).path.forEach(r=>{this.he(n,60),this.pe(r,n)})}he(e,n){e.le(n)}_e(e){e.le(2)}}function $7(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function kO(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const s=$7(255&n[i]);if(r+=s,8!==s)break}return r}(t);return Math.ceil(e/8)}Rs.Ie=new Rs;class H7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ee(r.value),r=n.next();this.Ae()}Re(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.be(r.value),r=n.next();this.Pe()}ve(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const i=n.codePointAt(0);this.Ee(240|i>>>18),this.Ee(128|63&i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i)}}this.Ae()}Ve(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=n.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Pe()}Se(e){const n=this.De(e),r=kO(n);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}xe(e){const n=this.De(e),r=kO(n);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const n=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ee(e){const n=255&e;0===n?(this.ke(0),this.ke(255)):255===n?(this.ke(255),this.ke(0)):this.ke(n)}be(e){const n=255&e;0===n?(this.Me(0),this.Me(255)):255===n?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class q7{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class z7{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class Fu{constructor(){this.$e=new H7,this.Be=new q7(this.$e),this.Le=new z7(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Ns{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ue(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ns(this.indexId,this.documentKey,this.arrayValue,r)}}function xi(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=FO(t.arrayValue,e.arrayValue),0!==n?n:(n=FO(t.directionalValue,e.directionalValue),0!==n?n:A.comparator(t.documentKey,e.documentKey)))}function FO(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class G7{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const n of e.filters){const r=n;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){U(e.collectionGroup===this.collectionId);const n=Y_(e);if(void 0!==n&&!this.We(n))return!1;const r=ws(e);let i=0,s=0;for(;i<r.length&&this.We(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Qe){const o=r[i];if(!this.ze(this.Qe,o)||!this.He(this.Ke[s++],o))return!1;++i}for(;i<r.length;++i)if(s>=this.Ke.length||!this.He(this.Ke[s++],r[i]))return!1;return!0}We(e){for(const n of this.Ge)if(this.ze(n,e))return!0;return!1}ze(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function LO(t){var e,n;if(U(t instanceof ue||t instanceof be),t instanceof ue){if(t instanceof PA){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(s=>ue.create(t.field,"==",s)))||[];return be.create(i,"or")}return t}const r=t.filters.map(i=>LO(i));return be.create(r,t.op)}function W7(t){if(0===t.getFilters().length)return[];const e=Ev(LO(t));return U(UO(e)),Dv(e)||Cv(e)?[e]:e.getFilters()}function Dv(t){return t instanceof ue}function Cv(t){return t instanceof be&&iv(t)}function UO(t){return Dv(t)||Cv(t)||function(e){if(e instanceof be&&rv(e)){for(const n of e.getFilters())if(!Dv(n)&&!Cv(n))return!1;return!0}return!1}(t)}function Ev(t){if(U(t instanceof ue||t instanceof be),t instanceof ue)return t;if(1===t.filters.length)return Ev(t.filters[0]);const e=t.filters.map(r=>Ev(r));let n=be.create(e,t.op);return n=hf(n),UO(n)?n:(U(n instanceof be),U(Xo(n)),U(n.filters.length>1),n.filters.reduce((r,i)=>Iv(r,i)))}function Iv(t,e){let n;return U(t instanceof ue||t instanceof be),U(e instanceof ue||e instanceof be),n=t instanceof ue?e instanceof ue?be.create([t,e],"and"):BO(t,e):e instanceof ue?BO(e,t):function(r,i){if(U(r.filters.length>0&&i.filters.length>0),Xo(r)&&Xo(i))return MA(r,i.getFilters());const s=rv(r)?r:i,o=rv(r)?i:r,a=s.filters.map(c=>Iv(c,o));return be.create(a,"or")}(t,e),hf(n)}function BO(t,e){if(Xo(e))return MA(e,t.getFilters());{const n=e.filters.map(r=>Iv(t,r));return be.create(n,"or")}}function hf(t){if(U(t instanceof ue||t instanceof be),t instanceof ue)return t;const e=t.getFilters();if(1===e.length)return hf(e[0]);if(SA(t))return t;const n=e.map(i=>hf(i)),r=[];return n.forEach(i=>{i instanceof ue?r.push(i):i instanceof be&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:be.create(r,t.op)}class K7{constructor(){this.Je=new xv}addToCollectionParentIndex(e,n){return this.Je.add(n),_.resolve()}getCollectionParents(e,n){return _.resolve(this.Je.getEntries(n))}addFieldIndex(e,n){return _.resolve()}deleteFieldIndex(e,n){return _.resolve()}getDocumentsMatchingTarget(e,n){return _.resolve(null)}getIndexType(e,n){return _.resolve(0)}getFieldIndexes(e,n){return _.resolve([])}getNextCollectionGroupToUpdate(e){return _.resolve(null)}getMinOffset(e,n){return _.resolve(yn.min())}getMinOffsetFromCollectionGroup(e,n){return _.resolve(yn.min())}updateCollectionGroup(e,n,r){return _.resolve()}updateIndexEntries(e,n){return _.resolve()}}class xv{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ce(pe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ce(pe.comparator)).toArray()}}const ff=new Uint8Array(0);class Q7{constructor(e,n){this.user=e,this.databaseId=n,this.Ye=new xv,this.Xe=new Ei(r=>xs(r),(r,i)=>Du(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Ye.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.Ye.add(n)});const s={collectionId:r,parent:Qt(i)};return VO(e).put(s)}return _.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[cA(n),""],!1,!0);return VO(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(pr(o.parent))}return r})}addFieldIndex(e,n){const r=pf(e),i={indexId:(o=n).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])};var o;delete i.indexId;const s=r.add(i);if(n.indexState){const o=Uu(e);return s.next(a=>{o.put(PO(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=pf(e),i=Uu(e),s=Lu(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=Lu(e);let i=!0;const s=new Map;return _.forEach(this.Ze(n),o=>this.tn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=re();const a=[];return _.forEach(s,(c,u)=>{var l;S("IndexedDbIndexManager",`Using index ${l=c,`id=${l.indexId}|cg=${l.collectionGroup}|f=${l.fields.map(y=>`${y.fieldPath}:${y.kind}`).join(",")}`} to execute ${xs(n)}`);const d=function(y,T){const L=Y_(T);if(void 0===L)return null;for(const V of Jh(y,L.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null}(u,c),h=function(y,T){const L=new Map;for(const V of ws(T))for(const Ge of Jh(y,V.fieldPath))switch(Ge.op){case"==":case"in":L.set(V.fieldPath.canonicalString(),Ge.value);break;case"not-in":case"!=":return L.set(V.fieldPath.canonicalString(),Ge.value),Array.from(L.values())}return null}(u,c),f=function(y,T){const L=[];let V=!0;for(const Ge of ws(T)){const zn=0===Ge.kind?kA(y,Ge.fieldPath,y.startAt):FA(y,Ge.fieldPath,y.startAt);L.push(zn.value),V&&(V=zn.inclusive)}return new Ci(L,V)}(u,c),p=function(y,T){const L=[];let V=!0;for(const Ge of ws(T)){const zn=0===Ge.kind?FA(y,Ge.fieldPath,y.endAt):kA(y,Ge.fieldPath,y.endAt);L.push(zn.value),V&&(V=zn.inclusive)}return new Ci(L,V)}(u,c),g=this.en(c,u,f),m=this.en(c,u,p),C=this.nn(c,u,h),x=this.sn(c.indexId,d,g,f.inclusive,m,p.inclusive,C);return _.forEach(x,y=>r.J(y,n.limit).next(T=>{T.forEach(L=>{const V=A.fromSegments(L.documentKey);o.has(V)||(o=o.add(V),a.push(V))})}))}).next(()=>a)}return _.resolve(null)})}Ze(e){let n=this.Xe.get(e);return n||(n=0===e.filters.length?[e]:W7(be.create(e.filters,"and")).map(r=>ov(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,n),n)}sn(e,n,r,i,s,o,a){const c=(null!=n?n.length:1)*Math.max(r.length,s.length),u=c/(null!=n?n.length:1),l=[];for(let d=0;d<c;++d){const h=n?this.rn(n[d/u]):ff,f=this.on(e,h,r[d%u],i),p=this.un(e,h,s[d%u],o),g=a.map(m=>this.on(e,h,m,!0));l.push(...this.createRange(f,p,g))}return l}on(e,n,r,i){const s=new Ns(e,A.empty(),n,r);return i?s:s.Ue()}un(e,n,r,i){const s=new Ns(e,A.empty(),n,r);return i?s.Ue():s}tn(e,n){const r=new G7(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.je(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Ze(n);return _.forEach(i,s=>this.tn(e,s).next(o=>{o?0!==r&&o.fields.length<function(a){let c=new Ce(He.comparator),u=!1;for(const l of a.filters)for(const d of l.getFlattenedFilters())d.field.isKeyField()||("array-contains"===d.op||"array-contains-any"===d.op?u=!0:c=c.add(d.field));for(const l of a.orderBy)l.field.isKeyField()||(c=c.add(l.field));return c.size+(u?1:0)}(s)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}cn(e,n){const r=new Fu;for(const i of ws(e)){const s=n.data.field(i.fieldPath);if(null==s)return null;const o=r.qe(i.kind);Rs.Ie.ue(s,o)}return r.Fe()}rn(e){const n=new Fu;return Rs.Ie.ue(e,n.qe(0)),n.Fe()}an(e,n){const r=new Fu;return Rs.Ie.ue(Is(this.databaseId,n),r.qe(function(i){const s=ws(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Fe()}nn(e,n,r){if(null===r)return[];let i=[];i.push(new Fu);let s=0;for(const o of ws(e)){const a=r[s++];for(const c of i)if(this.hn(n,o.fieldPath)&&wu(a))i=this.ln(i,o,a);else{const u=c.qe(o.kind);Rs.Ie.ue(a,u)}}return this.fn(i)}en(e,n,r){return this.nn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Fe();return n}ln(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const c=new Fu;c.seed(a.Fe()),Rs.Ie.ue(o,c.qe(n.kind)),s.push(c)}return s}hn(e,n){return!!e.filters.find(r=>r instanceof ue&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=pf(e),i=Uu(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return _.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(u,l){const d=l?new pu(l.sequenceNumber,new yn(Os(l.readTime),new A(pr(l.documentKey)),l.largestBatchId)):pu.empty(),h=u.fields.map(([f,p])=>new Wh(He.fromServerFormat(f),p));return new Gh(u.indexId,u.collectionGroup,h,d)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:X(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=pf(e),s=Uu(e);return this.dn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>_.forEach(a,c=>s.put(PO(c.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return _.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?_.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),_.forEach(a,c=>this._n(e,i,c).next(u=>{const l=this.wn(s,c);return u.isEqual(l)?_.resolve():this.mn(e,s,c,u,l)}))))})}gn(e,n,r,i){return Lu(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(r,n.key),documentKey:n.key.path.toArray()})}yn(e,n,r,i){return Lu(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(r,n.key),n.key.path.toArray()])}_n(e,n,r){const i=Lu(e);let s=new Ce(xi);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,n)])},(o,a)=>{s=s.add(new Ns(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}wn(e,n){let r=new Ce(xi);const i=this.cn(n,e);if(null==i)return r;const s=Y_(n);if(null!=s){const o=e.data.field(s.fieldPath);if(wu(o))for(const a of o.arrayValue.values||[])r=r.add(new Ns(n.indexId,e.key,this.rn(a),i))}else r=r.add(new Ns(n.indexId,e.key,ff,i));return r}mn(e,n,r,i,s){S("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,c,u,l,d){const h=a.getIterator(),f=c.getIterator();let p=ea(h),g=ea(f);for(;p||g;){let m=!1,C=!1;if(p&&g){const x=u(p,g);x<0?C=!0:x>0&&(m=!0)}else null!=p?C=!0:m=!0;m?(l(g),g=ea(f)):C?(d(p),p=ea(h)):(p=ea(h),g=ea(f))}}(i,s,xi,a=>{o.push(this.gn(e,n,r,a))},a=>{o.push(this.yn(e,n,r,a))}),_.waitFor(o)}dn(e){let n=1;return Uu(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>xi(o,a)).filter((o,a,c)=>!a||0!==xi(o,c[a-1]));const i=[];i.push(e);for(const o of r){const a=xi(o,e),c=xi(o,n);if(0===a)i[0]=e.Ue();else if(a>0&&c<0)i.push(o),i.push(o.Ue());else if(c>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.pn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,ff,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,ff,[]]))}return s}pn(e,n){return xi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(jO)}getMinOffset(e,n){return _.mapArray(this.Ze(n),r=>this.tn(e,r).next(i=>i||F())).next(jO)}}function VO(t){return mt(t,"collectionParents")}function Lu(t){return mt(t,"indexEntries")}function pf(t){return mt(t,"indexConfiguration")}function Uu(t){return mt(t,"indexState")}function jO(t){U(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Z_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new yn(e.readTime,e.documentKey,n)}const $O={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class on{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function HO(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.Z({range:o},(l,d,h)=>(a++,h.delete()));s.push(c.next(()=>{U(1===a)}));const u=[];for(const l of n.mutations){const d=EO(e,l.key.path,n.batchId);s.push(i.delete(d)),u.push(l.key)}return _.waitFor(s).next(()=>u)}function gf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw F();e=t.noDocument}return JSON.stringify(e).length}on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(41943040,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);class mf{constructor(e,n,r,i){this.userId=e,this.yt=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}static re(e,n,r,i){U(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new mf(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Si(e).Z({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=ua(e),o=Si(e);return o.add({}).next(a=>{U("number"==typeof a);const c=new yv(a,n,r,i),u=function(h,f,p){const g=p.baseMutations.map(C=>Ru(h.ie,C)),m=p.mutations.map(C=>Ru(h.ie,C));return{userId:f,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:g,mutations:m}}(this.yt,this.userId,c),l=[];let d=new Ce((h,f)=>X(h.canonicalString(),f.canonicalString()));for(const h of i){const f=EO(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),l.push(o.put(u)),l.push(s.put(f,C7))}return d.forEach(h=>{l.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.In[a]=c.keys()}),_.waitFor(l).next(()=>c)})}lookupMutationBatch(e,n){return Si(e).get(n).next(r=>r?(U(r.userId===this.userId),Ps(this.yt,r)):null)}Tn(e,n){return this.In[n]?_.resolve(this.In[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.In[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Si(e).Z({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(U(a.batchId>=r),s=Ps(this.yt,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Si(e).Z({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Si(e).W("userMutationsIndex",n).next(r=>r.map(i=>Ps(this.yt,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=uf(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return ua(e).Z({range:i},(o,a,c)=>{const[u,l,d]=o,h=pr(l);if(u===this.userId&&n.path.isEqual(h))return Si(e).get(d).next(f=>{if(!f)throw F();U(f.userId===this.userId),s.push(Ps(this.yt,f))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ce(X);const i=[];return n.forEach(s=>{const o=uf(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=ua(e).Z({range:a},(u,l,d)=>{const[h,f,p]=u,g=pr(f);h===this.userId&&s.path.isEqual(g)?r=r.add(p):d.done()});i.push(c)}),_.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=uf(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ce(X);return ua(e).Z({range:o},(c,u,l)=>{const[d,h,f]=c,p=pr(h);d===this.userId&&r.isPrefixOf(p)?p.length===i&&(a=a.add(f)):l.done()}).next(()=>this.En(e,a))}En(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Si(e).get(s).next(o=>{if(null===o)throw F();U(o.userId===this.userId),r.push(Ps(this.yt,o))}))}),_.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return HO(e.se,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.An(n.batchId)}),_.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return _.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return ua(e).Z({range:r},(s,o,a)=>{if(s[0]===this.userId){const c=pr(s[1]);i.push(c)}else a.done()}).next(()=>{U(0===i.length)})})}containsKey(e,n){return qO(e,this.userId,n)}Rn(e){return zO(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function qO(t,e,n){const r=uf(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ua(t).Z({range:s,X:!0},(a,c,u)=>{const[l,d,h]=a;l===e&&d===i&&(o=!0),u.done()}).next(()=>o)}function Si(t){return mt(t,"mutations")}function ua(t){return mt(t,"documentMutations")}function zO(t){return mt(t,"mutationQueues")}class ks{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new ks(0)}static vn(){return new ks(-1)}}class Y7{constructor(e,n){this.referenceDelegate=e,this.yt=n}allocateTargetId(e){return this.Vn(e).next(n=>{const r=new ks(n.highestTargetId);return n.highestTargetId=r.next(),this.Sn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(n=>j.fromTimestamp(new Ne(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Sn(e,i)))}addTargetData(e,n){return this.Dn(e,n).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(n,r),this.Sn(e,r))))}updateTargetData(e,n){return this.Dn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>la(e).delete(n.targetId)).next(()=>this.Vn(e)).next(r=>(U(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return la(e).Z((o,a)=>{const c=Nu(a);c.sequenceNumber<=n&&null===r.get(c.targetId)&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>_.waitFor(s)).next(()=>i)}forEachTarget(e,n){return la(e).Z((r,i)=>{const s=Nu(i);n(s)})}Vn(e){return GO(e).get("targetGlobalKey").next(n=>(U(null!==n),n))}Sn(e,n){return GO(e).put("targetGlobalKey",n)}Dn(e,n){return la(e).put(AO(this.yt,n))}Cn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=xs(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return la(e).Z({range:i,index:"queryTargetsIndex"},(o,a,c)=>{const u=Nu(a);Du(n,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Ti(e);return n.forEach(o=>{const a=Qt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),_.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ti(e);return _.forEach(n,s=>{const o=Qt(s.path);return _.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Ti(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ti(e);let s=re();return i.Z({range:r,X:!0},(o,a,c)=>{const u=pr(o[1]),l=new A(u);s=s.add(l)}).next(()=>s)}containsKey(e,n){const r=Qt(n.path),i=IDBKeyRange.bound([r],[cA(r)],!1,!0);let s=0;return Ti(e).Z({index:"documentTargetsIndex",X:!0,range:i},([o,a],c,u)=>{0!==o&&(s++,u.done())}).next(()=>s>0)}ne(e,n){return la(e).get(n).next(r=>r?Nu(r):null)}}function la(t){return mt(t,"targets")}function GO(t){return mt(t,"targetGlobal")}function Ti(t){return mt(t,"targetDocuments")}function WO([t,e],[n,r]){const i=X(t,n);return 0===i?X(e,r):i}class Z7{constructor(e){this.xn=e,this.buffer=new Ce(WO),this.Nn=0}kn(){return++this.Nn}On(e){const n=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();WO(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class X7{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var n=this;S("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,v(function*(){n.Mn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){_i(r)?S("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield yi(r)}yield n.Fn(3e5)}))}}class J7{constructor(e,n){this.$n=e,this.params=n}calculateTargetCount(e,n){return this.$n.Bn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return _.resolve(_n.at);const r=new Z7(n);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.$n.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.$n.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(S("LruGarbageCollector","Garbage collection skipped; disabled"),_.resolve($O)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(S("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$O):this.qn(e,n))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,n){let r,i,s,o,a,c,u;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(S("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),K_()<=me.DEBUG&&S("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-l}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(c-a)+`ms\n\tRemoved ${d} documents in `+(u-c)+`ms\nTotal Duration: ${u-l}ms`),_.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}class eW{constructor(e,n){this.db=e,this.garbageCollector=new J7(this,n)}Bn(e){const n=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Un(e){let n=0;return this.Ln(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Ln(e,n){return this.Kn(e,(r,i)=>n(i))}addReference(e,n,r){return yf(e,r)}removeReference(e,n,r){return yf(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return yf(e,n)}Gn(e,n){return function(r,i){let s=!1;return zO(r).tt(o=>qO(r,o,i).next(a=>(a&&(s=!0),_.resolve(!a)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Kn(e,(o,a)=>{if(a<=n){const c=this.Gn(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,j.min()),Ti(e).delete([0,Qt(o.path)])))});i.push(c)}}).next(()=>_.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return yf(e,n)}Kn(e,n){const r=Ti(e);let i,s=_n.at;return r.Z({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:u})=>{0===o?(s!==_n.at&&n(new A(pr(i)),s),s=u,i=c):s=_n.at}).next(()=>{s!==_n.at&&n(new A(pr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function yf(t,e){return Ti(t).put((r=t.currentSequenceNumber,{targetId:0,path:Qt(e.path),sequenceNumber:r}));var r}class KO{constructor(){this.changes=new Ei(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ae.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?_.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tW{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Fs(e).put(r)}removeEntry(e,n,r){return Fs(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],lf(s),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Qn(e,r)))}getEntry(e,n){let r=Ae.newInvalidDocument(n);return Fs(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Bu(n))},(i,s)=>{r=this.jn(n,s)}).next(()=>r)}Wn(e,n){let r={size:0,document:Ae.newInvalidDocument(n)};return Fs(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Bu(n))},(i,s)=>{r={document:this.jn(n,s),size:gf(s)}}).next(()=>r)}getEntries(e,n){let r=sn();return this.zn(e,n,(i,s)=>{const o=this.jn(i,s);r=r.insert(i,o)}).next(()=>r)}Hn(e,n){let r=sn(),i=new ze(A.comparator);return this.zn(e,n,(s,o)=>{const a=this.jn(s,o);r=r.insert(s,a),i=i.insert(s,gf(o))}).next(()=>({documents:r,Jn:i}))}zn(e,n,r){if(n.isEmpty())return _.resolve();let i=new Ce(XO);n.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(Bu(i.first()),Bu(i.last())),o=i.getIterator();let a=o.getNext();return Fs(e).Z({index:"documentKeyIndex",range:s},(c,u,l)=>{const d=A.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&XO(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?l.j(Bu(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),lf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fs(e).W(IDBKeyRange.bound(o,a,!0)).next(c=>{let u=sn();for(const l of c){const d=this.jn(A.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);d.isFoundDocument()&&(Eu(n,d)||i.has(d.key))&&(u=u.insert(d.key,d))}return u})}getAllFromCollectionGroup(e,n,r,i){let s=sn();const o=ZO(n,r),a=ZO(n,yn.max());return Fs(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,u,l)=>{const d=this.jn(A.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&l.done()}).next(()=>s)}newChangeBuffer(e){return new nW(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return YO(e).get("remoteDocumentGlobalKey").next(n=>(U(!!n),n))}Qn(e,n){return YO(e).put("remoteDocumentGlobalKey",n)}jn(e,n){if(n){const r=function V7(t,e){let n;if(e.document)n=mO(t.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=A.fromSegments(e.noDocument.path),i=Os(e.noDocument.readTime);n=Ae.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return F();{const r=A.fromSegments(e.unknownDocument.path),i=Os(e.unknownDocument.version);n=Ae.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(r){const i=new Ne(r[0],r[1]);return j.fromTimestamp(i)}(e.readTime)),n}(this.yt,n);if(!r.isNoDocument()||!r.version.isEqual(j.min()))return r}return Ae.newInvalidDocument(e)}}function QO(t){return new tW(t)}class nW extends KO{constructor(e,n){super(),this.Yn=e,this.trackRemovals=n,this.Xn=new Ei(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ce((s,o)=>X(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Xn.get(s);if(n.push(this.Yn.removeEntry(e,s,a.readTime)),o.isValidDocument()){const c=MO(this.Yn.yt,o);i=i.add(s.path.popLast());const u=gf(c);r+=u-a.size,n.push(this.Yn.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){const c=MO(this.Yn.yt,o.convertToNoDocument(j.min()));n.push(this.Yn.addEntry(e,s,c))}}),i.forEach(s=>{n.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Yn.updateMetadata(e,r)),_.waitFor(n)}getFromCache(e,n){return this.Yn.Wn(e,n).next(r=>(this.Xn.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Yn.Hn(e,n).next(({documents:r,Jn:i})=>(i.forEach((s,o)=>{this.Xn.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function YO(t){return mt(t,"remoteDocumentGlobal")}function Fs(t){return mt(t,"remoteDocumentsV14")}function Bu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ZO(t,e){const n=e.documentKey.path.toArray();return[t,lf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function XO(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=X(n[s],r[s]),i)return i;return i=X(n.length,r.length),i||(i=X(n[n.length-2],r[r.length-2]),i||X(n[n.length-1],r[r.length-1]))}class rW{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class JO{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&xu(r.mutation,i,rn.empty(),Ne.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){const i=hr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Su();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=sn();const o=Tu(),a=Tu();return n.forEach((c,u)=>{const l=r.get(u.key);i.has(u.key)&&(void 0===l||l.mutation instanceof Hr)?s=s.insert(u.key,u):void 0!==l?(o.set(u.key,l.mutation.getFieldMask()),xu(l.mutation,u,l.mutation.getFieldMask(),Ne.now())):o.set(u.key,rn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new rW(l,null!==(d=o.get(u))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Tu();let i=new ze((o,a)=>o-a),s=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=n.get(c);if(null===u)return;let l=r.get(c)||rn.empty();l=a.applyToLocalView(u,l),r.set(c,l);const d=(i.get(a.batchId)||re()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,l=c.value,d=sO();l.forEach(h=>{if(!s.has(h)){const f=YA(n.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return _.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return A.isDocumentKey((i=n).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):cv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r);var i}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):_.resolve(hr());let a=-1,c=s;return o.next(u=>_.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?_.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,re())).next(l=>({batchId:a,changes:iO(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new A(n)).next(r=>{let i=Su();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Su();return this.indexManager.getCollectionParents(e,i).next(o=>_.forEach(o,a=>{const c=(u=n,l=a.child(i),new $r(l,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt));var u,l;return this.getDocumentsMatchingCollectionQuery(e,c,r).next(u=>{u.forEach((l,d)=>{s=s.insert(l,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,c)=>{const u=c.getKey();null===s.get(u)&&(s=s.insert(u,Ae.newInvalidDocument(u)))});let o=Su();return s.forEach((a,c)=>{const u=i.get(a);void 0!==u&&xu(u.mutation,c,rn.empty(),Ne.now()),Eu(n,c)&&(o=o.insert(a,c))}),o})}}class iW{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return _.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var r;return this.Zn.set(n.id,{id:(r=n).id,version:r.version,createTime:Ye(r.createTime)}),_.resolve()}getNamedQuery(e,n){return _.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,{name:(r=n).name,query:wv(r.bundledQuery),readTime:Ye(r.readTime)}),_.resolve();var r}}class sW{constructor(){this.overlays=new ze(A.comparator),this.es=new Map}getOverlay(e,n){return _.resolve(this.overlays.get(n))}getOverlays(e,n){const r=hr();return _.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.oe(e,n,s)}),_.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),_.resolve()}getOverlaysForCollection(e,n,r){const i=hr(),s=n.length+1,o=new A(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return _.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ze((u,l)=>u-l);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=s.get(u.largestBatchId);null===l&&(l=hr(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}const a=hr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return _.resolve(a)}oe(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new vv(n,r));let s=this.es.get(n);void 0===s&&(s=re(),this.es.set(n,s)),this.es.set(n,s.add(r.key))}}class Sv{constructor(){this.ns=new Ce(yt.ss),this.rs=new Ce(yt.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const r=new yt(e,n);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.cs(new yt(e,n))}hs(e,n){e.forEach(r=>this.removeReference(r,n))}ls(e){const n=new A(new pe([])),r=new yt(n,e),i=new yt(n,e+1),s=[];return this.rs.forEachInRange([r,i],o=>{this.cs(o),s.push(o.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new A(new pe([])),r=new yt(n,e),i=new yt(n,e+1);let s=re();return this.rs.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new yt(e,0),r=this.ns.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class yt{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return A.comparator(e.key,n.key)||X(e._s,n._s)}static os(e,n){return X(e._s,n._s)||A.comparator(e.key,n.key)}}class oW{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Ce(yt.ss)}checkEmpty(e){return _.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.ws;this.ws++;const o=new yv(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.gs=this.gs.add(new yt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return _.resolve(o)}lookupMutationBatch(e,n){return _.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.ps(n+1),s=i<0?0:i;return _.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return _.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return _.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new yt(n,0),i=new yt(n,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],o=>{const a=this.ys(o._s);s.push(a)}),_.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ce(X);return n.forEach(i=>{const s=new yt(i,0),o=new yt(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,o],a=>{r=r.add(a._s)})}),_.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;A.isDocumentKey(s)||(s=s.child(""));const o=new yt(new A(s),0);let a=new Ce(X);return this.gs.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c._s)),!0)},o),_.resolve(this.Is(a))}Is(e){const n=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){U(0===this.Ts(n.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return _.forEach(n.mutations,i=>{const s=new yt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,n){const r=new yt(n,0),i=this.gs.firstAfterOrEqual(r);return _.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return _.resolve()}Ts(e,n){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class aW{constructor(e){this.Es=e,this.docs=new ze(A.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Es(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return _.resolve(r?r.document.mutableCopy():Ae.newInvalidDocument(n))}getEntries(e,n){let r=sn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ae.newInvalidDocument(i))}),_.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=sn();const o=n.path,a=new A(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Z_(lA(l),r)<=0||(i.has(l.key)||Eu(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return _.resolve(s)}getAllFromCollectionGroup(e,n,r,i){F()}As(e,n){return _.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new cW(this)}getSize(e){return _.resolve(this.size)}}class cW extends KO{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),_.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}class uW{constructor(e){this.persistence=e,this.Rs=new Ei(n=>xs(n),Du),this.lastRemoteSnapshotVersion=j.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Sv,this.targetCount=0,this.vs=ks.Pn()}forEachTarget(e,n){return this.Rs.forEach((r,i)=>n(i)),_.resolve()}getLastRemoteSnapshotVersion(e){return _.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),_.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.bs&&(this.bs=n),_.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new ks(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,_.resolve()}updateTargetData(e,n){return this.Dn(n),_.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,_.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Rs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),_.waitFor(s).next(()=>i)}getTargetCount(e){return _.resolve(this.targetCount)}getTargetData(e,n){const r=this.Rs.get(n)||null;return _.resolve(r)}addMatchingKeys(e,n,r){return this.Ps.us(n,r),_.resolve()}removeMatchingKeys(e,n,r){this.Ps.hs(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),_.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),_.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ps.ds(n);return _.resolve(r)}containsKey(e,n){return _.resolve(this.Ps.containsKey(n))}}class eP{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new _n(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new uW(this),this.indexManager=new K7,this.remoteDocumentCache=new aW(r=>this.referenceDelegate.xs(r)),this.yt=new TO(n),this.Ns=new iW(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sW,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Vs[e.toKey()];return r||(r=new oW(n,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,r){S("MemoryPersistence","Starting transaction:",e);const i=new lW(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ms(e,n){return _.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,n)))}}class lW extends hA{constructor(e){super(),this.currentSequenceNumber=e}}class _f{constructor(e){this.persistence=e,this.Fs=new Sv,this.$s=null}static Bs(e){return new _f(e)}get Ls(){if(this.$s)return this.$s;throw F()}addReference(e,n,r){return this.Fs.addReference(r,n),this.Ls.delete(r.toString()),_.resolve()}removeReference(e,n,r){return this.Fs.removeReference(r,n),this.Ls.add(r.toString()),_.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),_.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}ks(){this.$s=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _.forEach(this.Ls,r=>{const i=A.fromPath(r);return this.qs(e,i).next(s=>{s||n.removeEntry(i,j.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.qs(e,n).next(r=>{r?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}qs(e,n){return _.or([()=>_.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ms(e,n)])}}class dW{constructor(e){this.yt=e}$(e,n,r,i){const s=new Kh("createOrUpgrade",n);var a;r<1&&i>=1&&(e.createObjectStore("owner"),(a=e).createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",CO,{unique:!0}),a.createObjectStore("documentMutations"),tP(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=_.resolve();return r<3&&i>=3&&(0!==r&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),tP(e)),o=o.next(()=>function(a){const c=a.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:j.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(a,c){return c.store("mutations").W().next(u=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",CO,{unique:!0});const l=c.store("mutations"),d=u.map(h=>l.put(h));return _.waitFor(d)})}(e,s))),o=o.next(()=>{!function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Us(s))),r<6&&i>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),r<7&&i>=7&&(o=o.next(()=>this.Gs(s))),r<8&&i>=8&&(o=o.next(()=>this.Qs(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.js(s))),r<11&&i>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(a){const c=a.createObjectStore("documentOverlays",{keyPath:k7});c.createIndex("collectionPathOverlayIndex",F7,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",L7,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(a){const c=a.createObjectStore("remoteDocumentsV14",{keyPath:E7});c.createIndex("documentKeyIndex",I7),c.createIndex("collectionGroupIndex",x7)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.zs(e,s))),r<15&&i>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:O7}).createIndex("sequenceNumberIndex",P7,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:R7}).createIndex("documentKeyIndex",N7,{unique:!1})}(e))),o}Ks(e){let n=0;return e.store("remoteDocuments").Z((r,i)=>{n+=gf(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>_.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>_.forEach(a,c=>{U(c.userId===s.userId);const u=Ps(this.yt,c);return HO(e,s.userId,u).next(()=>{})}))}))}Gs(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((o,a)=>{const c=new pe(o),u=[0,Qt(c)];s.push(n.get(u).next(l=>l?_.resolve():n.put({targetId:0,path:Qt(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>_.waitFor(s))})}Qs(e,n){e.createObjectStore("collectionParents",{keyPath:A7});const r=n.store("collectionParents"),i=new xv,s=o=>{if(i.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Qt(c)})}};return n.store("remoteDocuments").Z({X:!0},(o,a)=>{const c=new pe(o);return s(c.popLast())}).next(()=>n.store("documentMutations").Z({X:!0},([o,a,c],u)=>{const l=pr(a);return s(l.popLast())}))}js(e){const n=e.store("targets");return n.Z((r,i)=>{const s=Nu(i),o=AO(this.yt,s);return n.put(o)})}Ws(e,n){const r=n.store("remoteDocuments"),i=[];return r.Z((s,o)=>{const a=n.store("remoteDocumentsV14"),c=(u=o,u.document?new A(pe.fromString(u.document.name).popFirst(5)):u.noDocument?A.fromSegments(u.noDocument.path):u.unknownDocument?A.fromSegments(u.unknownDocument.path):F()).path.toArray();var u;const l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>_.waitFor(i))}zs(e,n){const r=n.store("mutations"),i=QO(this.yt),s=new eP(_f.Bs,this.yt.ie);return r.W().next(o=>{const a=new Map;return o.forEach(c=>{var u;let l=null!==(u=a.get(c.userId))&&void 0!==u?u:re();Ps(this.yt,c).keys().forEach(d=>l=l.add(d)),a.set(c.userId,l)}),_.forEach(a,(c,u)=>{const l=new gt(u),d=df.re(this.yt,l),h=s.getIndexManager(l),f=mf.re(l,this.yt,h,s.referenceDelegate);return new JO(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new mv(n,_n.at),c).next()})})}}function tP(t){t.createObjectStore("targetDocuments",{keyPath:T7}).createIndex("documentTargetsIndex",M7,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",S7,{unique:!0}),t.createObjectStore("targetGlobal")}const Tv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Mv{constructor(e,n,r,i,s,o,a,c,u,l,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Hs=s,this.window=o,this.document=a,this.Js=u,this.Ys=l,this.Xs=d,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=h=>Promise.resolve(),!Mv.C())throw new E(w.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new eW(this,i),this.ii=n+"main",this.yt=new TO(c),this.ri=new qn(this.ii,this.Xs,new dW(this.yt)),this.Cs=new Y7(this.referenceDelegate,this.yt),this.remoteDocumentCache=QO(this.yt),this.Ns=new j7,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&Qe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new E(w.FAILED_PRECONDITION,Tv);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new _n(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var n=this;return this.si=function(){var r=v(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var n=v(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(v(function*(){n.started&&(yield n.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>vf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(n=>this.isPrimary&&!n?this._i(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(_i(e))return S("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return S("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Vu(e).get("owner").next(n=>_.resolve(this.mi(n)))}gi(e){return vf(e).delete(this.clientId)}yi(){var e=this;return v(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=mt(r,"clientMetadata");return i.W().next(s=>{const o=e.Ii(s,18e5),a=s.filter(c=>-1===o.indexOf(c));return _.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.oi)for(const r of n)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?_.resolve(!0):Vu(e).get("owner").next(n=>{if(null!==n&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)){if(this.mi(n)&&this.networkEnabled)return!0;if(!this.mi(n)){if(!n.allowTabSynchronization)throw new E(w.FAILED_PRECONDITION,Tv);return!1}}return!(!this.networkEnabled||!this.inForeground)||vf(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&S("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return v(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new mv(n,_n.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,n){return e.filter(r=>this.pi(r.updateTimeMs,n)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>vf(e).W().next(n=>this.Ii(n,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,n){return mf.re(e,this.yt,n,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Q7(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return df.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,n,r){S("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",s=15===(o=this.Xs)?B7:14===o?SO:13===o?xO:12===o?U7:11===o?IO:void F();var o;let a;return this.ri.runTransaction(e,i,s,c=>(a=new mv(c,this.Ss?this.Ss.next():_n.at),"readwrite-primary"===n?this.fi(a).next(u=>!!u||this.di(a)).next(u=>{if(!u)throw Qe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new E(w.FAILED_PRECONDITION,dA);return r(a)}).next(u=>this.wi(a).next(()=>u)):this.Vi(a).next(()=>r(a)))).then(c=>(a.raiseOnCommittedEvent(),c))}Vi(e){return Vu(e).get("owner").next(n=>{if(null!==n&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)&&!this.mi(n)&&!(this.Ys||this.allowTabSynchronization&&n.allowTabSynchronization))throw new E(w.FAILED_PRECONDITION,Tv)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vu(e).put("owner",n)}static C(){return qn.C()}_i(e){const n=Vu(e);return n.get("owner").next(r=>this.mi(r)?(S("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):_.resolve())}pi(e,n){const r=Date.now();return!(e<r-n||e>r&&(Qe(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),function az(){return!RT()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var n;try{const r=null!==(null===(n=this.oi)||void 0===n?void 0:n.getItem(this.Ti(e)));return S("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Qe("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Qe("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Vu(t){return mt(t,"owner")}function vf(t){return mt(t,"clientMetadata")}function Av(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class Ov{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Si=r,this.Di=i}static Ci(e,n){let r=re(),i=re();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ov(e,n.fromCache,r,i)}}class nP{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.ki(e,n).next(s=>s||this.Oi(e,n,i,r)).next(s=>s||this.Mi(e,n))}ki(e,n){if(UA(n))return _.resolve(null);let r=Kt(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=tf(n,null,"F"),r=Kt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=re(...s);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Fi(n,a);return this.$i(n,u,o,c.readTime)?this.ki(e,tf(n,null,"F")):this.Bi(e,u,n,c)}))})))}Oi(e,n,r,i){return UA(n)||i.isEqual(j.min())?this.Mi(e,n):this.Ni.getDocuments(e,r).next(s=>{const o=this.Fi(n,s);return this.$i(n,o,r,i)?this.Mi(e,n):(K_()<=me.DEBUG&&S("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),lv(n)),this.Bi(e,o,n,uA(i,-1)))})}Fi(e,n){let r=new Ce(jA(e));return n.forEach((i,s)=>{Eu(e,s)&&(r=r.add(s))}),r}$i(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mi(e,n){return K_()<=me.DEBUG&&S("QueryEngine","Using full collection scan to execute query:",lv(n)),this.Ni.getDocumentsMatchingQuery(e,n,yn.min())}Bi(e,n,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class hW{constructor(e,n,r,i){this.persistence=e,this.Li=n,this.yt=i,this.qi=new ze(X),this.Ui=new Ei(s=>xs(s),Du),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JO(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.qi))}}function rP(t,e,n,r){return new hW(t,e,n,r)}function iP(t,e){return Pv.apply(this,arguments)}function Pv(){return Pv=v(function*(t,e){const n=O(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Qi(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=re();for(const u of i){o.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}for(const u of s){a.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({ji:u,removedBatchIds:o,addedBatchIds:a}))})})}),Pv.apply(this,arguments)}function fW(t,e){const n=O(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,c,u){const l=c.batch,d=l.keys();let h=_.resolve();return d.forEach(f=>{h=h.next(()=>u.getEntry(a,f)).next(p=>{const g=c.docVersions.get(f);U(null!==g),p.version.compareTo(g)<0&&(l.applyToRemoteDocument(p,c),p.isValidDocument()&&(p.setReadTime(c.commitVersion),u.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,l))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=re();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function sP(t){const e=O(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function pW(t,e){const n=O(t),r=e.snapshotVersion;let i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;const a=[];e.targetChanges.forEach((l,d)=>{const h=i.get(d);if(!h)return;a.push(n.Cs.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.Cs.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var p,g,m;e.targetMismatches.has(d)?f=f.withResumeToken(dt.EMPTY_BYTE_STRING,j.min()).withLastLimboFreeSnapshotVersion(j.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),g=f,m=l,(0===(p=h).resumeToken.approximateByteSize()||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8||m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0)&&a.push(n.Cs.updateTargetData(s,f))});let c=sn(),u=re();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(oP(s,o,e.documentUpdates).next(l=>{c=l.Wi,u=l.zi})),!r.isEqual(j.min())){const l=n.Cs.getLastRemoteSnapshotVersion(s).next(d=>n.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return _.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.qi=i,s))}function oP(t,e,n){let r=re(),i=re();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=sn();return n.forEach((a,c)=>{const u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(j.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):S("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Wi:o,zi:i}})}function gW(t,e){const n=O(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function da(t,e){const n=O(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Cs.getTargetData(r,e).next(s=>s?(i=s,_.resolve(i)):n.Cs.allocateTargetId(r).next(o=>(i=new Ii(e,o,0,r.currentSequenceNumber),n.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.qi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.qi=n.qi.insert(r.targetId,r),n.Ui.set(e,r.targetId)),r})}function ha(t,e,n){return Rv.apply(this,arguments)}function Rv(){return Rv=v(function*(t,e,n){const r=O(t),i=r.qi.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!_i(o))throw o;S("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}),Rv.apply(this,arguments)}function wf(t,e,n){const r=O(t);let i=j.min(),s=re();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,c,u){const l=O(a),d=l.Ui.get(u);return void 0!==d?_.resolve(l.qi.get(d)):l.Cs.getTargetData(c,u)}(r,o,Kt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Li.getDocumentsMatchingQuery(o,e,n?i:j.min(),n?s:re())).next(a=>(uP(r,VA(e),a),{documents:a,Hi:s})))}function aP(t,e){const n=O(t),r=O(n.Cs),i=n.qi.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ne(s,e).next(o=>o?o.target:null))}function cP(t,e){const n=O(t),r=n.Ki.get(e)||j.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Gi.getAllFromCollectionGroup(i,e,uA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(uP(n,e,i),i))}function uP(t,e,n){let r=t.Ki.get(e)||j.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Ki.set(e,r)}function Nv(){return Nv=v(function*(t,e,n,r){const i=O(t);let s=re(),o=sn();for(const u of n){const l=e.Ji(u.metadata.name);u.document&&(s=s.add(l));const d=e.Yi(u);d.setReadTime(e.Xi(u.metadata.readTime)),o=o.insert(l,d)}const a=i.Gi.newChangeBuffer({trackRemovals:!0}),c=yield da(i,(u=r,Kt(ta(pe.fromString(`__bundle__/docs/${u}`)))));var u;return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>oP(u,a,o).next(l=>(a.apply(u),l)).next(l=>i.Cs.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Cs.addMatchingKeys(u,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,l.Wi,l.zi)).next(()=>l.Wi)))}),Nv.apply(this,arguments)}function yW(t,e){return kv.apply(this,arguments)}function kv(){return kv=v(function*(t,e,n=re()){const r=yield da(t,Kt(wv(e.bundledQuery))),i=O(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Ye(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ns.saveNamedQuery(s,e);const a=r.withResumeToken(dt.EMPTY_BYTE_STRING,o);return i.qi=i.qi.insert(a.targetId,a),i.Cs.updateTargetData(s,a).next(()=>i.Cs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Cs.addMatchingKeys(s,n,r.targetId)).next(()=>i.Ns.saveNamedQuery(s,e))})}),kv.apply(this,arguments)}function lP(t,e){return`firestore_clients_${t}_${e}`}function dP(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Fv(t,e){return`firestore_targets_${t}_${e}`}class bf{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Zi(e,n,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new E(i.error.code,i.error.message))),o?new bf(e,n,i.state,s):(Qe("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ju{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Zi(e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new E(r.error.code,r.error.message))),s?new ju(e,r.state,i):(Qe("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Df{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Zi(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=af();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=mA(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Df(e,s):(Qe("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Lv{constructor(e,n){this.clientId=e,this.onlineState=n}static Zi(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new Lv(n.clientId,n.onlineState):(Qe("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Uv{constructor(){this.activeTargetIds=af()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bv{constructor(e,n,r,i,s){this.window=e,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new ze(X),this.started=!1,this.cr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=lP(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Uv),this.lr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return v(function*(){const n=yield e.syncEngine.vi();for(const i of n){if(i===e.sr)continue;const s=e.getItem(lP(e.persistenceKey,i));if(s){const o=Df.Zi(i,s);o&&(e.ur=e.ur.insert(o.clientId,o))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let n=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,n,r){this.Tr(e,n,r),this.Er(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Fv(this.persistenceKey,e));if(r){const i=ju.Zi(e,r);i&&(n=i.state)}}return this.Ar.er(e),this.gr(),n}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fv(this.persistenceKey,e))}updateQueryState(e,n,r){this.Rr(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return S("SharedClientState","READ",e,n),n}setItem(e,n){S("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){S("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var n=this;const r=e;if(r.storageArea===this.storage){if(S("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Qe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(v(function*(){if(n.started){if(null!==r.key)if(n.lr.test(r.key)){if(null==r.newValue){const i=n.vr(r.key);return n.Vr(i,null)}{const i=n.Sr(r.key,r.newValue);if(i)return n.Vr(i.clientId,i)}}else if(n.dr.test(r.key)){if(null!==r.newValue){const i=n.Dr(r.key,r.newValue);if(i)return n.Cr(i)}}else if(n._r.test(r.key)){if(null!==r.newValue){const i=n.Nr(r.key,r.newValue);if(i)return n.kr(i)}}else if(r.key===n.wr){if(null!==r.newValue){const i=n.yr(r.newValue);if(i)return n.pr(i)}}else if(r.key===n.hr){const i=function(s){let o=_n.at;if(null!=s)try{const a=JSON.parse(s);U("number"==typeof a),o=a}catch(a){Qe("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(r.newValue);i!==_n.at&&n.sequenceNumberHandler(i)}else if(r.key===n.mr){const i=n.Or(r.newValue);yield Promise.all(i.map(s=>n.syncEngine.Mr(s)))}}else n.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,n,r){const i=new bf(this.currentUser,e,n,r),s=dP(this.persistenceKey,this.currentUser,e);this.setItem(s,i.tr())}Er(e){const n=dP(this.persistenceKey,this.currentUser,e);this.removeItem(n)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,n,r){const i=Fv(this.persistenceKey,e),s=new ju(e,n,r);this.setItem(i,s.tr())}Pr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.mr,n)}vr(e){const n=this.lr.exec(e);return n?n[1]:null}Sr(e,n){const r=this.vr(e);return Df.Zi(r,n)}Dr(e,n){const r=this.dr.exec(e),i=Number(r[1]);return bf.Zi(new gt(void 0!==r[2]?r[2]:null),i,n)}Nr(e,n){const r=this._r.exec(e),i=Number(r[1]);return ju.Zi(i,n)}yr(e){return Lv.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var n=this;return v(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Fr(e.batchId,e.state,e.error);S("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,n){const r=n?this.ur.insert(e,n):this.ur.remove(e),i=this.Ir(this.ur),s=this.Ir(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.Br(o,a).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let n=af();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class hP{constructor(){this.Lr=new Uv,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,n,r){this.qr[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Uv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _W{Ur(e){}shutdown(){}}class fP{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){S("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){S("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const vW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wW{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class bW extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,n,r,i,s){const o=this.ho(e,n);S("RestConnection","Sending: ",o,r);const a={};return this.lo(a,i,s),this.fo(e,o,a,r).then(c=>(S("RestConnection","Received: ",c),c),c=>{throw vs("RestConnection",`${e} failed with error: `,c,"url: ",o,"request:",r),c})}_o(e,n,r,i,s,o){return this.ao(e,n,r,i,s)}lo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Qo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,n){return`${this.oo}/v1/${n}:${vW[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,r,i){return new Promise((s,o)=>{const a=new w6;a.setWithCredentials(!0),a.listenOnce(y6.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case W_.NO_ERROR:const u=a.getResponseJson();S("Connection","XHR received:",JSON.stringify(u)),s(u);break;case W_.TIMEOUT:S("Connection",'RPC "'+e+'" timed out'),o(new E(w.DEADLINE_EXCEEDED,"Request time out"));break;case W_.HTTP_ERROR:const l=a.getStatus();if(S("Connection",'RPC "'+e+'" failed with status:',l,"response text:",a.getResponseText()),l>0){let d=a.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d?.error;if(h&&h.status&&h.message){const f=function(p){const g=p.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(g)>=0?g:w.UNKNOWN}(h.status);o(new E(f,h.message))}else o(new E(w.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new E(w.UNAVAILABLE,"Connection failed."));break;default:F()}}finally{S("Connection",'RPC "'+e+'" completed.')}});const c=JSON.stringify(i);a.send(n,"POST",c,r,15)})}wo(e,n,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=g6(),o=m6(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new v6({})),this.lo(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const c=i.join("");S("Connection","Creating WebChannel: "+c,a);const u=s.createWebChannel(c,a);let l=!1,d=!1;const h=new wW({Hr:p=>{d?S("Connection","Not sending because WebChannel is closed:",p):(l||(S("Connection","Opening WebChannel transport."),u.open(),l=!0),S("Connection","WebChannel sending:",p),u.send(p))},Jr:()=>u.close()}),f=(p,g,m)=>{p.listen(g,C=>{try{m(C)}catch(x){setTimeout(()=>{throw x},0)}})};return f(u,zh.EventType.OPEN,()=>{d||S("Connection","WebChannel transport opened.")}),f(u,zh.EventType.CLOSE,()=>{d||(d=!0,S("Connection","WebChannel transport closed"),h.io())}),f(u,zh.EventType.ERROR,p=>{d||(d=!0,vs("Connection","WebChannel transport errored:",p),h.io(new E(w.UNAVAILABLE,"The operation could not be completed")))}),f(u,zh.EventType.MESSAGE,p=>{var g;if(!d){const m=p.data[0];U(!!m);const x=m.error||(null===(g=m[0])||void 0===g?void 0:g.error);if(x){S("Connection","WebChannel received error:",x);const y=x.status;let T=function(V){const Ge=it[V];if(void 0!==Ge)return nO(Ge)}(y),L=x.message;void 0===T&&(T=w.INTERNAL,L="Unknown error status: "+y+" with message "+x.message),d=!0,h.io(new E(T,L)),u.close()}else S("Connection","WebChannel received:",m),h.ro(m)}}),f(o,_6.STAT_EVENT,p=>{p.stat===rA.PROXY?S("Connection","Detected buffering proxy"):p.stat===rA.NOPROXY&&S("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.so()},0),h}}function pP(){return typeof window<"u"?window:null}function Cf(){return typeof document<"u"?document:null}function $u(t){return new h7(t,!0)}class Vv{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=n,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&S("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class gP{constructor(e,n,r,i,s,o,a,c){this.Hs=e,this.vo=r,this.Vo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Vv(e,n)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return v(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return v(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,n){var r=this;return v(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():n&&n.code===w.RESOURCE_EXHAUSTED?(Qe(n.toString()),Qe("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):n&&n.code===w.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(n)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===n&&this.Go(r,i)},r=>{e(()=>{const i=new E(w.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,n){const r=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro(v(function*(){e.state=0,e.start()}))}Qo(e){return S("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(S("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DW extends gP{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.yt=s}jo(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.xo.reset();const n=function g7(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:F(),i=e.targetChange.targetIds||[],s=function(c,u){return c.wt?(U(void 0===u||"string"==typeof u),dt.fromBase64String(u||"")):(U(void 0===u||u instanceof Uint8Array),dt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=void 0===c.code?w.UNKNOWN:nO(c.code);return new E(u,c.message||"")}(o);n=new aO(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=fr(t,r.document.name),s=Ye(r.document.updateTime),o=r.document.createTime?Ye(r.document.createTime):j.min(),a=new It({mapValue:{fields:r.document.fields}}),c=Ae.newFoundDocument(i,s,o,a);n=new cf(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=fr(t,r.document),s=r.readTime?Ye(r.readTime):j.min(),o=Ae.newNoDocument(i,s);n=new cf([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=fr(t,r.document);n=new cf([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return F();{const r=e.filter,s=new r7(r.count||0);n=new oO(r.targetId,s)}}var c;return n}(this.yt,e),r=function(i){if(!("targetChange"in i))return j.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?j.min():s.readTime?Ye(s.readTime):j.min()}(e);return this.listener.Wo(n,r)}zo(e){const n={};n.database=Pu(this.yt),n.addTarget=function(i,s){let o;const a=s.target;return o=Xh(a)?{documents:yO(i,a)}:{query:gv(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=dO(i,s.resumeToken):s.snapshotVersion.compareTo(j.min())>0&&(o.readTime=oa(i,s.snapshotVersion.toTimestamp())),o}(this.yt,e);const r=function y7(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return F()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.Bo(n)}Ho(e){const n={};n.database=Pu(this.yt),n.removeTarget=e,this.Bo(n)}}class CW extends gP{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.yt=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(U(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=function m7(t,e){return t&&t.length>0?(U(void 0!==e),t.map(n=>function(r,i){let s=Ye(r.updateTime?r.updateTime:i);return s.isEqual(j.min())&&(s=Ye(i)),new e7(s,r.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Ye(e.commitTime);return this.listener.Zo(r,n)}return U(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Pu(this.yt),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ru(this.yt,r))};this.Bo(n)}}class EW extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new E(w.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,n,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.ao(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new E(w.UNKNOWN,i.toString())})}_o(e,n,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection._o(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new E(w.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class xW{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Qe(n),this.ou=!1):S("OnlineStateTracker",n)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class SW{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.Ur(a=>{r.enqueueAndForget(v(function*(){var c;qr(o)&&(S("RemoteStore","Restarting streams for network reachability change."),yield(c=v(function*(u){const l=O(u);l._u.add(4),yield fa(l),l.gu.set("Unknown"),l._u.delete(4),yield Hu(l)}),function(u){return c.apply(this,arguments)})(o))}))}),this.gu=new xW(r,i)}}function Hu(t){return $v.apply(this,arguments)}function $v(){return $v=v(function*(t){if(qr(t))for(const e of t.wu)yield e(!0)}),$v.apply(this,arguments)}function fa(t){return Hv.apply(this,arguments)}function Hv(){return Hv=v(function*(t){for(const e of t.wu)yield e(!1)}),Hv.apply(this,arguments)}function Ef(t,e){const n=O(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),Gv(n)?zv(n):ga(n).ko()&&qv(n,e))}function qu(t,e){const n=O(t),r=ga(n);n.du.delete(e),r.ko()&&mP(n,e),0===n.du.size&&(r.ko()?r.Fo():qr(n)&&n.gu.set("Unknown"))}function qv(t,e){t.yu.Ot(e.targetId),ga(t).zo(e)}function mP(t,e){t.yu.Ot(e),ga(t).Ho(e)}function zv(t){t.yu=new c7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>t.du.get(e)||null}),ga(t).start(),t.gu.uu()}function Gv(t){return qr(t)&&!ga(t).No()&&t.du.size>0}function qr(t){return 0===O(t)._u.size}function yP(t){t.yu=void 0}function TW(t){return Wv.apply(this,arguments)}function Wv(){return Wv=v(function*(t){t.du.forEach((e,n)=>{qv(t,e)})}),Wv.apply(this,arguments)}function MW(t,e){return Kv.apply(this,arguments)}function Kv(){return Kv=v(function*(t,e){yP(t),Gv(t)?(t.gu.hu(e),zv(t)):t.gu.set("Unknown")}),Kv.apply(this,arguments)}function AW(t,e,n){return Qv.apply(this,arguments)}function Qv(){return Qv=v(function*(t,e,n){if(t.gu.set("Online"),e instanceof aO&&2===e.state&&e.cause)try{yield(r=v(function*(i,s){const o=s.cause;for(const a of s.targetIds)i.du.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.du.delete(a),i.yu.removeTarget(a))}),function(i,s){return r.apply(this,arguments)})(t,e)}catch(r){S("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield If(t,r)}else if(e instanceof cf?t.yu.Kt(e):e instanceof oO?t.yu.Jt(e):t.yu.jt(e),!n.isEqual(j.min()))try{const r=yield sP(t.localStore);n.compareTo(r)>=0&&(yield function(i,s){const o=i.yu.Zt(s);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const u=i.du.get(c);u&&i.du.set(c,u.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const c=i.du.get(a);if(!c)return;i.du.set(a,c.withResumeToken(dt.EMPTY_BYTE_STRING,c.snapshotVersion)),mP(i,a);const u=new Ii(c.target,a,1,c.sequenceNumber);qv(i,u)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n))}catch(r){S("RemoteStore","Failed to raise snapshot:",r),yield If(t,r)}var r}),Qv.apply(this,arguments)}function If(t,e,n){return Yv.apply(this,arguments)}function Yv(){return Yv=v(function*(t,e,n){if(!_i(e))throw e;t._u.add(1),yield fa(t),t.gu.set("Offline"),n||(n=()=>sP(t.localStore)),t.asyncQueue.enqueueRetryable(v(function*(){S("RemoteStore","Retrying IndexedDB access"),yield n(),t._u.delete(1),yield Hu(t)}))}),Yv.apply(this,arguments)}function _P(t,e){return e().catch(n=>If(t,n,e))}function pa(t){return Zv.apply(this,arguments)}function Zv(){return Zv=v(function*(t){const e=O(t),n=Mi(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;OW(e);)try{const i=yield gW(e.localStore,r);if(null===i){0===e.fu.length&&n.Fo();break}r=i.batchId,PW(e,i)}catch(i){yield If(e,i)}vP(e)&&wP(e)}),Zv.apply(this,arguments)}function OW(t){return qr(t)&&t.fu.length<10}function PW(t,e){t.fu.push(e);const n=Mi(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function vP(t){return qr(t)&&!Mi(t).No()&&t.fu.length>0}function wP(t){Mi(t).start()}function RW(t){return Xv.apply(this,arguments)}function Xv(){return Xv=v(function*(t){Mi(t).eu()}),Xv.apply(this,arguments)}function NW(t){return Jv.apply(this,arguments)}function Jv(){return Jv=v(function*(t){const e=Mi(t);for(const n of t.fu)e.Xo(n.mutations)}),Jv.apply(this,arguments)}function kW(t,e,n){return ew.apply(this,arguments)}function ew(){return ew=v(function*(t,e,n){const r=t.fu.shift(),i=_v.from(r,e,n);yield _P(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield pa(t)}),ew.apply(this,arguments)}function FW(t,e){return tw.apply(this,arguments)}function tw(){return tw=v(function*(t,e){var n;e&&Mi(t).Yo&&(yield(n=v(function*(r,i){if(tO(s=i.code)&&s!==w.ABORTED){const o=r.fu.shift();Mi(r).Mo(),yield _P(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield pa(r)}var s}),function(r,i){return n.apply(this,arguments)})(t,e)),vP(t)&&wP(t)}),tw.apply(this,arguments)}function bP(t,e){return nw.apply(this,arguments)}function nw(){return nw=v(function*(t,e){const n=O(t);n.asyncQueue.verifyOperationInProgress(),S("RemoteStore","RemoteStore received new credentials");const r=qr(n);n._u.add(3),yield fa(n),r&&n.gu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),yield Hu(n)}),nw.apply(this,arguments)}function rw(t,e){return iw.apply(this,arguments)}function iw(){return iw=v(function*(t,e){const n=O(t);e?(n._u.delete(2),yield Hu(n)):e||(n._u.add(2),yield fa(n),n.gu.set("Unknown"))}),iw.apply(this,arguments)}function ga(t){return t.pu||(t.pu=function(e,n,r){const i=O(e);return i.su(),new DW(n,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(t.datastore,t.asyncQueue,{Yr:TW.bind(null,t),Zr:MW.bind(null,t),Wo:AW.bind(null,t)}),t.wu.push(function(){var e=v(function*(n){n?(t.pu.Mo(),Gv(t)?zv(t):t.gu.set("Unknown")):(yield t.pu.stop(),yP(t))});return function(n){return e.apply(this,arguments)}}())),t.pu}function Mi(t){return t.Iu||(t.Iu=function(e,n,r){const i=O(e);return i.su(),new CW(n,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(t.datastore,t.asyncQueue,{Yr:RW.bind(null,t),Zr:FW.bind(null,t),tu:NW.bind(null,t),Zo:kW.bind(null,t)}),t.wu.push(function(){var e=v(function*(n){n?(t.Iu.Mo(),yield pa(t)):(yield t.Iu.stop(),t.fu.length>0&&(S("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))});return function(n){return e.apply(this,arguments)}}())),t.Iu}class sw{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new lt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new sw(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new E(w.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ma(t,e){if(Qe("AsyncQueue",`${e}: ${t}`),_i(t))return new E(w.UNAVAILABLE,`${e}: ${t}`);throw t}class ya{constructor(e){this.comparator=e?(n,r)=>e(n,r)||A.comparator(n.key,r.key):(n,r)=>A.comparator(n.key,r.key),this.keyedMap=Su(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new ya(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ya)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new ya;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class DP{constructor(){this.Tu=new ze(A.comparator)}track(e){const n=e.doc.key,r=this.Tu.get(n);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(n,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(n):1===e.type&&2===r.type?this.Tu=this.Tu.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):F():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,r)=>{e.push(r)}),e}}class _a{constructor(e,n,r,i,s,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new _a(e,n,ya.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class LW{constructor(){this.Au=void 0,this.listeners=[]}}class UW{constructor(){this.queries=new Ei(e=>BA(e),Cu),this.onlineState="Unknown",this.Ru=new Set}}function ow(t,e){return aw.apply(this,arguments)}function aw(){return aw=v(function*(t,e){const n=O(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new LW),i)try{s.Au=yield n.onListen(r)}catch(o){const a=ma(o,`Initialization of query '${lv(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.bu(n.onlineState),s.Au&&e.Pu(s.Au)&&lw(n)}),aw.apply(this,arguments)}function cw(t,e){return uw.apply(this,arguments)}function uw(){return uw=v(function*(t,e){const n=O(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),uw.apply(this,arguments)}function BW(t,e){const n=O(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.Pu(i)&&(r=!0);o.Au=i}}r&&lw(n)}function VW(t,e,n){const r=O(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function lw(t){t.Ru.forEach(e=>{e.next()})}class dw{constructor(e,n,r){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new _a(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){return!e.fromCache||(!this.options.Nu||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=_a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class jW{constructor(e,n){this.ku=e,this.byteLength=n}Ou(){return"metadata"in this.ku}}class CP{constructor(e){this.yt=e}Ji(e){return fr(this.yt,e)}Yi(e){return e.metadata.exists?mO(this.yt,e.document,!1):Ae.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ye(e)}}class $W{constructor(e,n,r){this.Mu=e,this.localStore=n,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=EP(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++n;const r=pe.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}$u(e){const n=new Map,r=new CP(this.yt);for(const i of e)if(i.metadata.queries){const s=r.Ji(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||re()).add(s);n.set(o,a)}}return n}complete(){var e=this;return v(function*(){const n=yield function mW(t,e,n,r){return Nv.apply(this,arguments)}(e.localStore,new CP(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield yW(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:n}})()}}function EP(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class IP{constructor(e){this.key=e}}class xP{constructor(e){this.key=e}}class SP{constructor(e,n){this.query=e,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=re(),this.mutatedKeys=re(),this.Gu=jA(e),this.Qu=new ya(this.Gu)}get ju(){return this.qu}Wu(e,n){const r=n?n.zu:new DP,i=n?n.Qu:this.Qu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const h=i.get(l),f=Eu(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let m=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),m=!0):this.Hu(h,f)||(r.track({type:2,doc:f}),m=!0,(c&&this.Gu(f,c)>0||u&&this.Gu(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(c||u)&&(a=!0)),m&&(f?(o=o.add(f),s=g?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:a,mutatedKeys:s}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((u,l)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return F()}};return f(d)-f(h)}(u.type,l.type)||this.Gu(u.doc,l.doc)),this.Ju(r);const o=n?this.Yu():[],a=0===this.Ku.size&&this.current?1:0,c=a!==this.Uu;return this.Uu=a,0!==s.length||c?{snapshot:new _a(this.query,e.Qu,i,s,e.mutatedKeys,0===a,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new DP,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.qu=this.qu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qu=this.qu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=re(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const n=[];return e.forEach(r=>{this.Ku.has(r)||n.push(new xP(r))}),this.Ku.forEach(r=>{e.has(r)||n.push(new IP(r))}),n}tc(e){this.qu=e.Hi,this.Ku=re();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ec(){return _a.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class HW{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class qW{constructor(e){this.key=e,this.nc=!1}}class zW{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new Ei(a=>BA(a),Cu),this.rc=new Map,this.oc=new Set,this.uc=new ze(A.comparator),this.cc=new Map,this.ac=new Sv,this.hc={},this.lc=new Map,this.fc=ks.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function GW(t,e){return hw.apply(this,arguments)}function hw(){return hw=v(function*(t,e){const n=kw(t);let r,i;const s=n.ic.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const o=yield da(n.localStore,Kt(e));n.isPrimaryClient&&Ef(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield fw(n,e,r,"current"===a,o.resumeToken)}return i}),hw.apply(this,arguments)}function fw(t,e,n,r,i){return pw.apply(this,arguments)}function pw(){return pw=v(function*(t,e,n,r,i){t._c=(d,h,f)=>{return(p=v(function*(g,m,C,x){let y=m.view.Wu(C);y.$i&&(y=yield wf(g.localStore,m.query,!1).then(({documents:V})=>m.view.Wu(V,y)));const T=x&&x.targetChanges.get(m.targetId),L=m.view.applyChanges(y,g.isPrimaryClient,T);return Ew(g,m.targetId,L.Xu),L.snapshot}),function(g,m,C,x){return p.apply(this,arguments)})(t,d,h,f);var p};const s=yield wf(t.localStore,e,!0),o=new SP(e,s.Hi),a=o.Wu(s.documents),c=Au.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),u=o.applyChanges(a,t.isPrimaryClient,c);Ew(t,n,u.Xu);const l=new HW(e,n,o);return t.ic.set(e,l),t.rc.has(n)?t.rc.get(n).push(e):t.rc.set(n,[e]),u.snapshot}),pw.apply(this,arguments)}function WW(t,e){return gw.apply(this,arguments)}function gw(){return gw=v(function*(t,e){const n=O(t),r=n.ic.get(e),i=n.rc.get(r.targetId);if(i.length>1)return n.rc.set(r.targetId,i.filter(s=>!Cu(s,e))),void n.ic.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ha(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),qu(n.remoteStore,r.targetId),va(n,r.targetId)}).catch(yi))):(va(n,r.targetId),yield ha(n.localStore,r.targetId,!0))}),gw.apply(this,arguments)}function mw(){return mw=v(function*(t,e,n){const r=Fw(t);try{const i=yield function(s,o){const a=O(s),c=Ne.now(),u=o.reduce((h,f)=>h.add(f.key),re());let l,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=sn(),p=re();return a.Gi.getEntries(h,u).next(g=>{f=g,f.forEach((m,C)=>{C.isValidDocument()||(p=p.add(m))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(g=>{l=g;const m=[];for(const C of o){const x=n7(C,l.get(C.key).overlayedDocument);null!=x&&m.push(new Hr(C.key,x,NA(x.value.mapValue),ke.exists(!0)))}return a.mutationQueue.addMutationBatch(h,c,m,o)}).next(g=>{d=g;const m=g.applyToLocalDocumentSet(l,p);return a.documentOverlayCache.saveOverlays(h,g.batchId,m)})}).then(()=>({batchId:d.batchId,changes:iO(l)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let c=s.hc[s.currentUser.toKey()];c||(c=new ze(X)),c=c.insert(o,a),s.hc[s.currentUser.toKey()]=c}(r,i.batchId,n),yield zr(r,i.changes),yield pa(r.remoteStore)}catch(i){const s=ma(i,"Failed to persist write");n.reject(s)}}),mw.apply(this,arguments)}function TP(t,e){return yw.apply(this,arguments)}function yw(){return yw=v(function*(t,e){const n=O(t);try{const r=yield pW(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.cc.get(s);o&&(U(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.nc=!0:i.modifiedDocuments.size>0?U(o.nc):i.removedDocuments.size>0&&(U(o.nc),o.nc=!1))}),yield zr(n,r,e)}catch(r){yield yi(r)}}),yw.apply(this,arguments)}function MP(t,e,n){const r=O(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ic.forEach((s,o)=>{const a=o.view.bu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=O(s);a.onlineState=o;let c=!1;a.queries.forEach((u,l)=>{for(const d of l.listeners)d.bu(o)&&(c=!0)}),c&&lw(a)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function QW(t,e,n){return _w.apply(this,arguments)}function _w(){return _w=v(function*(t,e,n){const r=O(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.cc.get(e),s=i&&i.key;if(s){let o=new ze(A.comparator);o=o.insert(s,Ae.newNoDocument(s,j.min()));const a=re().add(s),c=new Mu(j.min(),new Map,new Ce(X),o,a);yield TP(r,c),r.uc=r.uc.remove(s),r.cc.delete(e),Iw(r)}else yield ha(r.localStore,e,!1).then(()=>va(r,e,n)).catch(yi)}),_w.apply(this,arguments)}function YW(t,e){return vw.apply(this,arguments)}function vw(){return vw=v(function*(t,e){const n=O(t),r=e.batch.batchId;try{const i=yield fW(n.localStore,e);Cw(n,r,null),Dw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield zr(n,i)}catch(i){yield yi(i)}}),vw.apply(this,arguments)}function ZW(t,e,n){return ww.apply(this,arguments)}function ww(){return ww=v(function*(t,e,n){const r=O(t);try{const i=yield function(s,o){const a=O(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return a.mutationQueue.lookupMutationBatch(c,o).next(l=>(U(null!==l),u=l.keys(),a.mutationQueue.removeMutationBatch(c,l))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>a.localDocuments.getDocuments(c,u))})}(r.localStore,e);Cw(r,e,n),Dw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield zr(r,i)}catch(i){yield yi(i)}}),ww.apply(this,arguments)}function bw(){return bw=v(function*(t,e){const n=O(t);qr(n.remoteStore)||S("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const o=O(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(-1===r)return void e.resolve();const i=n.lc.get(r)||[];i.push(e),n.lc.set(r,i)}catch(r){const i=ma(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),bw.apply(this,arguments)}function Dw(t,e){(t.lc.get(e)||[]).forEach(n=>{n.resolve()}),t.lc.delete(e)}function Cw(t,e,n){const r=O(t);let i=r.hc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function va(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.rc.get(e))t.ic.delete(r),n&&t.sc.wc(r,n);t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach(r=>{t.ac.containsKey(r)||AP(t,r)})}function AP(t,e){t.oc.delete(e.path.canonicalString());const n=t.uc.get(e);null!==n&&(qu(t.remoteStore,n),t.uc=t.uc.remove(e),t.cc.delete(n),Iw(t))}function Ew(t,e,n){for(const r of n)r instanceof IP?(t.ac.addReference(r.key,e),JW(t,r)):r instanceof xP?(S("SyncEngine","Document no longer in limbo: "+r.key),t.ac.removeReference(r.key,e),t.ac.containsKey(r.key)||AP(t,r.key)):F()}function JW(t,e){const n=e.key,r=n.path.canonicalString();t.uc.get(n)||t.oc.has(r)||(S("SyncEngine","New document in limbo: "+n),t.oc.add(r),Iw(t))}function Iw(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){const e=t.oc.values().next().value;t.oc.delete(e);const n=new A(pe.fromString(e)),r=t.fc.next();t.cc.set(r,new qW(n)),t.uc=t.uc.insert(n,r),Ef(t.remoteStore,new Ii(Kt(ta(n.path)),r,2,_n.at))}}function zr(t,e,n){return xw.apply(this,arguments)}function xw(){return xw=v(function*(t,e,n){const r=O(t),i=[],s=[],o=[];var a;r.ic.isEmpty()||(r.ic.forEach((a,c)=>{o.push(r._c(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);const l=Ov.Ci(c.targetId,u);s.push(l)}}))}),yield Promise.all(o),r.sc.Wo(i),yield(a=v(function*(c,u){const l=O(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>_.forEach(u,h=>_.forEach(h.Si,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>_.forEach(h.Di,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!_i(d))throw d;S("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const h=d.targetId;if(!d.fromCache){const f=l.qi.get(h),g=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);l.qi=l.qi.insert(h,g)}}}),function(c,u){return a.apply(this,arguments)})(r.localStore,s))}),xw.apply(this,arguments)}function eK(t,e){return Sw.apply(this,arguments)}function Sw(){return Sw=v(function*(t,e){const n=O(t);if(!n.currentUser.isEqual(e)){S("SyncEngine","User change. New user:",e.toKey());const r=yield iP(n.localStore,e);n.currentUser=e,(i=n).lc.forEach(o=>{o.forEach(a=>{a.reject(new E(w.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield zr(n,r.ji)}var i}),Sw.apply(this,arguments)}function tK(t,e){const n=O(t),r=n.cc.get(e);if(r&&r.nc)return re().add(r.key);{let i=re();const s=n.rc.get(e);if(!s)return i;for(const o of s){const a=n.ic.get(o);i=i.unionWith(a.view.ju)}return i}}function nK(t,e){return Tw.apply(this,arguments)}function Tw(){return Tw=v(function*(t,e){const n=O(t),r=yield wf(n.localStore,e.query,!0),i=e.view.tc(r);return n.isPrimaryClient&&Ew(n,e.targetId,i.Xu),i}),Tw.apply(this,arguments)}function rK(t,e){return Mw.apply(this,arguments)}function Mw(){return Mw=v(function*(t,e){const n=O(t);return cP(n.localStore,e).then(r=>zr(n,r))}),Mw.apply(this,arguments)}function iK(t,e,n,r){return Aw.apply(this,arguments)}function Aw(){return Aw=v(function*(t,e,n,r){const i=O(t),s=yield function(o,a){const c=O(o),u=O(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",l=>u.Tn(l,a).next(d=>d?c.localDocuments.getDocuments(l,d):_.resolve(null)))}(i.localStore,e);var a;null!==s?("pending"===n?yield pa(i.remoteStore):"acknowledged"===n||"rejected"===n?(Cw(i,e,r||null),Dw(i,e),a=e,O(O(i.localStore).mutationQueue).An(a)):F(),yield zr(i,s)):S("SyncEngine","Cannot apply mutation batch with id: "+e)}),Aw.apply(this,arguments)}function Ow(){return Ow=v(function*(t,e){const n=O(t);if(kw(n),Fw(n),!0===e&&!0!==n.dc){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield OP(n,r.toArray());n.dc=!0,yield rw(n.remoteStore,!0);for(const s of i)Ef(n.remoteStore,s)}else if(!1===e&&!1!==n.dc){const r=[];let i=Promise.resolve();n.rc.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(va(n,o),ha(n.localStore,o,!0))),qu(n.remoteStore,o)}),yield i,yield OP(n,r),function(s){const o=O(s);o.cc.forEach((a,c)=>{qu(o.remoteStore,c)}),o.ac.fs(),o.cc=new Map,o.uc=new ze(A.comparator)}(n),n.dc=!1,yield rw(n.remoteStore,!1)}}),Ow.apply(this,arguments)}function OP(t,e,n){return Pw.apply(this,arguments)}function Pw(){return Pw=v(function*(t,e,n){const r=O(t),i=[],s=[];for(const o of e){let a;const c=r.rc.get(o);if(c&&0!==c.length){a=yield da(r.localStore,Kt(c[0]));for(const u of c){const l=r.ic.get(u),d=yield nK(r,l);d.snapshot&&s.push(d.snapshot)}}else{const u=yield aP(r.localStore,o);a=yield da(r.localStore,u),yield fw(r,PP(u),o,!1,a.resumeToken)}i.push(a)}return r.sc.Wo(s),i}),Pw.apply(this,arguments)}function PP(t){return LA(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function oK(t){const e=O(t);return O(O(e.localStore).persistence).vi()}function aK(t,e,n,r){return Rw.apply(this,arguments)}function Rw(){return Rw=v(function*(t,e,n,r){const i=O(t);if(i.dc)return void S("SyncEngine","Ignoring unexpected query state notification.");const s=i.rc.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=yield cP(i.localStore,VA(s[0])),a=Mu.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,dt.EMPTY_BYTE_STRING);yield zr(i,o,a);break}case"rejected":yield ha(i.localStore,e,!0),va(i,e,r);break;default:F()}}),Rw.apply(this,arguments)}function cK(t,e,n){return Nw.apply(this,arguments)}function Nw(){return Nw=v(function*(t,e,n){const r=kw(t);if(r.dc){for(const i of e){if(r.rc.has(i)){S("SyncEngine","Adding an already active target "+i);continue}const s=yield aP(r.localStore,i),o=yield da(r.localStore,s);yield fw(r,PP(s),o.targetId,!1,o.resumeToken),Ef(r.remoteStore,o)}for(const i of n)r.rc.has(i)&&(yield ha(r.localStore,i,!1).then(()=>{qu(r.remoteStore,i),va(r,i)}).catch(yi))}}),Nw.apply(this,arguments)}function kw(t){const e=O(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QW.bind(null,e),e.sc.Wo=BW.bind(null,e.eventManager),e.sc.wc=VW.bind(null,e.eventManager),e}function Fw(t){const e=O(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZW.bind(null,e),e}class RP{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return v(function*(){n.yt=$u(e.databaseInfo.databaseId),n.sharedClientState=n.gc(e),n.persistence=n.yc(e),yield n.persistence.start(),n.localStore=n.Ic(e),n.gcScheduler=n.Tc(e,n.localStore),n.indexBackfillerScheduler=n.Ec(e,n.localStore)})()}Tc(e,n){return null}Ec(e,n){return null}Ic(e){return rP(this.persistence,new nP,e.initialUser,this.yt)}yc(e){return new eP(_f.Bs,this.yt)}gc(e){return new hP}terminate(){var e=this;return v(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class NP extends RP{constructor(e,n,r){super(),this.Ac=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return v(function*(){yield n().call(r,e),yield r.Ac.initialize(r,e),yield Fw(r.Ac.syncEngine),yield pa(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return rP(this.persistence,new nP,e.initialUser,this.yt)}Tc(e,n){return new X7(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}Ec(e,n){const r=new F6(n,this.persistence);return new k6(e.asyncQueue,r)}yc(e){const n=Av(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new Mv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,pP(),Cf(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new hP}}class lK extends NP{constructor(e,n){super(e,n,!1),this.Ac=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return v(function*(){yield n().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof Bv&&(r.sharedClientState.syncEngine={Fr:iK.bind(null,i),$r:aK.bind(null,i),Br:cK.bind(null,i),vi:oK.bind(null,i),Mr:rK.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var s=v(function*(o){yield function sK(t,e){return Ow.apply(this,arguments)}(r.Ac.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}gc(e){const n=pP();if(!Bv.C(n))throw new E(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Av(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Bv(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Lw{initialize(e,n){var r=this;return v(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>MP(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=eK.bind(null,r.syncEngine),yield rw(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new UW}createDatastore(e){const n=$u(e.databaseInfo.databaseId),r=new bW(e.databaseInfo);return new EW(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>MP(this.syncEngine,a,0),o=fP.C()?new fP:new _W,new SW(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,c,u){const l=new zW(r,i,s,o,a,c);return u&&(l.dc=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=v(function*(n){const r=O(n);S("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield fa(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}function Uw(t,e,n){if(!n)throw new E(w.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kP(t,e,n,r){if(!0===e&&!0===r)throw new E(w.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function FP(t){if(!A.isDocumentKey(t))throw new E(w.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function LP(t){if(A.isDocumentKey(t))throw new E(w.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(n=t).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof t?"a function":F()}function le(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new E(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xf(t);throw new E(w.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function UP(t,e){if(e<=0)throw new E(w.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}const BP=new Map;class VP{constructor(e){var n;if(void 0===e.host){if(void 0!==e.ssl)throw new E(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new E(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,kP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VP({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new E(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new E(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VP(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new C6;switch(n.type){case"gapi":return new S6(n.client,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new E(w.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=BP.get(e);n&&(S("ComponentProvider","Removing Datastore"),BP.delete(e),n.terminate())}(this),Promise.resolve()}}class Oe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Oe(this.firestore,e,this._key)}}class xt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xt(this.firestore,e,this._query)}}class gr extends xt{constructor(e,n,r){super(e,n,ta(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Oe(this.firestore,null,new A(e))}withConverter(e){return new gr(this.firestore,e,this._path)}}function $P(t,e,...n){if(t=De(t),Uw("collection","path",e),t instanceof zu){const r=pe.fromString(e,...n);return LP(r),new gr(t,null,r)}{if(!(t instanceof Oe||t instanceof gr))throw new E(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return LP(r),new gr(t.firestore,null,r)}}function Sf(t,e,...n){if(t=De(t),1===arguments.length&&(e=aA.R()),Uw("doc","path",e),t instanceof zu){const r=pe.fromString(e,...n);return FP(r),new Oe(t,null,new A(r))}{if(!(t instanceof Oe||t instanceof gr))throw new E(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return FP(r),new Oe(t.firestore,t instanceof gr?t.converter:null,new A(r))}}function HP(t,e){return t=De(t),e=De(e),(t instanceof Oe||t instanceof gr)&&(e instanceof Oe||e instanceof gr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Bw(t,e){return t=De(t),e=De(e),t instanceof xt&&e instanceof xt&&t.firestore===e.firestore&&Cu(t._query,e._query)&&t.converter===e.converter}function qP(t,e=10240){let n=0;return{read:()=>v(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>v(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Tf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Qe("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class hK{constructor(e,n){this.Pc=e,this.yt=n,this.metadata=new lt,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return v(function*(){return e.metadata.promise})()}mc(){var e=this;return v(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return v(function*(){const n=yield e.Sc();if(null===n)return null;const r=e.vc.decode(n),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const s=yield e.Cc(i);return new jW(JSON.parse(s),n.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return v(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const n=e.xc();n<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Cc(e){var n=this;return v(function*(){for(;n.buffer.length<e;)(yield n.Nc())&&n.Dc("Reached the end of bundle when more is expected.");const r=n.vc.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return v(function*(){const n=yield e.Pc.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class gK{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return v(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new E(w.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=v(function*(s,o){const a=O(s),c=Pu(a.yt)+"/documents",u={documents:o.map(f=>Ou(a.yt,f))},l=yield a._o("BatchGetDocuments",c,u,o.length),d=new Map;l.forEach(f=>{const p=function p7(t,e){return"found"in e?function(n,r){U(!!r.found);const i=fr(n,r.found.name),s=Ye(r.found.updateTime),o=r.found.createTime?Ye(r.found.createTime):j.min(),a=new It({mapValue:{fields:r.found.fields}});return Ae.newFoundDocument(i,s,o,a)}(t,e):"missing"in e?function(n,r){U(!!r.missing),U(!!r.readTime);const i=fr(n,r.missing),s=Ye(r.readTime);return Ae.newNoDocument(i,s)}(t,e):F()}(a.yt,f);d.set(p.key.toString(),p)});const h=[];return o.forEach(f=>{const p=d.get(f.toString());U(!!p),h.push(p)}),h}),function(s,o){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new sa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return v(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const s=A.fromPath(i);e.mutations.push(new dv(s,e.precondition(s)))}),yield(r=v(function*(i,s){const o=O(i),a=Pu(o.yt)+"/documents",c={writes:s.map(u=>Ru(o.yt,u))};yield o.ao("Commit",a,c)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw F();n=j.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new E(w.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(j.min())?ke.exists(!1):ke.updateTime(n):ke.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(j.min()))throw new E(w.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ke.updateTime(n)}return ke.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class mK{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.kc=r.maxAttempts,this.xo=new Vv(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro(v(function*(){const n=new gK(e.datastore),r=e.Mc(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Fc(s)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const n=this.updateFunction(e);return!mu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!tO(n)}return!1}}class yK{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=gt.UNAUTHENTICATED,this.clientId=aA.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=v(function*(a){S("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(S("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return v(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new E(w.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new lt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(v(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=ma(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function zP(t,e){return Vw.apply(this,arguments)}function Vw(){return Vw=v(function*(t,e){t.asyncQueue.verifyOperationInProgress(),S("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=v(function*(s){r.isEqual(s)||(yield iP(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}),Vw.apply(this,arguments)}function GP(t,e){return jw.apply(this,arguments)}function jw(){return jw=v(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield $w(t);S("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>bP(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>bP(e.remoteStore,s)),t.onlineComponents=e}),jw.apply(this,arguments)}function $w(t){return Hw.apply(this,arguments)}function Hw(){return Hw=v(function*(t){return t.offlineComponents||(S("FirestoreClient","Using default OfflineComponentProvider"),yield zP(t,new RP)),t.offlineComponents}),Hw.apply(this,arguments)}function Mf(t){return qw.apply(this,arguments)}function qw(){return qw=v(function*(t){return t.onlineComponents||(S("FirestoreClient","Using default OnlineComponentProvider"),yield GP(t,new Lw)),t.onlineComponents}),qw.apply(this,arguments)}function WP(t){return $w(t).then(e=>e.persistence)}function Af(t){return $w(t).then(e=>e.localStore)}function zw(t){return Mf(t).then(e=>e.remoteStore)}function Gw(t){return Mf(t).then(e=>e.syncEngine)}function wa(t){return Ww.apply(this,arguments)}function Ww(){return Ww=v(function*(t){const e=yield Mf(t),n=e.eventManager;return n.onListen=GW.bind(null,e.syncEngine),n.onUnlisten=WW.bind(null,e.syncEngine),n}),Ww.apply(this,arguments)}function QP(t,e,n={}){const r=new lt;return t.asyncQueue.enqueueAndForget(v(function*(){return function(i,s,o,a,c){const u=new Tf({next:d=>{s.enqueueAndForget(()=>cw(i,l));const h=d.docs.has(o);!h&&d.fromCache?c.reject(new E(w.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&a&&"server"===a.source?c.reject(new E(w.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),l=new dw(ta(o.path),u,{includeMetadataChanges:!0,Nu:!0});return ow(i,l)}(yield wa(t),t.asyncQueue,e,n,r)})),r.promise}function YP(t,e,n={}){const r=new lt;return t.asyncQueue.enqueueAndForget(v(function*(){return function(i,s,o,a,c){const u=new Tf({next:d=>{s.enqueueAndForget(()=>cw(i,l)),d.fromCache&&"server"===a.source?c.reject(new E(w.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),l=new dw(o,u,{includeMetadataChanges:!0,Nu:!0});return ow(i,l)}(yield wa(t),t.asyncQueue,e,n,r)})),r.promise}class IK{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Vv(this,"async_queue_retry"),this.Wc=()=>{const n=Cf();n&&S("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=Cf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const n=Cf();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const n=new lt;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return v(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(n){if(!_i(n))throw n;S("AsyncQueue","Operation failed with retryable error: "+n)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Qe("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=n,n}enqueueAfterDelay(e,n,r){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const i=sw.createAndSchedule(this,e,n,r,s=>this.Yc(s));return this.Uc.push(i),i}zc(){this.Kc&&F()}verifyOperationInProgress(){}Xc(){var e=this;return v(function*(){let n;do{n=e.Bc,yield n}while(n!==e.Bc)})()}Zc(e){for(const n of this.Uc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.Uc.indexOf(e);this.Uc.splice(n,1)}}function Kw(t){return function(e,n){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(t)}class xK{constructor(){this._progressObserver={},this._taskCompletionResolver=new lt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Pe extends zu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new IK,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ZP(this),this._firestoreClient.terminate()}}function Ze(t){return t._firestoreClient||ZP(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ZP(t){var e;const n=t._freezeSettings(),r=(s=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new L6(t._databaseId,s,t._persistenceKey,(a=n).host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams));var s,a;t._firestoreClient=new yK(t._authCredentials,t._appCheckCredentials,t._queue,r)}function XP(t,e,n){const r=new lt;return t.asyncQueue.enqueue(v(function*(){try{yield zP(t,n),yield GP(t,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(o=s).name?o.code===w.FAILED_PRECONDITION||o.code===w.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||22===o.code||20===o.code||11===o.code))throw s;vs("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var o})).then(()=>r.promise)}function JP(t){if(t._initialized||t._terminated)throw new E(w.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class mr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mr(dt.fromBase64String(e))}catch(n){throw new E(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new mr(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Gr{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new E(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ls{constructor(e){this._methodName=e}}class Of{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new E(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new E(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return X(this._lat,e._lat)||X(this._long,e._long)}}const FK=/^__.*__$/;class LK{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Hr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ia(e,this.data,n,this.fieldTransforms)}}class eR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Hr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw F()}}class Pf{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=i,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Pf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return kf(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(tR(this.sa)&&FK.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class UK{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.yt=r||$u(e)}da(e,n,r,i=!1){return new Pf({sa:e,methodName:n,fa:r,path:He.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Us(t){const e=t._freezeSettings(),n=$u(t._databaseId);return new UK(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Rf(t,e,n,r,i,s={}){const o=t.da(s.merge||s.mergeFields?2:0,e,n,i);Xw("Data must be an object, but it was:",o,r);const a=iR(r,o);let c,u;if(s.merge)c=new rn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const l=[];for(const d of s.mergeFields){const h=Jw(e,d,n);if(!o.contains(h))throw new E(w.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);oR(l,h)||l.push(h)}c=new rn(l),u=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=o.fieldTransforms;return new LK(new It(a),c,u)}class Gu extends Ls{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gu}}function nR(t,e,n){return new Pf({sa:3,fa:e.settings.fa,methodName:t._methodName,oa:n},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class Qw extends Ls{_toFieldTransform(e){return new Iu(e.path,new na)}isEqual(e){return e instanceof Qw}}class BK extends Ls{constructor(e,n){super(e),this._a=n}_toFieldTransform(e){const n=nR(this,e,!0),r=this._a.map(s=>Bs(s,n)),i=new Ts(r);return new Iu(e.path,i)}isEqual(e){return this===e}}class VK extends Ls{constructor(e,n){super(e),this._a=n}_toFieldTransform(e){const n=nR(this,e,!0),r=this._a.map(s=>Bs(s,n)),i=new Ms(r);return new Iu(e.path,i)}isEqual(e){return this===e}}class jK extends Ls{constructor(e,n){super(e),this.wa=n}_toFieldTransform(e){const n=new ra(e.yt,qA(e.yt,this.wa));return new Iu(e.path,n)}isEqual(e){return this===e}}function Yw(t,e,n,r){const i=t.da(1,e,n);Xw("Data must be an object, but it was:",i,r);const s=[],o=It.empty();Ds(r,(c,u)=>{const l=Nf(e,c,n);u=De(u);const d=i.ca(l);if(u instanceof Gu)s.push(l);else{const h=Bs(u,d);null!=h&&(s.push(l),o.set(l,h))}});const a=new rn(s);return new eR(o,a,i.fieldTransforms)}function Zw(t,e,n,r,i,s){const o=t.da(1,e,n),a=[Jw(e,r,n)],c=[i];if(s.length%2!=0)throw new E(w.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(Jw(e,s[h])),c.push(s[h+1]);const u=[],l=It.empty();for(let h=a.length-1;h>=0;--h)if(!oR(u,a[h])){const f=a[h];let p=c[h];p=De(p);const g=o.ca(f);if(p instanceof Gu)u.push(f);else{const m=Bs(p,g);null!=m&&(u.push(f),l.set(f,m))}}const d=new rn(u);return new eR(l,d,o.fieldTransforms)}function rR(t,e,n,r=!1){return Bs(n,t.da(r?4:3,e))}function Bs(t,e){if(sR(t=De(t)))return Xw("Unsupported field value:",e,t),iR(t,e);if(t instanceof Ls)return function(n,r){if(!tR(r.sa))throw r.ha(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=Bs(o,r.aa(s));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if(null===(n=De(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return qA(r.yt,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const i=Ne.fromDate(n);return{timestampValue:oa(r.yt,i)}}if(n instanceof Ne){const i=new Ne(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:oa(r.yt,i)}}if(n instanceof Of)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof mr)return{bytesValue:dO(r.yt,n._byteString)};if(n instanceof Oe){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:hv(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.ha(`Unsupported field value: ${xf(n)}`)}(t,e)}function iR(t,e){const n={};return gA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ds(t,(r,i)=>{const s=Bs(i,e.ra(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function sR(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ne||t instanceof Of||t instanceof mr||t instanceof Oe||t instanceof Ls)}function Xw(t,e,n){if(!sR(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=xf(n);throw e.ha("an object"===r?t+" a custom object":t+" "+r)}var r}function Jw(t,e,n){if((e=De(e))instanceof Gr)return e._internalPath;if("string"==typeof e)return Nf(t,e);throw kf("Field path arguments must be of type string or ",t,!1,void 0,n)}const $K=new RegExp("[~\\*/\\[\\]]");function Nf(t,e,n){if(e.search($K)>=0)throw kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gr(...e.split("."))._internalPath}catch{throw kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new E(w.INVALID_ARGUMENT,a+t+c)}function oR(t,e){return t.some(n=>n.isEqual(e))}class Wu{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Oe(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new HK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ff("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class HK extends Wu{data(){return super.data()}}function Ff(t,e){return"string"==typeof e?Nf(t,e):e instanceof Gr?e._internalPath:e._delegate._internalPath}function aR(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new E(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class e0{}class Ku extends e0{}function Ai(t,e,...n){let r=[];e instanceof e0&&r.push(e),r=r.concat(n),function(i){const s=i.filter(a=>a instanceof ba).length,o=i.filter(a=>a instanceof Qu).length;if(s>1||s>0&&o>0)throw new E(w.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Qu extends Ku{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Qu(e,n,r)}_apply(e){const n=this._parse(e);return dR(e._query,n),new xt(e.firestore,e.converter,uv(e._query,n))}_parse(e){const n=Us(e.firestore);return function(i,s,o,a,c,u,l){let d;if(c.isKeyField()){if("array-contains"===u||"array-contains-any"===u)throw new E(w.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if("in"===u||"not-in"===u){lR(l,u);const h=[];for(const f of l)h.push(uR(a,i,f));d={arrayValue:{values:h}}}else d=uR(a,i,l)}else"in"!==u&&"not-in"!==u&&"array-contains-any"!==u||lR(l,u),d=rR(o,"where",l,"in"===u||"not-in"===u);return ue.create(c,u,d)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class ba extends e0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ba(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:be.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const a of o)dR(s,a),s=uv(s,a)}(e._query,n),new xt(e.firestore,e.converter,uv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class t0 extends Ku{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t0(e,n)}_apply(e){const n=function(r,i,s){if(null!==r.startAt)throw new E(w.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new E(w.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Jo(i,s);return function(a,c){if(null===av(a)){const u=ef(a);null!==u&&hR(0,u,c.field)}}(r,o),o}(e._query,this._field,this._direction);return new xt(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new $r(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}class Lf extends Ku{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Lf(e,n,r)}_apply(e){return new xt(e.firestore,e.converter,tf(e._query,this._limit,this._limitType))}}class Uf extends Ku{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Uf(e,n,r)}_apply(e){const n=cR(e,this.type,this._docOrFields,this._inclusive);return new xt(e.firestore,e.converter,(i=n,new $r((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class Bf extends Ku{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Bf(e,n,r)}_apply(e){const n=cR(e,this.type,this._docOrFields,this._inclusive);return new xt(e.firestore,e.converter,(i=n,new $r((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function cR(t,e,n,r){if(n[0]=De(n[0]),n[0]instanceof Wu)return function(i,s,o,a,c){if(!a)throw new E(w.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const l of Ss(i))if(l.field.isKeyField())u.push(Is(s,a.key));else{const d=a.data.field(l.field);if(ev(d))throw new E(w.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+l.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===d){const h=l.field.canonicalString();throw new E(w.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${h}' (used as the orderBy) does not exist.`)}u.push(d)}return new Ci(u,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Us(t.firestore);return function(s,o,a,c,u,l){const d=s.explicitOrderBy;if(u.length>d.length)throw new E(w.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const h=[];for(let f=0;f<u.length;f++){const p=u[f];if(d[f].field.isKeyField()){if("string"!=typeof p)throw new E(w.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof p}`);if(!cv(s)&&-1!==p.indexOf("/"))throw new E(w.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${p}' contains a slash.`);const g=s.path.child(pe.fromString(p));if(!A.isDocumentKey(g))throw new E(w.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${g}' is not because it contains an odd number of segments.`);const m=new A(g);h.push(Is(o,m))}else{const g=rR(a,c,p);h.push(g)}}return new Ci(h,l)}(t._query,t.firestore._databaseId,i,e,n,r)}}function uR(t,e,n){if("string"==typeof(n=De(n))){if(""===n)throw new E(w.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cv(e)&&-1!==n.indexOf("/"))throw new E(w.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(pe.fromString(n));if(!A.isDocumentKey(r))throw new E(w.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Is(t,new A(r))}if(n instanceof Oe)return Is(t,n._key);throw new E(w.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xf(n)}.`)}function lR(t,e){if(!Array.isArray(t)||0===t.length)throw new E(w.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new E(w.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function dR(t,e){if(e.isInequality()){const r=ef(t),i=e.field;if(null!==r&&!r.isEqual(i))throw new E(w.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=av(t);null!==s&&hR(0,i,s)}const n=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new E(w.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function hR(t,e,n){if(!n.isEqual(e))throw new E(w.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class n0{convertValue(e,n="none"){switch(Es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw F()}}convertObject(e,n){const r={};return Ds(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Of(qe(e.latitude),qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=yA(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_u(e));default:return null}}convertTimestamp(e){const n=wi(e);return new Ne(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pe.fromString(e);U(bO(r));const i=new vi(r.get(1),r.get(3)),s=new A(r.popFirst(5));return i.isEqual(n)||Qe(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function Vf(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class XK extends n0{constructor(e){super(),this.firestore=e}convertBytes(e){return new mr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,n)}}class Vs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wr extends Wu{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ff("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Yu extends Wr{data(e={}){return super.data(e)}}class Oi{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Vs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yu(this._firestore,this._userDataWriter,r.key,r,new Vs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new E(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new Yu(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Vs(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const a=new Yu(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Vs(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return 0!==o.type&&(c=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),u=s.indexOf(o.doc.key)),{type:JK(o.type),doc:a,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function JK(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return F()}}function pR(t,e){return t instanceof Wr&&e instanceof Wr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Oi&&e instanceof Oi&&t._firestore===e._firestore&&Bw(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class Pi extends n0{constructor(e){super(),this.firestore=e}convertBytes(e){return new mr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,n)}}function gR(t,e,n){t=le(t,Oe);const r=le(t.firestore,Pe),i=Vf(t.converter,e,n);return Da(r,[Rf(Us(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,ke.none())])}function mR(t,e,n,...r){t=le(t,Oe);const i=le(t.firestore,Pe),s=Us(i);let o;return o="string"==typeof(e=De(e))||e instanceof Gr?Zw(s,"updateDoc",t._key,e,n,r):Yw(s,"updateDoc",t._key,e),Da(i,[o.toMutation(t._key,ke.exists(!0))])}function yR(t,...e){var n,r,i;t=De(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||Kw(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(Kw(e[o])){const d=e[o];e[o]=null===(n=d.next)||void 0===n?void 0:n.bind(d),e[o+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[o+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let c,u,l;if(t instanceof Oe)u=le(t.firestore,Pe),l=ta(t._key.path),c={next:d=>{e[o]&&e[o](r0(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=le(t,xt);u=le(d.firestore,Pe),l=d._query;const h=new Pi(u);c={next:f=>{e[o]&&e[o](new Oi(u,h,d,f))},error:e[o+1],complete:e[o+2]},aR(t._query)}return function(d,h,f,p){const g=new Tf(p),m=new dw(h,g,f);return d.asyncQueue.enqueueAndForget(v(function*(){return ow(yield wa(d),m)})),()=>{g.bc(),d.asyncQueue.enqueueAndForget(v(function*(){return cw(yield wa(d),m)}))}}(Ze(u),l,a,c)}function Da(t,e){return function(n,r){const i=new lt;return n.asyncQueue.enqueueAndForget(v(function*(){return function KW(t,e,n){return mw.apply(this,arguments)}(yield Gw(n),r,i)})),i.promise}(Ze(t),e)}function r0(t,e,n){const r=n.docs.get(e._key),i=new Pi(t);return new Wr(t,i,e._key,r,new Vs(n.hasPendingWrites,n.fromCache),e.converter)}const u9={maxAttempts:5};class _R{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Us(e)}set(e,n,r){this._verifyNotCommitted();const i=Ri(e,this._firestore),s=Vf(i.converter,n,r),o=Rf(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,ke.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Ri(e,this._firestore);let o;return o="string"==typeof(n=De(n))||n instanceof Gr?Zw(this._dataReader,"WriteBatch.update",s._key,n,r,i):Yw(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,ke.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ri(e,this._firestore);return this._mutations=this._mutations.concat(new sa(n._key,ke.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new E(w.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ri(t,e){if((t=De(t)).firestore!==e)throw new E(w.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class l9 extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Us(e)}get(e){const n=Ri(e,this._firestore),r=new XK(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||1!==i.length)return F();const s=i[0];if(s.isFoundDocument())return new Wu(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new Wu(this._firestore,r,n._key,null,n.converter);throw F()})}set(e,n,r){const i=Ri(e,this._firestore),s=Vf(i.converter,n,r),o=Rf(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=Ri(e,this._firestore);let o;return o="string"==typeof(n=De(n))||n instanceof Gr?Zw(this._dataReader,"Transaction.update",s._key,n,r,i):Yw(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=Ri(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ri(e,this._firestore),r=new Pi(this._firestore);return super.get(e).then(i=>new Wr(this._firestore,r,n._key,i._document,new Vs(!1,!1),n.converter))}}function s0(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new E("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function wR(){if(typeof Uint8Array>"u")throw new E("unimplemented","Uint8Arrays are not available in this environment.")}function bR(){if(!function U6(){return typeof atob<"u"}())throw new E("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(t,e=!0){Qo=dh,fs(new kr("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new Pe(new I6(n.getProvider("auth-internal")),new T6(n.getProvider("app-check-internal")),function(a,c){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new E(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vi(a.options.projectId,c)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),or(iA,"3.8.3",t),or(iA,"3.8.3","esm2017")}();class Zu{constructor(e){this._delegate=e}static fromBase64String(e){return bR(),new Zu(mr.fromBase64String(e))}static fromUint8Array(e){return wR(),new Zu(mr.fromUint8Array(e))}toBase64(){return bR(),this._delegate.toBase64()}toUint8Array(){return wR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function o0(t){return function v9(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class w9{enableIndexedDbPersistence(e,n){return function TK(t,e){JP(t=le(t,Pe));const n=Ze(t),r=t._freezeSettings(),i=new Lw;return XP(n,i,new NP(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function MK(t){JP(t=le(t,Pe));const e=Ze(t),n=t._freezeSettings(),r=new Lw;return XP(e,r,new lK(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function AK(t){if(t._initialized&&!t._terminated)throw new E(w.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new lt;return t._queue.enqueueAndForgetEvenWhileRestricted(v(function*(){try{yield(n=v(function*(r){if(!qn.C())return Promise.resolve();const i=r+"main";yield qn.delete(i)}),function(r){return n.apply(this,arguments)})(Av(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class DR{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof vi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&vs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){!function jP(t,e,n,r={}){var i;const s=(t=le(t,zu))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&vs("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if("string"==typeof r.mockUserToken)o=r.mockUserToken,a=gt.MOCK_USER;else{o=PT(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new E(w.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new gt(c)}t._authCredentials=new E6(new sA(o,a))}}(this._delegate,e,n,r)}enableNetwork(){return function PK(t){return function _K(t){return t.asyncQueue.enqueue(v(function*(){const e=yield WP(t),n=yield zw(t);return e.setNetworkEnabled(!0),function(r){const i=O(r);return i._u.delete(0),Hu(i)}(n)}))}(Ze(t=le(t,Pe)))}(this._delegate)}disableNetwork(){return function RK(t){return function vK(t){return t.asyncQueue.enqueue(v(function*(){const e=yield WP(t),n=yield zw(t);return e.setNetworkEnabled(!1),(r=v(function*(i){const s=O(i);s._u.add(0),yield fa(s),s.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(n);var r}))}(Ze(t=le(t,Pe)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,kP("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function OK(t){return function(e){const n=new lt;return e.asyncQueue.enqueueAndForget(v(function*(){return function XW(t,e){return bw.apply(this,arguments)}(yield Gw(e),n)})),n.promise}(Ze(t=le(t,Pe)))}(this._delegate)}onSnapshotsInSync(e){return function c9(t,e){return function DK(t,e){const n=new Tf(e);return t.asyncQueue.enqueueAndForget(v(function*(){return r=yield wa(t),i=n,O(r).Ru.add(i),void i.next();var r,i})),()=>{n.bc(),t.asyncQueue.enqueueAndForget(v(function*(){return r=yield wa(t),i=n,void O(r).Ru.delete(i);var r,i}))}}(Ze(t=le(t,Pe)),Kw(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new E("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ca(this,$P(this._delegate,e))}catch(n){throw Yt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Mn(this,Sf(this._delegate,e))}catch(n){throw Yt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Zt(this,function dK(t,e){if(t=le(t,zu),Uw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new E(w.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xt(t,null,(n=e,new $r(pe.emptyPath(),n)));var n}(this._delegate,e))}catch(n){throw Yt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function d9(t,e,n){t=le(t,Pe);const r=Object.assign(Object.assign({},u9),n);return function(i){if(i.maxAttempts<1)throw new E(w.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,o){const a=new lt;return i.asyncQueue.enqueueAndForget(v(function*(){const c=yield function KP(t){return Mf(t).then(e=>e.datastore)}(i);new mK(i.asyncQueue,c,o,s,a).run()})),a.promise}(Ze(t),i=>e(new l9(t,i)),r)}(this._delegate,n=>e(new CR(this,n)))}batch(){return Ze(this._delegate),new ER(new _R(this._delegate,e=>Da(this._delegate,e)))}loadBundle(e){return function NK(t,e){const n=Ze(t=le(t,Pe)),r=new xK;return function CK(t,e,n,r){const i=function(s,o){let a;return a="string"==typeof s?(new TextEncoder).encode(s):s,c=function(c,u){if(c instanceof Uint8Array)return qP(c,u);if(c instanceof ArrayBuffer)return qP(new Uint8Array(c),u);if(c instanceof ReadableStream)return c.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),new hK(c,o);var c}(n,$u(e));t.asyncQueue.enqueueAndForget(v(function*(){!function uK(t,e,n){const r=O(t);var i;(i=v(function*(s,o,a){try{const c=yield o.getMetadata();if(yield function(h,f){const p=O(h),g=Ye(f.createTime);return p.persistence.runTransaction("hasNewerBundle","readonly",m=>p.Ns.getBundleMetadata(m,f.id)).then(m=>!!m&&m.createTime.compareTo(g)>=0)}(s.localStore,c))return yield o.close(),a._completeWith({taskState:"Success",documentsLoaded:(h=c).totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}),Promise.resolve(new Set);a._updateProgress(EP(c));const u=new $W(c,s.localStore,o.yt);let l=yield o.mc();for(;l;){const h=yield u.Fu(l);h&&a._updateProgress(h),l=yield o.mc()}const d=yield u.complete();return yield zr(s,d.Lu,void 0),yield function(h,f){const p=O(h);return p.persistence.runTransaction("Save bundle","readwrite",g=>p.Ns.saveBundleMetadata(g,f))}(s.localStore,c),a._completeWith(d.progress),Promise.resolve(d.Bu)}catch(c){return vs("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}var h}),function(s,o,a){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Gw(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function kK(t,e){return function EK(t,e){return t.asyncQueue.enqueue(v(function*(){return function(n,r){const i=O(n);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ns.getNamedQuery(s,r))}(yield Af(t),e)}))}(Ze(t=le(t,Pe)),e).then(n=>n?new xt(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Zt(this,n):null)}}class jf extends n0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zu(new mr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Mn.forKey(n,this.firestore,null)}}class CR{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new jf(e)}get(e){const n=$s(e);return this._delegate.get(n).then(r=>new Xu(this._firestore,new Wr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=$s(e);return r?(s0("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=$s(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=$s(e);return this._delegate.delete(n),this}}class ER{constructor(e){this._delegate=e}set(e,n,r){const i=$s(e);return r?(s0("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=$s(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=$s(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class js{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Yu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ju(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=js.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new js(e,new jf(e),n),i.set(n,s)),s}}js.INSTANCES=new WeakMap;class Mn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new jf(e)}static forPath(e,n,r){if(e.length%2!=0)throw new E("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Mn(n,new Oe(n._delegate,r,new A(e)))}static forKey(e,n,r){return new Mn(n,new Oe(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ca(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ca(this.firestore,$P(this._delegate,e))}catch(n){throw Yt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=De(e))instanceof Oe&&HP(this._delegate,e)}set(e,n){n=s0("DocumentReference.set",n);try{return n?gR(this._delegate,e,n):gR(this._delegate,e)}catch(r){throw Yt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?mR(this._delegate,e):mR(this._delegate,e,n,...r)}catch(i){throw Yt(i,"updateDoc()","DocumentReference.update()")}}delete(){return function o9(t){return Da(le(t.firestore,Pe),[new sa(t._key,ke.none())])}(this._delegate)}onSnapshot(...e){const n=IR(e),r=xR(e,i=>new Xu(this.firestore,new Wr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return yR(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function t9(t){t=le(t,Oe);const e=le(t.firestore,Pe),n=Ze(e),r=new Pi(e);return function wK(t,e){const n=new lt;return t.asyncQueue.enqueueAndForget(v(function*(){return(r=v(function*(i,s,o){try{const a=yield function(c,u){const l=O(c);return l.persistence.runTransaction("read document","readonly",d=>l.localDocuments.getDocument(d,u))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new E(w.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const c=ma(a,`Failed to get document '${s} from cache`);o.reject(c)}}),function(i,s,o){return r.apply(this,arguments)})(yield Af(t),e,n);var r})),n.promise}(n,t._key).then(i=>new Wr(e,r,t._key,i,new Vs(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function n9(t){t=le(t,Oe);const e=le(t.firestore,Pe);return QP(Ze(e),t._key,{source:"server"}).then(n=>r0(e,t,n))}(this._delegate):function e9(t){t=le(t,Oe);const e=le(t.firestore,Pe);return QP(Ze(e),t._key).then(n=>r0(e,t,n))}(this._delegate),n.then(r=>new Xu(this.firestore,new Wr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Mn(this.firestore,this._delegate.withConverter(e?js.getInstance(this.firestore,e):null))}}function Yt(t,e,n){return t.message=t.message.replace(e,n),t}function IR(t){for(const e of t)if("object"==typeof e&&!o0(e))return e;return{}}function xR(t,e){var n,r;let i;return i=o0(t[0])?t[0]:o0(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Xu{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Mn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return pR(this._delegate,e._delegate)}}class Ju extends Xu{data(e){const n=this._delegate.data(e);return function D6(t,e){t||F()}(void 0!==n),n}}class Zt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new jf(e)}where(e,n,r){try{return new Zt(this.firestore,Ai(this._delegate,function qK(t,e,n){const r=e,i=Ff("where",t);return Qu._create(i,r,n)}(e,n,r)))}catch(i){throw Yt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Zt(this.firestore,Ai(this._delegate,function zK(t,e="asc"){const n=e,r=Ff("orderBy",t);return t0._create(r,n)}(e,n)))}catch(r){throw Yt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Zt(this.firestore,Ai(this._delegate,function GK(t){return UP("limit",t),Lf._create("limit",t,"F")}(e)))}catch(n){throw Yt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Zt(this.firestore,Ai(this._delegate,function WK(t){return UP("limitToLast",t),Lf._create("limitToLast",t,"L")}(e)))}catch(n){throw Yt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Zt(this.firestore,Ai(this._delegate,function KK(...t){return Uf._create("startAt",t,!0)}(...e)))}catch(n){throw Yt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Zt(this.firestore,Ai(this._delegate,function QK(...t){return Uf._create("startAfter",t,!1)}(...e)))}catch(n){throw Yt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Zt(this.firestore,Ai(this._delegate,function YK(...t){return Bf._create("endBefore",t,!1)}(...e)))}catch(n){throw Yt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Zt(this.firestore,Ai(this._delegate,function ZK(...t){return Bf._create("endAt",t,!0)}(...e)))}catch(n){throw Yt(n,"endAt()","Query.endAt()")}}isEqual(e){return Bw(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function i9(t){t=le(t,xt);const e=le(t.firestore,Pe),n=Ze(e),r=new Pi(e);return function bK(t,e){const n=new lt;return t.asyncQueue.enqueueAndForget(v(function*(){return(r=v(function*(i,s,o){try{const a=yield wf(i,s,!0),c=new SP(s,a.Hi),u=c.Wu(a.documents),l=c.applyChanges(u,!1);o.resolve(l.snapshot)}catch(a){const c=ma(a,`Failed to execute query '${s} against cache`);o.reject(c)}}),function(i,s,o){return r.apply(this,arguments)})(yield Af(t),e,n);var r})),n.promise}(n,t._query).then(i=>new Oi(e,r,t,i))}(this._delegate):"server"===e?.source?function s9(t){t=le(t,xt);const e=le(t.firestore,Pe),n=Ze(e),r=new Pi(e);return YP(n,t._query,{source:"server"}).then(i=>new Oi(e,r,t,i))}(this._delegate):function r9(t){t=le(t,xt);const e=le(t.firestore,Pe),n=Ze(e),r=new Pi(e);return aR(t._query),YP(n,t._query).then(i=>new Oi(e,r,t,i))}(this._delegate),n.then(r=>new a0(this.firestore,new Oi(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=IR(e),r=xR(e,i=>new a0(this.firestore,new Oi(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return yR(this._delegate,n,r)}withConverter(e){return new Zt(this.firestore,this._delegate.withConverter(e?js.getInstance(this.firestore,e):null))}}class D9{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Ju(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class a0{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Zt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ju(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new D9(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Ju(this._firestore,r))})}isEqual(e){return pR(this._delegate,e._delegate)}}class Ca extends Zt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Mn(this.firestore,e):null}doc(e){try{return new Mn(this.firestore,void 0===e?Sf(this._delegate):Sf(this._delegate,e))}catch(n){throw Yt(n,"doc()","CollectionReference.doc()")}}add(e){return function a9(t,e){const n=le(t.firestore,Pe),r=Sf(t),i=Vf(t.converter,e);return Da(n,[Rf(Us(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,ke.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new Mn(this.firestore,n))}isEqual(e){return HP(this._delegate,e._delegate)}withConverter(e){return new Ca(this.firestore,this._delegate.withConverter(e?js.getInstance(this.firestore,e):null))}}function $s(t){return le(t,Oe)}class c0{constructor(...e){this._delegate=new Gr(...e)}static documentId(){return new c0(He.keyField().canonicalString())}isEqual(e){return(e=De(e))instanceof Gr&&this._delegate._internalPath.isEqual(e._internalPath)}}class Hs{constructor(e){this._delegate=e}static serverTimestamp(){const e=function f9(){return new Qw("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Hs(e)}static delete(){const e=function h9(){return new Gu("deleteField")}();return e._methodName="FieldValue.delete",new Hs(e)}static arrayUnion(...e){const n=function p9(...t){return new BK("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new Hs(n)}static arrayRemove(...e){const n=function g9(...t){return new VK("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new Hs(n)}static increment(e){const n=function m9(t){return new jK("increment",t)}(e);return n._methodName="FieldValue.increment",new Hs(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const C9={Firestore:DR,GeoPoint:Of,Timestamp:Ne,Blob:Zu,Transaction:CR,WriteBatch:ER,DocumentReference:Mn,DocumentSnapshot:Xu,Query:Zt,QueryDocumentSnapshot:Ju,QuerySnapshot:a0,CollectionReference:Ca,FieldPath:c0,FieldValue:Hs,setLogLevel:function b9(t){!function b6(t){mi.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};!function I9(t){(function E9(t,e){t.INTERNAL.registerComponent(new kr("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},C9)))})(t,(e,n)=>new DR(e,n,new w9)),t.registerVersion("@firebase/firestore-compat","0.3.3")}(hh);const yr=hh.initializeApp({apiKey:"AIzaSyCO4kgHvOKJRVl4gd7AZqFV2Sj3lwCx9dI",authDomain:"psicologiaconleila.firebaseapp.com",databaseURL:"https://psicologiaconleila-default-rtdb.firebaseio.com",projectId:"psicologiaconleila",storageBucket:"psicologiaconleila.appspot.com",messagingSenderId:"1058368529721",appId:"1:1058368529721:web:0be66ad3bf55bf764574e8",measurementId:"G-DY22SNP6EB"});class qs{obtenerDocs(e){return v(function*(){let n=[];return(yield yr.firestore().collection(e).get()).docs.map(i=>{n.push(i.data())}),n[n.length-1].url})()}obtenerDocsImgsGalery(e){return v(function*(){let n=[];return(yield yr.firestore().collection(e).get()).docs.map(i=>{n.push(i.data())}),console.log(n),n})()}constructor(){}}function x9(t,e){1&t&&N(0,"img",3),2&t&&Xi("src",e.$implicit.url,Jr)}qs.\u0275fac=function(e){return new(e||qs)},qs.\u0275prov=K({token:qs,factory:qs.\u0275fac,providedIn:"root"});class el{constructor(e){this.inicioCS=e,this.enlaceGlobal="",this.fecha=new Date,this.nombreArchivoDate=String(this.fecha.getTime()),this.fechaHoy=this.fecha.toLocaleDateString("en-US"),this.ListaImgsBanner=[],this.listaGaleriaImgs=[]}obtenerDocsImgBanner(e){var n=this;return v(function*(){const r=yield yr.firestore().collection(e).get();n.documentosGlobal=r.docs.map(i=>{n.ListaImgsBanner.push(i.data())}),n.urlImgBanner=n.ListaImgsBanner[n.ListaImgsBanner.length-1].url})()}obtenerDocsImgsGalery(e){var n=this;return v(function*(){let r=[];const i=yield yr.firestore().collection(e).get();n.documentosGlobal=i.docs.map(s=>{r.push(s.data())}),n.listaGaleriaImgs=r})()}enviarForm(e,n){var r=this;return v(function*(){e.preventDefault();const i=r.nombreArchivoDate;if(!i)return;let s={nombre:i,fecha:r.fechaHoy,url:r.enlaceGlobal};const o=yr.firestore().collection(n);""!=r.enlaceGlobal?yield o.doc(i).set(s):alert("espera un poco mas por favor, luego vuelve a enviar la foto"),console.log(i+" | "+r.enlaceGlobal)})()}seleccionarArchivo(e){var n=this;return v(function*(){const r=e.target.files[0],s=yr.storage().ref().child(r.name);yield s.put(r);let o=yield s.getDownloadURL();n.enlaceGlobal=o})()}ngOnInit(){this.obtenerDocsImgBanner("imgBanner"),this.obtenerDocsImgsGalery("imgsGalery")}}function S9(t,e){if(1&t&&(b(0,"div",10)(1,"div",11),N(2,"img",12),D(),b(3,"div",13)(4,"div"),M(5),D(),b(6,"div"),N(7,"input",14),b(8,"a",15),N(9,"input",16),D()()()()),2&t){const n=e.$implicit;Je(5),xo(n.fecha),Je(3),Xi("href",n.url,Jr)}}el.\u0275fac=function(e){return new(e||el)($(qs))},el.\u0275cmp=Ft({type:el,selectors:[["app-inicio-modifiy"]],decls:22,vars:4,consts:[[1,"div__modify"],[1,"content__title"],[1,"content__img"],["alt","",3,"src"],[1,"content__actions"],["action","",3,"submit"],["type","file","value","Modificar",1,"btnBlue","bg-blue",3,"change"],["type","submit","value","Enviar",1,"btnBlue"],[1,"galery__content"],[1,"galery__container--imgs"],["alt","",3,"src",4,"ngFor","ngForOf"],["type","text",3,"value","disabled"],["type","file","value","Agregar",1,"btnBlue","bg-blue",3,"change"]],template:function(e,n){1&e&&(b(0,"div",0)(1,"div",1)(2,"h2"),M(3,"Banner"),D()(),b(4,"div",2),N(5,"img",3),D(),b(6,"div",4)(7,"form",5),In("submit",function(i){return n.enviarForm(i,"imgBanner")}),b(8,"input",6),In("change",function(i){return n.seleccionarArchivo(i)}),D(),N(9,"input",7),D()()(),b(10,"div",0)(11,"div",1)(12,"h2"),M(13,"Galeria"),D()(),b(14,"div",8)(15,"div",9),oc(16,x9,1,1,"img",10),D(),b(17,"div",4)(18,"form",5),In("submit",function(i){return n.enviarForm(i,"imgsGalery")}),N(19,"input",11),b(20,"input",12),In("change",function(i){return n.seleccionarArchivo(i)}),D(),N(21,"input",7),D()()()()),2&e&&(Je(5),Xi("src",n.urlImgBanner,Jr),Je(11),er("ngForOf",n.listaGaleriaImgs),Je(3),ad("value","Total:",n.listaGaleriaImgs.length,""),er("disabled",!0))},dependencies:[bc],styles:[".div__modify[_ngcontent-%COMP%]{background-color:#e3e3e3;border-radius:10px;padding:20px 40px;box-shadow:0 0 10px #d6d6d6;margin:30px auto}.content__title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{border-bottom:3px solid gray;margin:10px 0;padding-bottom:5px;font-family:Montserrat,sans-serif}.content__img[_ngcontent-%COMP%]{margin:20px 0;padding-bottom:0;display:flex;justify-content:center}.content__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%;height:200px;object-fit:cover}.galery__content[_ngcontent-%COMP%]{width:100%;margin:auto}.galery__container--imgs[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:auto;flex-wrap:wrap}.galery__container--imgs[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;margin:5px}.galery__content[_ngcontent-%COMP%]   .content__actions[_ngcontent-%COMP%]{margin:10px 0}.galery__content[_ngcontent-%COMP%]   .content__actions[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{text-align:center;width:100px}.btnBlue[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:14px;padding:10px 17px;margin:5px;border-radius:5px;box-shadow:0 0 3px gray;border:2px solid white;background-color:#e7e7e7;cursor:pointer}.btnBlue[_ngcontent-%COMP%]:hover, .bg-blue[_ngcontent-%COMP%]{background-color:#00f;color:#fff}.bg-blue[_ngcontent-%COMP%]:hover{background-color:#00b}.content__actions[_ngcontent-%COMP%]{display:flex;justify-content:right;flex-wrap:wrap}"]});class tl{constructor(){this.fecha=new Date,this.nombreArchivoDate=this.fecha.getTime(),this.fechaHoy=this.fecha.toLocaleDateString("en-US"),this.listaPeriodicos=[]}obtenerDocsPeriodicos(e){var n=this;return v(function*(){let r=[];const i=yield yr.firestore().collection(e).get();n.documentosGlobal=i.docs.map(s=>{r.push(s.data())}),n.listaPeriodicos=r,console.log(n.listaPeriodicos)})()}enviarForm(e,n){var r=this;return v(function*(){e.preventDefault();const i=r.nombreArchivoDate;if(!i)return;let s={nombre:i,fecha:r.fechaHoy,url:r.enlaceGlobal};const o=yr.firestore().collection(n);""!=r.enlaceGlobal?yield o.doc(String(i)).set(s):alert("espera un poco mas por favor, luego vuelve a enviar la foto"),console.log(i+" | "+r.enlaceGlobal)})()}seleccionarArchivo(e){var n=this;return v(function*(){const r=e.target.files[0],s=yr.storage().ref().child(r.name);yield s.put(r);let o=yield s.getDownloadURL();n.enlaceGlobal=o})()}ngOnInit(){this.obtenerDocsPeriodicos("periodicosDocs")}}tl.\u0275fac=function(e){return new(e||tl)},tl.\u0275cmp=Ft({type:tl,selectors:[["app-periodico-modify"]],decls:13,vars:1,consts:[[1,"div__modify"],[1,"content__title"],[1,"periodico__section"],[1,"container__periodico--new"],["action","",3,"submit"],["id","src-file1",1,"file-select"],["type","file","name","nombrePeriodico","aria-label","Archivo",3,"change"],["type","submit","value","A\xf1adir ",1,"btnBlue"],[1,"periodico__container"],["class","periodico__card",4,"ngFor","ngForOf"],[1,"periodico__card"],[1,"periodico__card--img"],["src","../../../assets/imgs/WhatsApp Image 2023-02-16 at 10.52.35 PM.jpeg","alt",""],[1,"card__dates"],["type","button","value","Eliminar",1,"btnBlue"],["target","_blank",3,"href"],["type","button","value","Ver",1,"btnBlue","bg-blue"]],template:function(e,n){1&e&&(b(0,"div",0)(1,"div",1)(2,"h2"),M(3,"Periodico"),D()(),b(4,"div",2)(5,"section",3)(6,"form",4),In("submit",function(i){return n.enviarForm(i,"periodicosDocs")}),b(7,"div",5)(8,"input",6),In("change",function(i){return n.seleccionarArchivo(i)}),D()(),b(9,"div"),N(10,"input",7),D()()(),b(11,"section",8),oc(12,S9,10,2,"div",9),D()()()),2&e&&(Je(12),er("ngForOf",n.listaPeriodicos))},dependencies:[bc],styles:['.div__modify[_ngcontent-%COMP%]{background-color:#e3e3e3;border-radius:10px;padding:20px 40px;box-shadow:0 0 10px #d6d6d6;margin:30px auto}.content__title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{border-bottom:3px solid gray;margin:10px 0;padding-bottom:5px;font-family:Montserrat,sans-serif}.content__img[_ngcontent-%COMP%]{margin:20px 0;padding-bottom:0;display:flex;justify-content:center}.content__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%;height:200px;object-fit:cover}.periodico__container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;margin:auto}.periodico__card[_ngcontent-%COMP%]{width:300px;display:flex;justify-content:center;align-items:center;flex-direction:column;border-radius:10px;box-shadow:0 0 10px #a5a5a5;margin:20px 10px}.periodico__card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:280px;height:200px;object-fit:cover;object-position:top;border-radius:10px;margin:10px}.card__dates[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;width:100%;align-items:center;font-family:lato,sans-serif;font-size:13px;padding:5px 0 15px}.btnBlue[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:14px;padding:10px 17px;position:relative;bottom:0;margin:0 5px;border-radius:5px;border:none;box-shadow:0 0 3px gray;border:2px solid white;background-color:#e7e7e7;cursor:pointer}.btnBlue[_ngcontent-%COMP%]:hover, .bg-blue[_ngcontent-%COMP%]{background-color:#00f;color:#fff}.bg-blue[_ngcontent-%COMP%]:hover{background-color:#00b}.container__periodico--new[_ngcontent-%COMP%]{background-color:#00f;padding:10px 20px;border-radius:5px;display:flex;justify-content:space-between;align-items:center;font-family:"lato" sans-serif !;width:95%}.file-select[_ngcontent-%COMP%]{position:relative;display:inline-block}.file-select[_ngcontent-%COMP%]:before{background-color:#e7e7e7;border:2px solid white;padding:0 10px;color:#000;font-family:Montserrat,sans-serif;display:flex;justify-content:center;align-items:center;border-radius:3px;content:"Seleccionar";position:absolute;inset:0}.file-select[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{opacity:0;padding:10px 25px;width:200px;display:inline-block}#src-file1[_ngcontent-%COMP%]:before{content:"Seleccionar Periodico"}.periodico__section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}@media (max-width:770px){.container__periodico--new[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center;font-family:"lato" sans-serif !;width:80%}.container__periodico--new[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:10px}.file-select[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{padding:10px 0}.periodico__container[_ngcontent-%COMP%]{padding:0}.div__modify[_ngcontent-%COMP%]{padding:20px 0;width:100%}.periodico__card[_ngcontent-%COMP%]{width:250px;display:flex;justify-content:center;align-items:center;flex-direction:column;border-radius:10px;box-shadow:0 0 10px #cecece;margin:20px 10px}.periodico__card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:240px;height:200px;object-fit:cover;object-position:top;border-radius:10px;margin:10px}.btnBlue[_ngcontent-%COMP%]{padding:10px}}']});class nl{}nl.\u0275fac=function(e){return new(e||nl)},nl.\u0275cmp=Ft({type:nl,selectors:[["app-noticia-modify"]],decls:94,vars:0,consts:[[1,"div__modify"],[1,"content__title"],[1,"content__notice"],["name","","id",""],["type","file"],["type","text"],[1,"content__actions"],["type","button","value","Limpiar",1,"btnBlue"],["type","button","value","Visualizar",1,"btnBlue"],["type","button","value","Agregar",1,"btnBlue","bg-blue"],[1,"notice__container"],[1,"circle"],[1,"notice__title"],[1,"container__cards--notice"],[1,"card__notice"],[1,"card__notice--img"],["src","../../../assets/imgs/ayudaImgCard.jpg","alt",""],["src","../../../assets/imgs/fondoVoto.jpg","alt",""]],template:function(e,n){1&e&&(b(0,"div",0)(1,"div",1)(2,"h2"),M(3,"Noticia"),D()(),b(4,"div",2)(5,"table")(6,"tr")(7,"td")(8,"h3"),M(9,"Titulo*"),D()(),b(10,"td"),N(11,"textarea",3),D()(),b(12,"tr")(13,"td")(14,"h3"),M(15,"Introduccion*"),D()(),b(16,"td"),N(17,"textarea",3),D()(),b(18,"tr")(19,"td")(20,"h3"),M(21,"Cuerpo Noticia*"),D()(),b(22,"td"),N(23,"textarea",3),D()(),b(24,"tr")(25,"td")(26,"h3"),M(27,"Imagenes"),D()(),b(28,"td"),N(29,"input",4),D()(),b(30,"tr")(31,"td")(32,"h3"),M(33,"Video"),D()(),b(34,"td"),N(35,"input",5),D()()(),b(36,"div",6),N(37,"input",7)(38,"input",8)(39,"input",9),D()()(),b(40,"section",10),N(41,"div",11),b(42,"div",12)(43,"h2"),M(44,"Noticias"),D()(),b(45,"section",13)(46,"div",14)(47,"div",15),N(48,"img",16),D(),b(49,"div")(50,"h3"),M(51,"Docentes del Cauca montaron cambuches y se tomaron la entrada del Congreso: las im\xe1genes son ins\xf3litas "),D(),b(52,"p"),M(53,"20 septimbre 2023"),D()()(),b(54,"div",14)(55,"div",15),N(56,"img",17),D(),b(57,"div")(58,"h3"),M(59,"Docentes del Cauca montaron cambuches y se tomaron la entrada del Congreso: las im\xe1genes son ins\xf3litas "),D(),b(60,"p"),M(61,"20 septimbre 2023"),D()()(),b(62,"div",14)(63,"div",15),N(64,"img",16),D(),b(65,"div")(66,"h3"),M(67,"Docentes del Cauca montaron cambuches y se tomaron la entrada del Congreso: las im\xe1genes son ins\xf3litas "),D(),b(68,"p"),M(69,"20 septimbre 2023"),D()()(),b(70,"div",14)(71,"div",15),N(72,"img",16),D(),b(73,"div")(74,"h3"),M(75,"Docentes del Cauca montaron cambuches y se tomaron la entrada del Congreso: las im\xe1genes son ins\xf3litas "),D(),b(76,"p"),M(77,"20 septimbre 2023"),D()()(),b(78,"div",14)(79,"div",15),N(80,"img",16),D(),b(81,"div")(82,"h3"),M(83,"Docentes del Cauca montaron cambuches y se tomaron la entrada del Congreso: las im\xe1genes son ins\xf3litas "),D(),b(84,"p"),M(85,"20 septimbre 2023"),D()()(),b(86,"div",14)(87,"div",15),N(88,"img",16),D(),b(89,"div")(90,"h3"),M(91,"Docentes del Cauca montaron cambuches y se tomaron la entrada del Congreso: las im\xe1genes son ins\xf3litas "),D(),b(92,"p"),M(93,"20 septimbre 2023"),D()()()()())},styles:[".div__modify[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:20px 40px;box-shadow:0 0 10px #d6d6d6;margin:30px auto}.content__title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{border-bottom:3px solid gray;margin:10px 0;padding-bottom:5px;font-family:Montserrat,sans-serif}.content__notice[_ngcontent-%COMP%]{display:flex;flex-direction:column}.content__notice--section[_ngcontent-%COMP%]{display:flex;font-family:Lato,sans-serif}.content__notice[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 15px;border:2px solid gray;border-radius:5px;outline:none;min-width:50%;max-width:95%;font-family:Lato,sans-serif}.content__notice[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif}.content__notice[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:95%;outline:none;height:30px;padding:5px 15px;border:2px solid gray;margin:5px 0;border-radius:5px;font-family:Lato,sans-serif}.btnBlue[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:14px;padding:10px 17px;margin:5px;border-radius:5px;box-shadow:0 0 3px gray;border:2px solid white;background-color:#e7e7e7;cursor:pointer}.btnBlue[_ngcontent-%COMP%]:hover, .bg-blue[_ngcontent-%COMP%]{background-color:#00f;color:#fff}.bg-blue[_ngcontent-%COMP%]:hover{background-color:#00b}.content__actions[_ngcontent-%COMP%]{display:flex;justify-content:right;flex-wrap:wrap}.notice__container[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:20px;max-width:1400px;margin:auto}.notice__title[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:25px;padding:20px 0}.container__cards--notice[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.card__notice[_ngcontent-%COMP%]{background-color:#efefefab;display:flex;justify-content:center;align-items:center;flex-direction:column;padding:10px;width:25%;border-radius:10px;box-shadow:0 0 10px gray;border-bottom:20px solid #ffffff;cursor:pointer;margin:15px 10px;position:relative;z-index:10}.card__notice[_ngcontent-%COMP%]:hover{animation:_ngcontent-%COMP%_scales .1s;transform:scale(1.02);background-color:#fff}@keyframes _ngcontent-%COMP%_scales{0%{transform:scale(1)}to{transform:scale(1.02)}}.card__notice[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:5px;padding-bottom:10px}.card__notice[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding-top:10px;font-family:Lato,sans-serif;border-top:3px solid black}.card__notice[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Lato,sans-serif;font-size:12px;padding-top:10px}"]});class rl{constructor(){this.moduloDashboardMostrar="inicio",this.displayInicio="block",this.displayPeriodico="none",this.displayNoticia="none",this.modulo="inicio"}ngOnInit(){const e=document.getElementById("button-menu"),n=document.getElementById("nav");e.addEventListener("click",()=>{e.classList.toggle("close"),n.classList.toggle("show"),r.classList.toggle("displayNone")}),n.addEventListener("click",s=>{"nav"===s.target.id&&(n.classList.remove("show"),e.classList.remove("close"))});const r=document.getElementById("btn__create"),i=document.getElementById("div__create");r.addEventListener("click",()=>{r.classList.toggle("rotate"),r.classList.toggle("close"),i.classList.toggle("show")}),i.addEventListener("click",s=>{"div__create"===s.target.id&&(i.classList.remove("show"),r.classList.remove("close"))})}cambiarModuloDashboard(e){this.modulo=e,this.moduloDashboardMostrar=e,"inicio"==e?(this.displayInicio="block",this.displayPeriodico="none",this.displayNoticia="none"):"noticia"===e?(this.displayNoticia="block",this.displayInicio="none",this.displayPeriodico="none"):"periodico"===e&&(this.displayPeriodico="block",this.displayInicio="none",this.displayNoticia="none")}}rl.\u0275fac=function(e){return new(e||rl)},rl.\u0275cmp=Ft({type:rl,selectors:[["app-dashboard"]],decls:34,vars:7,consts:[[1,"dashboard"],["id","btn__create",1,"dashboard__create--btn"],["id","div__create",1,"create__slide"],[1,"create__slide--content"],[3,"click"],[1,"dashboard__header"],[1,"dashboard__header--maxmedia"],[1,"moduloContainer"],[1,"main-header"],["id","nav",1,"main-nav"],[1,"nav-links"],["routerLink",""],["id","button-menu",1,"button-menu"],[1,"dashboard__content"]],template:function(e,n){1&e&&(b(0,"section",0)(1,"button",1),M(2,"+"),D(),b(3,"div",2)(4,"div",3)(5,"ul")(6,"li",4),In("click",function(){return n.cambiarModuloDashboard("inicio")}),M(7,"Inicio"),D(),b(8,"li",4),In("click",function(){return n.cambiarModuloDashboard("noticia")}),M(9,"Noticias"),D(),b(10,"li",4),In("click",function(){return n.cambiarModuloDashboard("periodico")}),M(11,"Periodicos"),D()()()(),b(12,"section",5)(13,"div",6)(14,"div",7)(15,"h2"),M(16),D()(),b(17,"div")(18,"div",8)(19,"nav",9)(20,"div",10)(21,"ul")(22,"li"),M(23,"Configuracion"),D(),b(24,"li",11),M(25,"Cerrar Sesi\xf3n"),D()()()(),b(26,"button",12),N(27,"span")(28,"span")(29,"span"),D()()()()(),b(30,"section",13),N(31,"app-inicio-modifiy")(32,"app-noticia-modify")(33,"app-periodico-modify"),D()()),2&e&&(Je(16),xo(n.modulo),Je(15),ac("display",n.displayInicio),Je(1),ac("display",n.displayNoticia),Je(1),ac("display",n.displayPeriodico))},dependencies:[cs,el,tl,nl],styles:[".dashboard[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.dashboard__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px;background-color:#dedede;color:#000;position:fixed;top:0;width:100%;z-index:20;box-shadow:0 0 10px #454545;font-family:Lato,sans-serif;margin:0 auto}.dashboard__header--maxmedia[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;max-width:1400px;margin:auto;padding-left:25px}.moduloContainer[_ngcontent-%COMP%]{text-transform:capitalize}.header__menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.header__menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 7px;list-style:none;cursor:pointer}.header__menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(6){background-color:#454545;border-radius:20px;padding:5px 15px;color:#fff}.main-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.main-nav[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100vh;width:100%;margin-left:100%;transition:all .3s ease;background-color:#1d1d1de3;z-index:380}.displayNone[_ngcontent-%COMP%]{display:none!important}.main-nav.show[_ngcontent-%COMP%]{margin-left:0}.nav-links[_ngcontent-%COMP%]{background-color:#fafafa;display:flex;flex-direction:column;width:35%;height:100%;align-items:center;justify-content:flex-start;border-radius:0 25px 25px 0/0 200px 200px 0}.nav-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin-top:30px}.nav-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-align:center;cursor:pointer;margin:35px 7px;font-size:22px}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(6){background-color:#454545;border-radius:20px;padding:5px 15px!important;color:#fff}.button-menu[_ngcontent-%COMP%]{z-index:400;width:35px;height:35px;border:none;display:flex;background:none;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;padding-right:40px}.button-menu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:37px;height:4px;margin-bottom:5px;position:relative;background:#444444;border-radius:3px;transform-origin:5px 0px;transition:all .2s linear}.button-menu.close[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:1;transform:rotate(45deg) translate(0);background:#ffffff}.button-menu.close[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){transform:rotate(-45deg) translate(-8px,5px)}.button-menu.close[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){display:none}.dashboard__create--btn[_ngcontent-%COMP%]{z-index:300;border:none;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:#00f;font-size:50px;height:50px;width:50px;position:fixed;bottom:0;margin:25px;right:0;color:#fff;border:3px solid white;padding:20px;border-radius:100px;box-shadow:0 0 8px #0b23ab}.dashboard__create--btn[_ngcontent-%COMP%]:hover{background-color:#0000b9}.create__slide[_ngcontent-%COMP%]{font-family:lato,sans-serif;position:fixed;top:0;left:0;height:100vh;width:100%;margin-left:-120%;transition:all .3s ease;background-color:#1d1d1dd4;z-index:200}.create__slide.show[_ngcontent-%COMP%]{margin-left:0}.create__slide--content[_ngcontent-%COMP%]{background-color:#eee;display:flex;flex-direction:column;width:34%;height:100%;position:absolute;right:0;align-items:center;justify-content:flex-start;border-radius:20px 0 0 20px/150px 0 0 150px}.create__slide--content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin-top:30px}.create__slide--content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-align:center;cursor:pointer;margin:35px 7px;font-size:22px}.dashboard__content[_ngcontent-%COMP%]{margin-top:70px;padding:0 50px;width:80%}@media (max-width:700px){.create__slide--content[_ngcontent-%COMP%]{width:75%}.nav-links[_ngcontent-%COMP%]{width:80%}.dashboard__content[_ngcontent-%COMP%]{margin-top:70px;padding:0;width:97%}}.displayModified[_ngcontent-%COMP%]{display:none}"]});class Ni{}Ni.\u0275fac=function(e){return new(e||Ni)},Ni.\u0275cmp=Ft({type:Ni,selectors:[["app-footer"]],decls:10,vars:0,consts:[[1,"footer__container"],[1,"contacto"],["src","../../../../assets/imgs/redes/facebook.png","alt",""],["src","../../../../assets/imgs/redes/instagram.png","alt",""],["src","../../../../assets/imgs/redes/twitter.png","alt",""],[1,"politicas"]],template:function(e,n){1&e&&(b(0,"footer")(1,"section",0)(2,"div",1)(3,"div"),N(4,"img",2),D(),b(5,"div"),N(6,"img",3),D(),b(7,"div"),N(8,"img",4),D()(),N(9,"div",5),D()())},styles:[".footer__container[_ngcontent-%COMP%]{background-color:#2f2f2f;height:250px;margin-top:40px;display:flex;justify-content:center}.contacto[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.contacto[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px}"]});class ki{constructor(){}ngOnInit(){const e=document.getElementById("button-menu"),n=document.getElementById("nav");e.addEventListener("click",()=>{e.classList.toggle("close"),n.classList.toggle("show")}),n.addEventListener("click",r=>{"nav"===r.target.id&&(n.classList.remove("show"),e.classList.remove("close"))})}}function T9(t,e){if(1&t&&(b(0,"div"),N(1,"img",33),D()),2&t){const n=e.$implicit;Je(1),Xi("src",n.url,Jr)}}ki.\u0275fac=function(e){return new(e||ki)},ki.\u0275cmp=Ft({type:ki,selectors:[["app-header"]],decls:26,vars:0,consts:[[1,"header__container"],[1,"header__maxmedia"],[1,"header__title"],[1,"main-header"],["id","nav",1,"main-nav"],[1,"nav-links"],["routerLink",""],["routerLink","/noticia"],["routerLink","/periodico"],["id","button-menu",1,"button-menu"]],template:function(e,n){1&e&&(b(0,"header")(1,"section",0)(2,"div",1)(3,"div",2)(4,"h1"),M(5,"Horacio Edil"),D()(),b(6,"div",3)(7,"nav",4)(8,"div",5)(9,"ul")(10,"li",6),M(11,"Fundaci\xf3n"),D(),b(12,"li",6),M(13,"Agenda "),D(),b(14,"li",6),M(15,"Historia"),D(),b(16,"li",7),M(17,"Noticias"),D(),b(18,"li",8),M(19,"Periodico"),D(),b(20,"li",6),M(21,"Inicio"),D()()()(),b(22,"button",9),N(23,"span")(24,"span")(25,"span"),D()()()()())},dependencies:[cs],styles:[".header__container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px;background-color:#dedede;color:#000;position:fixed;width:100%;z-index:20;box-shadow:0 0 10px #454545;font-family:Lato,sans-serif;margin:0 auto}.header__maxmedia[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;max-width:1400px;margin:auto}.header__menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.header__menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 7px;list-style:none;cursor:pointer}.header__menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(6){background-color:#454545;border-radius:20px;padding:5px 15px;color:#fff}.main-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.main-nav[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100vh;width:100%;margin-left:100%;transition:all .3s ease;background-color:#1d1d1de3;z-index:200}.main-nav.show[_ngcontent-%COMP%]{margin-left:0}.nav-links[_ngcontent-%COMP%]{background-color:#fafafa;display:flex;flex-direction:column;width:70%;height:100%;align-items:center;justify-content:flex-start;border-radius:0 25px 25px 0/0 200px 200px 0}.nav-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin-top:30px}.nav-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-align:center;cursor:pointer;margin:35px 7px;font-size:22px}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(6){background-color:#454545;border-radius:20px;padding:5px 15px!important;color:#fff}.button-menu[_ngcontent-%COMP%]{z-index:300;width:35px;height:35px;border:none;display:flex;background:none;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;padding-right:40px}.button-menu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:37px;height:4px;margin-bottom:5px;position:relative;background:#444444;border-radius:3px;transform-origin:5px 0px;transition:all .2s linear}.button-menu.close[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:1;transform:rotate(45deg) translate(0);background:#ffffff}.button-menu.close[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){transform:rotate(-45deg) translate(-8px,5px)}.button-menu.close[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){display:none}@media screen and (min-width:768px){.button-menu[_ngcontent-%COMP%]{display:none}.main-nav[_ngcontent-%COMP%]{position:static;margin-left:0;flex-basis:70%;height:100%;background-color:transparent}.nav-links[_ngcontent-%COMP%]{width:100%;display:flex;background-color:transparent}.nav-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:0;padding-right:10px}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 0!important;margin:0 7px!important;list-style:none;cursor:pointer;font-size:18px!important}}"]});class il{constructor(e){this.inicioCS=e,this.listaImgsGalery=[],this.loader=!1}getBanner(){var e=this;return v(function*(){e.inicioCS.obtenerDocs("imgBanner").then(n=>{e.urlImgBanner=n})})()}getGalery(){var e=this;return v(function*(){e.inicioCS.obtenerDocsImgsGalery("imgsGalery").then(n=>{e.listaImgsGalery=n})})()}ngOnInit(){this.getBanner(),this.getGalery()}}il.\u0275fac=function(e){return new(e||il)($(qs))},il.\u0275cmp=Ft({type:il,selectors:[["app-inicio"]],decls:84,vars:2,consts:[[1,"banner"],[1,"banner__maxmedia"],[1,"banner__img"],["alt","","id","imgBannerId",3,"src"],[1,"banner__text"],[1,"maquina-escribir"],[1,"container__numerales"],[1,"numeral__1"],[1,"numeral__2"],[1,"promo-periodico"],[1,"centrado"],[1,"btnDescargaPeriodicoActual"],["src","../../../assets/imgs/periodico.png","alt",""],[1,"mini__biografia"],[1,"circle"],[1,"quien-soy"],["type","button","value","Leer m\xe1s",1,"btnBlue"],[1,"me-dedico"],[1,"carrousel__container"],[1,"carrousel"],["type","button","value","<"],[4,"ngFor","ngForOf"],["type","button","value",">"],[1,"notice__container"],[1,"notice__title"],[1,"container__cards--notice"],[1,"card__notice"],[1,"card__notice--img"],["src","../../../assets/imgs/ayudaImgCard.jpg","alt",""],["src","../../../assets/imgs/fondoVoto.jpg","alt",""],[1,"container__notice--btn"],["type","button","value","Ver M\xe1s",1,"btnBlue"],[1,"banner__footer"],["alt","",3,"src"]],template:function(e,n){1&e&&(N(0,"app-header"),b(1,"main")(2,"section",0)(3,"div",1)(4,"div",2),N(5,"img",3),D(),b(6,"div",4)(7,"div")(8,"h1",5),M(9,"HORACIO ESTRADA"),D(),b(10,"h2"),M(11,"Usaquen"),D(),b(12,"div",6)(13,"div",7)(14,"span"),M(15,"#Gestionconresultados"),D()(),b(16,"div",8)(17,"span"),M(18,"#Edilalbarrio"),D()()()()()()(),b(19,"div",9)(20,"div",10)(21,"button",11)(22,"div")(23,"h3"),M(24,"Descarga Periodico del mes"),D()(),b(25,"div"),N(26,"img",12),D()()()(),b(27,"section",13),N(28,"div",14)(29,"div",14)(30,"div",14),b(31,"div",15)(32,"h2"),M(33,"\xbfQuien soy?"),D(),b(34,"p"),M(35,"Es Periodista y actual Edil de Usaqu\xe9n. Su aspiraci\xf3n es dejar huella en la sociedad en la cual ha vivido 30 a\xf1os. Quiere dise\xf1ar una plataforma que vincule y defienda al denunciante, fomentar las escuelas de formaci\xf3n deportiva, la realizaci\xf3n de ferias de empleo y emprendimiento en Usaqu\xe9n."),D(),N(36,"input",16),D(),b(37,"div",17)(38,"div")(39,"div")(40,"h2"),M(41,"\xbfA que me dedico?"),D()(),b(42,"p"),M(43,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis placeat amet, totam, nisi non libero vitae consequuntur neque animi ducimus doloremque excepturi similique sed aliquam iusto minima delectus. Doloremque quae, possimus officiis quasi quis commodi. Quidem explicabo reprehenderit sint temporibus officia! Ab obcaecati deserunt totam animi unde ratione cumque necessitatibus!"),D(),N(44,"input",16),D()()(),b(45,"section",18)(46,"div",19),N(47,"input",20),oc(48,T9,2,1,"div",21),N(49,"input",22),D()(),b(50,"section",23),N(51,"div",14),b(52,"div",24)(53,"h2"),M(54,"Noticias"),D()(),b(55,"section",25)(56,"div",26)(57,"div",27),N(58,"img",28),D(),b(59,"div")(60,"h3"),M(61,"Docentes del Cauca montaron cambuches y se tomaron la entrada del Congreso: las im\xe1genes son ins\xf3litas "),D(),b(62,"p"),M(63,"20 septimbre 2023"),D()()(),b(64,"div",26)(65,"div",27),N(66,"img",29),D(),b(67,"div")(68,"h3"),M(69,"Docentes del Cauca montaron cambuches y se tomaron la entrada del Congreso: las im\xe1genes son ins\xf3litas "),D(),b(70,"p"),M(71,"20 septimbre 2023"),D()()(),b(72,"div",26)(73,"div",27),N(74,"img",28),D(),b(75,"div")(76,"h3"),M(77,"Docentes del Cauca montaron cambuches y se tomaron la entrada del Congreso: las im\xe1genes son ins\xf3litas "),D(),b(78,"p"),M(79,"20 septimbre 2023"),D()()()(),b(80,"div",30),N(81,"input",31),D()(),N(82,"section",32),D(),N(83,"app-footer")),2&e&&(Je(5),er("src",n.urlImgBanner,Jr),Je(43),er("ngForOf",n.listaImgsGalery))},dependencies:[bc,Ni,ki],styles:['.container__whatsapp[_ngcontent-%COMP%]{position:fixed;z-index:50;bottom:0;right:0;padding:30px}.container__whatsapp[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;box-shadow:0 0 10px gray;border-radius:100%;border:2px solid transparent;padding:5px;cursor:pointer}.banner[_ngcontent-%COMP%]{height:100vh;width:100%;display:flex;align-items:center;justify-content:space-between;background-color:#2f2f2f;max-height:700px;margin:auto}.banner__maxmedia[_ngcontent-%COMP%]{height:100vh;width:100%;display:flex;align-items:center;justify-content:space-between;max-width:1400px;margin:auto;max-height:700px}.banner__img[_ngcontent-%COMP%]{width:52%;height:100%}.banner__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;filter:brightness(.9)}.banner__text[_ngcontent-%COMP%]{color:#fff;display:flex;justify-content:center;align-items:center;flex-direction:column;width:45%;height:100%;padding:10px;margin:auto}.banner__text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:35px;background-color:#fff;padding:0 10px;color:#000;border-radius:5px;box-shadow:0 0 10px #0a0a0a;font-family:Montserrat,sans-serif}.maquina-escribir[_ngcontent-%COMP%]{background-color:transparent;position:relative;display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.maquina-escribir[_ngcontent-%COMP%]:after{content:"";background-color:#fff;right:0;height:80%;position:absolute;animation:_ngcontent-%COMP%_maquinaescribir 3s 1 steps(14);animation-delay:1s}@keyframes _ngcontent-%COMP%_maquinaescribir{0%{border-left:4px solid #000000;width:100%}30%{border-left:4px solid #000000;width:80%}50%{border-left:4px solid #000000;width:75%}70%{border-left:4px solid #000000;width:30%}to{width:0%;border-left:3px solid transparent}}.banner__text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:27px;font-weight:100;font-family:Montserrat,sans-serif}.container__numerales[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:7px 10px;color:#fff}.container__numerales[_ngcontent-%COMP%]{display:flex;margin-top:30px;justify-content:center;font-family:Lato,sans-serif}.numeral__1[_ngcontent-%COMP%]{cursor:pointer}.numeral__2[_ngcontent-%COMP%]{margin-top:27px;cursor:pointer}.numeral__1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#00f;border-right:3px solid white}.numeral__2[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:red;border-left:3px solid white;margin-left:-3px}.promo-periodico[_ngcontent-%COMP%]   .btnDescargaPeriodicoActual[_ngcontent-%COMP%]{padding:30px 40px;border-radius:10px;border:white;background:blue;color:#fff;font-weight:700;font-size:25px;font-family:Montserrat,sans-serif}.promo-periodico[_ngcontent-%COMP%]   .btnDescargaPeriodicoActual[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{max-width:300px}.promo-periodico[_ngcontent-%COMP%]{padding:150px 0;position:relative;display:flex;text-align:center;width:100%;background:linear-gradient(#ecebff,white)}.centrado[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.centrado[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:2px solid white;width:30px;padding:5px;border-radius:10px;margin-left:10px}.promo-periodico[_ngcontent-%COMP%]   .centrado[_ngcontent-%COMP%]   .btnDescargaPeriodicoActual[_ngcontent-%COMP%]{box-shadow:0 0 10px #646464;cursor:pointer;border:3px solid white;display:flex;justify-content:center;align-items:center}.promo-periodico[_ngcontent-%COMP%]   .centrado[_ngcontent-%COMP%]   .btnDescargaPeriodicoActual[_ngcontent-%COMP%]:hover{background-color:#1818b8;color:#fff}.quien-soy[_ngcontent-%COMP%], .me-dedico[_ngcontent-%COMP%]{font-family:Lato,sans-serif;padding:30px 25px;margin:20px;border-radius:10px;box-shadow:0 0 10px gray;width:45%;position:relative;z-index:10;text-align:center}.quien-soy[_ngcontent-%COMP%]{background-color:#eaeaea92;color:#000}.me-dedico[_ngcontent-%COMP%]{background-color:#2f2f2fec;color:#fff}.quien-soy[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .me-dedico[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;text-align:center;margin-bottom:10px}.mini__biografia[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:20px;position:relative;max-width:1400px;margin:auto}.mini__biografia[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%], .notice__container[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:100px;filter:blur(90px);position:absolute}.mini__biografia[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(1), .notice__container[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(1){background-color:#0000ff81;top:80%;right:70%}.mini__biografia[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(2), .notice__container[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(2){background-color:red;top:20%;right:10%}.carrousel__container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;max-width:1400px;margin:auto}.carrousel__container[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{width:50px;border:none;box-shadow:0 0 5px gray;height:50px;border-radius:100px;cursor:pointer;font-size:25px;color:#fff;position:relative;z-index:10;border:3px solid white}.carrousel__container[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:hover{border:3px solid #e20000}.carrousel__container[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:nth-child(1){background-color:#2f2f2f}.carrousel__container[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:nth-child(5){background-color:#2f2f2f}.carrousel[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.carrousel[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-shadow:0 0 10px gray;border-radius:10px;margin:20px 10px;position:relative;z-index:10;width:220px;height:220px}.carrousel[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){width:20%;height:20%}.carrousel[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){width:200px;height:200px}.carrousel[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){width:20%;height:20%}.carrousel[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:10px}.notice__container[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:30px;max-width:1400px;margin:auto}.notice__title[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:25px;padding:20px 0}.container__cards--notice[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.card__notice[_ngcontent-%COMP%]{background-color:#efefefab;display:flex;justify-content:center;align-items:center;flex-direction:column;padding:10px;width:25%;border-radius:10px;box-shadow:0 0 10px gray;border-bottom:20px solid #ffffff;cursor:pointer;margin:20px;position:relative;z-index:10}.card__notice[_ngcontent-%COMP%]:hover{animation:_ngcontent-%COMP%_scales .1s;transform:scale(1.02);background-color:#fff}@keyframes _ngcontent-%COMP%_scales{0%{transform:scale(1)}to{transform:scale(1.02)}}.card__notice[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:5px;padding-bottom:10px}.card__notice[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding-top:10px;font-family:Lato,sans-serif;border-top:3px solid black}.card__notice[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Lato,sans-serif;font-size:12px;padding-top:10px}.notice__container[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(1){background-color:#ff000074;top:50%;right:50%}.container__notice--btn[_ngcontent-%COMP%]{display:flex;justify-content:center}.btnBlue[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:18px;padding:15px 60px;position:relative;bottom:0;border-radius:5px;border:none;box-shadow:0 0 3px gray;margin-top:20px;border:2px solid white;background-color:#e7e7e7;cursor:pointer}.btnBlue[_ngcontent-%COMP%]:hover{background-color:#00f;color:#fff}','@media (max-width:900px){.banner[_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:cover}.banner__text[_ngcontent-%COMP%]{width:100%}.banner__text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:27px;font-weight:100;font-family:Montserrat,sans-serif;text-shadow:0px 0px 10px #525252}.banner__img[_ngcontent-%COMP%]{width:0}.banner__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;filter:brightness(.9);display:none}}@media (max-width:800px){.notice__container[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:10px}.card__notice[_ngcontent-%COMP%]{width:40%}}@media (max-width:660px){.promo-periodico[_ngcontent-%COMP%]   .btnDescargaPeriodicoActual[_ngcontent-%COMP%]{width:80%}.centrado[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}.mini__biografia[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.quien-soy[_ngcontent-%COMP%], .me-dedico[_ngcontent-%COMP%]{width:80%}.mini__biografia[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(1), .notice__container[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(1){top:80%;right:20%}.mini__biografia[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(2), .notice__container[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(2){background-color:red;top:20%;right:50%}.carrousel[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){display:none}.carrousel[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){width:250px;height:250px}.container__cards--notice[_ngcontent-%COMP%]{flex-direction:column}.card__notice[_ngcontent-%COMP%]{width:80%!important}}@media (max-width:523px){.carrousel[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){display:none}}@media (max-width:430px){.carrousel[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){width:200px;height:200px}.carrousel__container[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{width:38px!important;height:70px!important}.banner__text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px;text-align:center;padding:0}.maquina-escribir[_ngcontent-%COMP%]:after{content:"";background-color:#fff;right:0;height:80%;position:absolute;animation-delay:.8s}.container__numerales[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;font-family:Lato,sans-serif}.numeral__2[_ngcontent-%COMP%]{margin-top:20px;cursor:pointer}}@media (max-width:320px){.carrousel__container[_ngcontent-%COMP%]{display:none}.btnBlue[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:18px;padding:15px 20px;position:relative;bottom:0;border-radius:5px;border:none;box-shadow:0 0 3px gray;margin-top:20px;border:2px solid white;background-color:#e7e7e7;cursor:pointer}.promo-periodico[_ngcontent-%COMP%]   .btnDescargaPeriodicoActual[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}.promo-periodico[_ngcontent-%COMP%]   .btnDescargaPeriodicoActual[_ngcontent-%COMP%]{width:90%}}']});class sl{constructor(){this.titleDetalleNoticia="Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio!"}}sl.\u0275fac=function(e){return new(e||sl)},sl.\u0275cmp=Ft({type:sl,selectors:[["app-detalle-noticia"]],decls:23,vars:0,consts:[[1,"detalle__banner"],[1,"notice__content"],[1,"notice__introduction"],[1,"notice__img"],["src","../../../../assets/imgs/banner1.jpg","alt",""],[1,"notice__content--text"],["type","button","value","Volver","routerLink","/noticia",1,"btnBlue"]],template:function(e,n){1&e&&(N(0,"app-header"),b(1,"section",0)(2,"div")(3,"p"),M(4,"Noticia | 12 Feb 2022"),D()(),b(5,"div")(6,"h2"),M(7,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Modi aut nobis quibusdam iste soluta illo esse corporis a. A, nam."),D()()(),b(8,"section",1)(9,"div",2),M(10," Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio! isicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio! "),D(),b(11,"div",3),N(12,"img",4),D(),b(13,"div",5),M(14," Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio! isicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio! Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio! isicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio! Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio! isicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio! "),N(15,"br")(16,"br"),M(17," Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio! isicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio! Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio! isicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio! Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio! isicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio! Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio! isicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio! "),N(18,"br")(19,"br"),M(20," Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio! isicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio! Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio! isicing elit. Dolorem sunt non hic dolor rem neque asperiores odio, id libero distinctio! "),N(21,"input",6),D()(),N(22,"app-footer"))},dependencies:[cs,Ni,ki],styles:[".detalle__banner[_ngcontent-%COMP%]{background-color:#3a3a3a;height:300px;display:flex;justify-content:center;flex-direction:column;align-items:center;padding-top:30px}.detalle__banner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:70%;color:#fff;max-width:1400px}.detalle__banner[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif}.detalle__banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:lato,sans-serif;margin:10px 0;padding:10px 0;border-bottom:2px solid red}.notice__content[_ngcontent-%COMP%]{border-top:3px solid #3a3a3a;margin-top:15px;padding-top:20px}.notice__introduction[_ngcontent-%COMP%], .notice__content--text[_ngcontent-%COMP%]{font-family:lato,sans-serif;display:flex;justify-content:center;flex-wrap:wrap;max-width:1400px;margin:auto;padding:10px 150px}.notice__img[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:30px 0}.notice__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70%;height:450px;object-position:top;object-fit:cover;max-width:1400px;margin:auto}.btnBlue[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:14px;padding:10px 17px;position:relative;bottom:0;margin:40px 0 0;border-radius:5px;border:none;box-shadow:0 0 3px gray;border:2px solid white;background-color:#e7e7e7;cursor:pointer}.btnBlue[_ngcontent-%COMP%]:hover{background-color:#00f;color:#fff}"]});class Ea{constructor(){this.title=""}}Ea.\u0275fac=function(e){return new(e||Ea)},Ea.\u0275cmp=Ft({type:Ea,selectors:[["app-banner-default"]],inputs:{title:"title"},decls:4,vars:1,consts:[[1,"periodico__banner"]],template:function(e,n){1&e&&(b(0,"section",0)(1,"div")(2,"h1"),M(3),D()()()),2&e&&(Je(3),xo(n.title))},styles:[".periodico__banner[_ngcontent-%COMP%]{background-color:#3d3d3d;height:100vh;max-height:300px;position:relative;display:flex;justify-content:center;align-items:center}.periodico__banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:45px;color:#fff;text-shadow:0px 0px 10px #080808;margin-top:30px;letter-spacing:3px}"]});class ol{constructor(){this.titleNoticia="Noticias"}}ol.\u0275fac=function(e){return new(e||ol)},ol.\u0275cmp=Ft({type:ol,selectors:[["app-noticia"]],decls:77,vars:1,consts:[[3,"title"],[1,"notice__container"],[1,"container__cards--notice"],["routerLink","/noticia/detalle",1,"card__notice"],[1,"card__notice--img"],["src","../../../assets/imgs/ayudaImgCard.jpg","alt",""],["src","../../../assets/imgs/fondoVoto.jpg","alt",""]],template:function(e,n){1&e&&(N(0,"app-header")(1,"app-banner-default",0),b(2,"section",1)(3,"section",2)(4,"div",3)(5,"div",4),N(6,"img",5),D(),b(7,"div")(8,"h3"),M(9,"Docentes del Cauca montaron cambuches y se tomaron la entrada del Congreso: las im\xe1genes son ins\xf3litas "),D(),b(10,"p"),M(11,"20 septimbre 2023"),D()()(),b(12,"div",3)(13,"div",4),N(14,"img",6),D(),b(15,"div")(16,"h3"),M(17,"Docentes del Cauca montaron cambuches y se tomaron la entrada del Congreso: las im\xe1genes son ins\xf3litas "),D(),b(18,"p"),M(19,"20 septimbre 2023"),D()()(),b(20,"div",3)(21,"div",4),N(22,"img",5),D(),b(23,"div")(24,"h3"),M(25,"Docentes del Cauca montaron cambuches y se tomaron la entrada del Congreso: las im\xe1genes son ins\xf3litas "),D(),b(26,"p"),M(27,"20 septimbre 2023"),D()()(),b(28,"div",3)(29,"div",4),N(30,"img",6),D(),b(31,"div")(32,"h3"),M(33,"Docentes del Cauca montaron cambuches y se tomaron la entrada del Congreso: las im\xe1genes son ins\xf3litas "),D(),b(34,"p"),M(35,"20 septimbre 2023"),D()()(),b(36,"div",3)(37,"div",4),N(38,"img",5),D(),b(39,"div")(40,"h3"),M(41,"Docentes del Cauca montaron cambuches y se tomaron la entrada del Congreso: las im\xe1genes son ins\xf3litas "),D(),b(42,"p"),M(43,"20 septimbre 2023"),D()()(),b(44,"div",3)(45,"div",4),N(46,"img",5),D(),b(47,"div")(48,"h3"),M(49,"Docentes del Cauca montaron cambuches y se tomaron la entrada del Congreso: las im\xe1genes son ins\xf3litas "),D(),b(50,"p"),M(51,"20 septimbre 2023"),D()()(),b(52,"div",3)(53,"div",4),N(54,"img",6),D(),b(55,"div")(56,"h3"),M(57,"Docentes del Cauca montaron cambuches y se tomaron la entrada del Congreso: las im\xe1genes son ins\xf3litas "),D(),b(58,"p"),M(59,"20 septimbre 2023"),D()()(),b(60,"div",3)(61,"div",4),N(62,"img",5),D(),b(63,"div")(64,"h3"),M(65,"Docentes del Cauca montaron cambuches y se tomaron la entrada del Congreso: las im\xe1genes son ins\xf3litas "),D(),b(66,"p"),M(67,"20 septimbre 2023"),D()()(),b(68,"div",3)(69,"div",4),N(70,"img",5),D(),b(71,"div")(72,"h3"),M(73,"Docentes del Cauca montaron cambuches y se tomaron la entrada del Congreso: las im\xe1genes son ins\xf3litas "),D(),b(74,"p"),M(75,"20 septimbre 2023"),D()()()()(),N(76,"app-footer")),2&e&&(Je(1),er("title",n.titleNoticia))},dependencies:[cs,Ni,ki,Ea],styles:[".notice__container[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:30px;max-width:1400px;margin:auto}.notice__title[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:25px;padding:20px 0}.container__cards--notice[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.card__notice[_ngcontent-%COMP%]{background-color:#efefefab;display:flex;justify-content:center;align-items:center;flex-direction:column;padding:10px;width:25%;border-radius:10px;box-shadow:0 0 10px gray;border-bottom:20px solid #ffffff;cursor:pointer;margin:10px 15px;position:relative;z-index:10;min-width:250px}.card__notice[_ngcontent-%COMP%]:hover{animation:_ngcontent-%COMP%_scales .1s;transform:scale(1.02);background-color:#fff}@keyframes _ngcontent-%COMP%_scales{0%{transform:scale(1)}to{transform:scale(1.02)}}.card__notice[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:5px;padding-bottom:10px}.card__notice[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding-top:10px;font-family:Lato,sans-serif;border-top:3px solid black}.card__notice[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Lato,sans-serif;font-size:12px;padding-top:10px}.notice__container[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(1){background-color:#ff000074;top:50%;right:50%}.container__notice--btn[_ngcontent-%COMP%]{display:flex;justify-content:center}"]});class Ia{obtenerDocsPeriodicos(e){return v(function*(){let n=[];return(yield yr.firestore().collection(e).get()).docs.map(i=>{n.push(i.data())}),console.log(n),n})()}constructor(){}}function M9(t,e){if(1&t&&(b(0,"div",3)(1,"div",4),N(2,"img",5),D(),b(3,"div",6)(4,"div"),M(5),D(),b(6,"div")(7,"a",7),N(8,"input",8),D()()()()),2&t){const n=e.$implicit;Je(5),xo(n.fecha),Je(2),Xi("href",n.url,Jr)}}Ia.\u0275fac=function(e){return new(e||Ia)},Ia.\u0275prov=K({token:Ia,factory:Ia.\u0275fac,providedIn:"root"});class al{constructor(e){this.PeriodicoS=e,this.titlePeriodico="Periodico"}getPeriodicos(){this.PeriodicoS.obtenerDocsPeriodicos("periodicosDocs").then(e=>{this.listaPeriodicos=e})}ngOnInit(){this.getPeriodicos()}}al.\u0275fac=function(e){return new(e||al)($(Ia))},al.\u0275cmp=Ft({type:al,selectors:[["app-periodico"]],decls:5,vars:2,consts:[[3,"title"],[1,"periodico__container"],["class","periodico__card",4,"ngFor","ngForOf"],[1,"periodico__card"],[1,"periodico__card--img"],["src","../../../assets/imgs/WhatsApp Image 2023-02-16 at 10.52.35 PM.jpeg","alt",""],[1,"card__dates"],["target","_blank",3,"href"],["type","button","value","Ver",1,"btnBlue","bg-blue"]],template:function(e,n){1&e&&(N(0,"app-header")(1,"app-banner-default",0),b(2,"section",1),oc(3,M9,9,2,"div",2),D(),N(4,"app-footer")),2&e&&(Je(1),er("title",n.titlePeriodico),Je(2),er("ngForOf",n.listaPeriodicos))},dependencies:[bc,Ni,ki,Ea],styles:[".periodico__container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;padding:30px 40px;max-width:1400px;margin:auto}.periodico__card[_ngcontent-%COMP%]{width:300px;display:flex;justify-content:center;align-items:center;flex-direction:column;border-radius:10px;box-shadow:0 0 10px #cecece;margin:20px 10px}.periodico__card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:280px;height:200px;object-fit:cover;object-position:top;border-radius:10px;margin:10px}.card__dates[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;width:100%;align-items:center;font-family:lato,sans-serif;font-size:13px;padding:5px 0 15px}.btnBlue[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:14px;padding:10px 17px;position:relative;bottom:0;margin:0 5px;border-radius:5px;border:none;box-shadow:0 0 3px gray;border:2px solid white;background-color:#e7e7e7;cursor:pointer}.btnBlue[_ngcontent-%COMP%]:hover, .bg-blue[_ngcontent-%COMP%]{background-color:#00f;color:#fff}.bg-blue[_ngcontent-%COMP%]:hover{background-color:#00b}"]});const A9=[{path:"",component:il},{path:"periodico",component:al},{path:"noticia",component:ol},{path:"noticia/detalle",component:sl},{path:"dashboard",component:rl}];class xa{}xa.\u0275fac=function(e){return new(e||xa)},xa.\u0275mod=Vi({type:xa}),xa.\u0275inj=Qr({imports:[xT.forRoot(A9),xT]});class cl{constructor(){this.title="horacioPage"}}cl.\u0275fac=function(e){return new(e||cl)},cl.\u0275cmp=Ft({type:cl,selectors:[["app-root"]],decls:1,vars:0,template:function(e,n){1&e&&N(0,"router-outlet")},dependencies:[vy]});class Sa{}Sa.\u0275fac=function(e){return new(e||Sa)},Sa.\u0275mod=Vi({type:Sa,bootstrap:[cl]}),Sa.\u0275inj=Qr({imports:[nH,xa]}),tH().bootstrapModule(Sa).catch(t=>console.error(t))}},$f=>{$f($f.s=159)}]);